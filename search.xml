<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>CoMER</title>
      <link href="/uncategorized/CoMER/"/>
      <url>/uncategorized/CoMER/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>CNNæ¶æ„</title>
      <link href="/SciResearch/CNN%E6%9E%B6%E6%9E%84/"/>
      <url>/SciResearch/CNN%E6%9E%B6%E6%9E%84/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¼˜è´¨åšå®¢"><a href="#ä¼˜è´¨åšå®¢" class="headerlink" title="ä¼˜è´¨åšå®¢"></a>ä¼˜è´¨åšå®¢</h1><p><a href="https://blog.csdn.net/qq_37541097/category_9488472.html">ç½‘ç»œæ¨¡å‹è®²è§£</a></p><h1 id="CNN"><a href="#CNN" class="headerlink" title="CNN"></a>CNN</h1><h2 id="ç»“æ„"><a href="#ç»“æ„" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h2><img src="/SciResearch/CNN%E6%9E%B6%E6%9E%84/CNN%E7%BB%93%E6%9E%84%E5%9B%BE.jpg" class="" title="CNNç»“æ„å›¾"><ul><li>è¾“å…¥å±‚<code>Input layer</code></li><li>å·ç§¯å±‚ <code>CONV layer</code></li><li>æ± åŒ–å±‚ <code>Pooling layer</code></li><li>å…¨è¿æ¥å±‚ <code>FC layer</code></li><li>è¾“å‡ºå±‚ <code>Output layer</code></li></ul><h3 id="Input-layer"><a href="#Input-layer" class="headerlink" title="Input layer"></a>Input layer</h3><p>å¯¹åŸå§‹å›¾åƒåšé¢„å¤„ç†: å»å‡å€¼ã€å½’ä¸€åŒ–ç­‰</p><h3 id="CONV-layer"><a href="#CONV-layer" class="headerlink" title="CONV layer"></a>CONV layer</h3><p>é€šè¿‡æ§åˆ¶å·ç§¯æ ¸çš„å¤§å°ï¼Œæ­¥å¹…å’Œå¡«å……æå–ç‰¹å¾ï¼Œæ¯ä¸ªç¥ç»å…ƒé€šè¿‡ä¸åŒçš„å·ç§¯æ ¸å…³æ³¨å›¾åƒçš„ä¸åŒçš„ç‰¹å¾</p><h3 id="Pooling-layer"><a href="#Pooling-layer" class="headerlink" title="Pooling layer"></a>Pooling layer</h3><p>åˆ©ç”¨ç‰¹å¾ä¸å˜å½¢å’Œç‰¹å¾é™ç»´å‹ç¼©å›¾åƒ</p><h2 id="æµç¨‹"><a href="#æµç¨‹" class="headerlink" title="æµç¨‹"></a>æµç¨‹</h2><ul><li>INPUT</li><li>[ [ CONV -&gt; RELU ]N -&gt; POOL? ]M</li><li>[ FC -&gt; RELU ]K</li><li>FC</li></ul><h1 id="AlexNet"><a href="#AlexNet" class="headerlink" title="AlexNet"></a>AlexNet</h1><h2 id="ç»“æ„-1"><a href="#ç»“æ„-1" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h2><blockquote><p>5ä¸ªå·ç§¯å±‚åç´§è·Ÿä¸ªå…¨è¿æ¥å±‚ï¼Œ é‡‡ç”¨ReLuæ¿€æ´»å‡½æ•°ï¼Œå¹¶åœ¨å…¨è¿æ¥å±‚åå¢åŠ Dropoutå±‚å‡å°‘è¿‡æ‹Ÿåˆ</p></blockquote><img src="/SciResearch/CNN%E6%9E%B6%E6%9E%84/AlexNet%E7%BB%93%E6%9E%84%E5%9B%BE.png" class="" title="AlexNetç»“æ„å›¾"><h1 id="VGG16"><a href="#VGG16" class="headerlink" title="VGG16"></a>VGG16</h1><h2 id="ç»“æ„-2"><a href="#ç»“æ„-2" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h2><blockquote><p>é‡‡ç”¨è¿ç»­çš„3Ã—3å·ç§¯æ ¸ä»£æ›¿AlexNetä¸­çš„è¾ƒå¤§å·ç§¯æ ¸ï¼ˆ11Ã—11ã€5Ã—5ï¼‰</p></blockquote><img src="/SciResearch/CNN%E6%9E%B6%E6%9E%84/VGG16%E7%BB%93%E6%9E%84%E5%9B%BE.png" class="" title="VGG16ç»“æ„å›¾"><h1 id="ResNet"><a href="#ResNet" class="headerlink" title="ResNet"></a>ResNet</h1><h2 id="æ®‹å·®ç»“æ„"><a href="#æ®‹å·®ç»“æ„" class="headerlink" title="æ®‹å·®ç»“æ„"></a>æ®‹å·®ç»“æ„</h2><img src="/SciResearch/CNN%E6%9E%B6%E6%9E%84/residual%E7%BB%93%E6%9E%84%E5%9B%BE.png" class="" title="residualç»“æ„å›¾"><h2 id="ä¼˜åŠ¿"><a href="#ä¼˜åŠ¿" class="headerlink" title="ä¼˜åŠ¿"></a>ä¼˜åŠ¿</h2><p>å¯ä»¥è¾ƒå¥½çš„è§£å†³æ¢¯åº¦æ¶ˆå¤±|çˆ†ç‚¸å’Œæ¨¡å‹é€€åŒ–çš„é—®é¢˜</p><ul><li>æ¢¯åº¦æ¶ˆå¤±: å‡è®¾æ¯ä¸€å±‚çš„æ¢¯åº¦æ˜¯ä¸€ä¸ªå°äº1çš„æ•°ï¼Œ éšç€å±‚æ•°å˜å¤šï¼Œå‰é¢å±‚çš„æ¢¯åº¦ä¼šè¶Šæ¥è¶Šå°</li><li>æ¨¡å‹é€€åŒ–: éšç€å±‚æ•°çš„åŠ æ·±, æ•ˆæœé€€åŒ–, ä¸å¦‚å±‚æ•°å°‘çš„è®­ç»ƒæ•ˆæœå¥½</li></ul><h2 id="äº®ç‚¹"><a href="#äº®ç‚¹" class="headerlink" title="äº®ç‚¹"></a>äº®ç‚¹</h2><ul><li>æç¤ºå‡ºresidualæ¨¡å—</li><li>ä½¿ç”¨Batch NormalizationåŠ é€Ÿè®­ç»ƒ(ä¸¢å¼ƒdropout)</li></ul><h1 id="DenseNet"><a href="#DenseNet" class="headerlink" title="DenseNet"></a>DenseNet</h1><h2 id="ç»“æ„-3"><a href="#ç»“æ„-3" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h2><blockquote><p>DenseNetçš„ç½‘ç»œç»“æ„ä¸»è¦ç”±<strong>DenseBlock</strong>å’Œ<strong>Transition</strong>ç»„æˆ</p></blockquote><img src="/SciResearch/CNN%E6%9E%B6%E6%9E%84/DenseNet.png" class="" title="DenseNet"><p>â€‹åœ¨DenseBlockä¸­ï¼Œå„ä¸ªå±‚çš„ç‰¹å¾å›¾å¤§å°ä¸€è‡´ï¼Œå¯ä»¥åœ¨channelç»´åº¦ä¸Šè¿æ¥ã€‚DenseBlockä¸­çš„éçº¿æ€§ç»„åˆå‡½æ•°$ H (â‹…)$é‡‡ç”¨çš„æ˜¯BN+ReLU+3x3 Convçš„ç»“æ„ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚å¦å¤–å€¼å¾—æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œä¸ResNetä¸åŒï¼Œæ‰€æœ‰DenseBlockä¸­å„ä¸ªå±‚å·ç§¯ä¹‹åå‡è¾“å‡º$k $ä¸ªç‰¹å¾å›¾ï¼Œå³å¾—åˆ°çš„ç‰¹å¾å›¾çš„channelæ•°ä¸º$k$ ï¼Œæˆ–è€…è¯´é‡‡ç”¨$k $ä¸ªå·ç§¯æ ¸ã€‚$k$ åœ¨DenseNetç§°ä¸ºgrowth rateï¼Œè¿™æ˜¯ä¸€ä¸ªè¶…å‚æ•°ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ä½¿ç”¨è¾ƒå°çš„$ k$ï¼ˆæ¯”å¦‚12ï¼‰ï¼Œå°±å¯ä»¥å¾—åˆ°è¾ƒä½³çš„æ€§èƒ½ã€‚å‡å®šè¾“å…¥å±‚çš„ç‰¹å¾å›¾çš„channelæ•°ä¸º$k_0$ ï¼Œé‚£ä¹ˆ$ L$å±‚è¾“å…¥çš„channelæ•°ä¸º$ k 0 + k (L âˆ’ 1 )$ï¼Œå› æ­¤éšç€å±‚æ•°å¢åŠ ï¼Œå°½ç®¡$k$è®¾å®šå¾—è¾ƒå°ï¼ŒDenseBlockçš„è¾“å…¥ä¼šéå¸¸å¤šï¼Œä¸è¿‡è¿™æ˜¯ç”±äºç‰¹å¾é‡ç”¨æ‰€é€ æˆçš„ï¼Œæ¯ä¸ªå±‚ä»…æœ‰$ k$ä¸ªç‰¹å¾æ˜¯è‡ªå·±ç‹¬æœ‰çš„ã€‚</p><p>â€‹Transitionå±‚ä¸»è¦ç”¨äºè¿æ¥ä¸¤ä¸ªç›¸é‚»çš„DenseBlockï¼Œæ•´åˆä¸Šä¸€ä¸ªDenseBlockè·å¾—çš„ç‰¹å¾ï¼Œç¼©å°ä¸Šä¸€ä¸ªDenseBlockçš„å®½é«˜ï¼Œè¾¾åˆ°ä¸‹é‡‡æ ·æ•ˆæœï¼Œç‰¹å¾å›¾çš„å®½é«˜å‡åŠã€‚Transitionå±‚åŒ…æ‹¬ä¸€ä¸ª1x1å·ç§¯ï¼ˆç”¨äºè°ƒæ•´é€šé“æ•°ï¼‰å’Œ2x2AvgPoolingï¼ˆç”¨äºé™ä½ç‰¹å¾å›¾å¤§å°ï¼‰ï¼Œç»“æ„ä¸ºBN+ReLU+1x1 Conv+2x2 AvgPoolingã€‚å› æ­¤ï¼ŒTransitionå±‚å¯ä»¥èµ·åˆ°å‹ç¼©æ¨¡å‹çš„ä½œç”¨ ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> SciResearch </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CNN </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git-&gt;repository</title>
      <link href="/git/git/"/>
      <url>/git/git/</url>
      
        <content type="html"><![CDATA[<h1 id="é¦–æ¬¡æäº¤è‡³mainåˆ†æ”¯"><a href="#é¦–æ¬¡æäº¤è‡³mainåˆ†æ”¯" class="headerlink" title="é¦–æ¬¡æäº¤è‡³mainåˆ†æ”¯"></a>é¦–æ¬¡æäº¤è‡³mainåˆ†æ”¯</h1><ul><li><p>åˆå§‹åŒ–æœ¬åœ°ä»“åº“</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br></pre></td></tr></table></figure></li><li><p>æ·»åŠ åˆ°æš‚å­˜åŒº</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br></pre></td></tr></table></figure></li><li><p>æ·»åŠ æäº¤ä¿¡æ¯</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit -m <span class="string">&quot;first...&quot;</span></span><br></pre></td></tr></table></figure></li><li><p>å…³è”è¿œç¨‹<code>github</code>ä»“åº“</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote add origin ä»“åº“åœ°å€</span><br></pre></td></tr></table></figure></li><li><p>æ‹‰å–è¿œç¨‹<code>readme.md</code>æ–‡ä»¶(å¦‚æœæœ‰çš„è¯)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push --rebase origin main</span><br></pre></td></tr></table></figure></li><li><p>æŸ¥çœ‹æœ¬åœ°åˆ†æ”¯å¹¶é‡å‘½åä¸ºmain(æœ¬åœ°é»˜è®¤åˆå§‹åŒ–ä¸ºmasteråˆ†æ”¯)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹æœ¬åœ°åˆ†æ”¯</span></span><br><span class="line">git branch</span><br><span class="line"><span class="comment"># é‡å‘½åå½“å‰åˆ†æ”¯</span></span><br><span class="line">git branch -m main</span><br></pre></td></tr></table></figure></li><li><p>æ¨é€</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push -u origin main</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LinkedList</title>
      <link href="/LeetCode/LinkedList/"/>
      <url>/LeetCode/LinkedList/</url>
      
        <content type="html"><![CDATA[<h1 id="LinkedList-Node"><a href="#LinkedList-Node" class="headerlink" title="LinkedList Node"></a>LinkedList Node</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ListNode</span> &#123;</span><br><span class="line">    <span class="comment">// ç»“ç‚¹å€¼</span></span><br><span class="line">    <span class="type">int</span> val;</span><br><span class="line">    <span class="comment">// ä¸‹ä¸€ä¸ªç»“ç‚¹</span></span><br><span class="line">    ListNode next;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ— å‚æ„é€ </span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ListNode</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æœ‰å‚æ„é€ </span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ListNode</span><span class="params">(<span class="type">int</span> val)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.val = val;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å…¨å‚æ„é€ </span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ListNode</span><span class="params">(<span class="type">int</span> val, ListNode next)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.val = val;</span><br><span class="line">        <span class="built_in">this</span>.next = next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="LinkedList-Operate"><a href="#LinkedList-Operate" class="headerlink" title="LinkedList Operate"></a>LinkedList Operate</h1><h2 id="insert"><a href="#insert" class="headerlink" title="insert"></a>insert</h2><blockquote><p>&#x2F;&#x2F; æ³¨æ„: å¤´ç»“ç‚¹ -&gt; å»ºè®®å¢åŠ è™šæ‹Ÿå¤´ç»“ç‚¹è¿›è¡Œå¤„ç†</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cur.val = target;</span><br><span class="line">newNode.next = cur.next;</span><br><span class="line">cur.next = newNode;</span><br></pre></td></tr></table></figure><h2 id="delete"><a href="#delete" class="headerlink" title="delete"></a>delete</h2><blockquote><p>&#x2F;&#x2F; æ³¨æ„: å¤´ç»“ç‚¹ -&gt; å»ºè®®å¢åŠ è™šæ‹Ÿå¤´ç»“ç‚¹è¿›è¡Œå¤„ç†</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cur.next.val = target;</span><br><span class="line">cur.next = cur.next.next;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> LeetCode </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é“¾è¡¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Array</title>
      <link href="/LeetCode/Array/"/>
      <url>/LeetCode/Array/</url>
      
        <content type="html"><![CDATA[<h1 id="äºŒåˆ†æŸ¥æ‰¾"><a href="#äºŒåˆ†æŸ¥æ‰¾" class="headerlink" title="äºŒåˆ†æŸ¥æ‰¾"></a>äºŒåˆ†æŸ¥æ‰¾</h1><blockquote><p>ä½¿ç”¨æ¡ä»¶: </p><pre><code>- æ•°ç»„ä¸­å…ƒç´ æ˜¯æœ‰åºçš„- æ³¨æ„: è‹¥æ•°ç»„ä¸­å­˜åœ¨é‡å¤å…ƒç´ , é‚£æœ€åæŸ¥æ‰¾ç»“æœä¸‹æ ‡å¹¶ä¸å”¯ä¸€</code></pre><p>ä½¿ç”¨åœºæ™¯: </p><pre><code>- åœ¨æœ‰åºæ•°ç»„ä¸­å¯»æ‰¾ç›®æ ‡å€¼çš„ä¸‹æ ‡- å°†ç›®æ ‡å€¼æ’å…¥æœ‰åºæ•°ç»„ä¸­</code></pre></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">binarySearch</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">left</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">right</span> <span class="operator">=</span> nums.length - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (left &lt;= right) &#123;  <span class="comment">// å› ä¸ºæ˜¯[left, right]å·¦é—­å³é—­, å› æ­¤å¿…é¡»åˆ¤æ–­ç­‰äºçš„æƒ…å†µ</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> (left + right) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span> (nums[mid] == target) <span class="keyword">return</span> mid;</span><br><span class="line">        <span class="keyword">if</span> (nums[mid] &gt; target) right = mid - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (nums[mid] &lt; target) left = mid + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="åŒæŒ‡é’ˆ"><a href="#åŒæŒ‡é’ˆ" class="headerlink" title="åŒæŒ‡é’ˆ"></a>åŒæŒ‡é’ˆ</h1><blockquote><p>ä»‹ç»: é€šè¿‡ä¸€ä¸ªå¿«æŒ‡é’ˆå’Œä¸€ä¸ªæ…¢æŒ‡é’ˆåœ¨ä¸€ä¸ªforå¾ªç¯ä¸‹å®Œæˆä¸¤ä¸ªforå¾ªç¯çš„å·¥ä½œ</p><p>ä½¿ç”¨æ–¹æ³•: </p><ul><li>åŒå‘ç§»åŠ¨<ul><li>åŒå‘ç§»åŠ¨</li></ul></li></ul><p>ä½¿ç”¨åœºæ™¯: </p><pre><code>- åŸåœ°ç§»é™¤æ•°ç»„ä¸­çš„æŸå…ƒç´ (åŒå‘)- å¯¹æœ‰æ­£æœ‰è´Ÿçš„æœ‰åºæ•°ç»„çš„å…ƒç´ å¹³æ–¹å†æ’åº(åŒå‘)</code></pre></blockquote><h1 id="æ»‘åŠ¨çª—å£"><a href="#æ»‘åŠ¨çª—å£" class="headerlink" title="æ»‘åŠ¨çª—å£"></a>æ»‘åŠ¨çª—å£</h1><blockquote><p>ä»‹ç»: ä¸æ–­è°ƒæ•´çª—å£å¤§å°å¯»æ‰¾æ‰€éœ€ç»“æœ(åˆ©ç”¨ä¸¤ä¸ªæŒ‡é’ˆæ§åˆ¶çª—å£å¤§å°)</p><p>ä½¿ç”¨åœºæ™¯: </p><pre><code>- æ±‚æ»¡è¶³æ¡ä»¶çš„å­åºåˆ—</code></pre></blockquote><h1 id="å‰ç¼€å’Œ"><a href="#å‰ç¼€å’Œ" class="headerlink" title="å‰ç¼€å’Œ"></a>å‰ç¼€å’Œ</h1><blockquote><p>ä»‹ç»: ç±»ä¼¼ä¸å“ˆå¤«æ›¼ç¼–ç çš„æ€æƒ³, åˆ©ç”¨æ–°æ•°ç»„ä¿å­˜æ¯ä¸ªæ•°ç»„å…ƒç´ iä¹‹å‰(åŒ…æ‹¬i)çš„å’Œ</p><p>ä½¿ç”¨åœºæ™¯: </p><pre><code>- å¯¹æ•°ç»„çš„åŒºé—´å’Œä½¿ç”¨é¢‘ç¹çš„éœ€æ±‚</code></pre></blockquote>]]></content>
      
      
      <categories>
          
          <category> LeetCode </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°ç»„ </tag>
            
            <tag> åŒæŒ‡é’ˆ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>APIå¼€æ”¾å¹³å°</title>
      <link href="/Project/API%E5%B9%B3%E5%8F%B0/"/>
      <url>/Project/API%E5%B9%B3%E5%8F%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="é¡¹ç›®æ€»ç»“"><a href="#é¡¹ç›®æ€»ç»“" class="headerlink" title="é¡¹ç›®æ€»ç»“"></a>é¡¹ç›®æ€»ç»“</h1><h1 id="æ•°æ®åº“è®¾è®¡"><a href="#æ•°æ®åº“è®¾è®¡" class="headerlink" title="æ•°æ®åº“è®¾è®¡"></a>æ•°æ®åº“è®¾è®¡</h1><h2 id="ymlé…ç½®"><a href="#ymlé…ç½®" class="headerlink" title="ymlé…ç½®"></a>ymlé…ç½®</h2><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/xxxx</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">xxxx</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">xxxx</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># mybatis-plus</span></span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">map-underscore-to-camel-case:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="attr">logic-delete-field:</span> <span class="string">isDelete</span> <span class="comment"># å…¨å±€é€»è¾‘åˆ é™¤çš„å®ä½“å­—æ®µå</span></span><br><span class="line">      <span class="attr">logic-delete-value:</span> <span class="number">1</span> <span class="comment"># é€»è¾‘å·²åˆ é™¤å€¼ï¼ˆé»˜è®¤ä¸º 1ï¼‰</span></span><br><span class="line">      <span class="attr">logic-not-delete-value:</span> <span class="number">0</span> <span class="comment"># é€»è¾‘æœªåˆ é™¤å€¼ï¼ˆé»˜è®¤ä¸º 0ï¼‰</span></span><br></pre></td></tr></table></figure><h2 id="æ•°æ®è¡¨"><a href="#æ•°æ®è¡¨" class="headerlink" title="æ•°æ®è¡¨"></a>æ•°æ®è¡¨</h2><p>ğŸˆ <a href="http://sqlfather.yupi.icu/">å¿«é€Ÿç”Ÿæˆ<code>SQL</code></a></p><h3 id="ç”¨æˆ·è¡¨user"><a href="#ç”¨æˆ·è¡¨user" class="headerlink" title="ç”¨æˆ·è¡¨user"></a>ç”¨æˆ·è¡¨<code>user</code></h3><table><thead><tr><th align="center">id</th><th align="center">è´¦å·</th><th align="center">å¯†ç </th><th align="center">ç”¨æˆ·æ˜µç§°</th><th align="center">ç”¨æˆ·å¤´åƒ</th><th align="center">accessKey</th><th align="center">secretKey</th><th align="center">ç”¨æˆ·è§’è‰²</th><th align="center">åˆ›å»ºæ—¶é—´</th><th align="center">æ›´æ–°æ—¶é—´</th><th align="center">æ˜¯å¦åˆ é™¤</th></tr></thead><tbody><tr><td align="center">id</td><td align="center">userAccount</td><td align="center">userPassword</td><td align="center">userName</td><td align="center">userAvatar</td><td align="center">accessKey</td><td align="center">secretKey</td><td align="center">userRole</td><td align="center">createTime</td><td align="center">updateTime</td><td align="center">isDelete</td></tr></tbody></table><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- ç”¨æˆ·è¡¨</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> if <span class="keyword">not</span> <span class="keyword">exists</span> <span class="keyword">user</span></span><br><span class="line">(</span><br><span class="line">    id           <span class="type">bigint</span> auto_increment comment <span class="string">&#x27;id&#x27;</span> <span class="keyword">primary</span> key,</span><br><span class="line">    userAccount  <span class="type">varchar</span>(<span class="number">256</span>)                           <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;è´¦å·&#x27;</span>,</span><br><span class="line">    userPassword <span class="type">varchar</span>(<span class="number">512</span>)                           <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;å¯†ç &#x27;</span>,</span><br><span class="line">    userName     <span class="type">varchar</span>(<span class="number">256</span>)                           <span class="keyword">null</span> comment <span class="string">&#x27;ç”¨æˆ·æ˜µç§°&#x27;</span>,</span><br><span class="line">    userAvatar   <span class="type">varchar</span>(<span class="number">1024</span>)                          <span class="keyword">null</span> comment <span class="string">&#x27;ç”¨æˆ·å¤´åƒ&#x27;</span>,</span><br><span class="line">    accessKey    <span class="type">varchar</span>(<span class="number">512</span>)                           <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;accessKey&#x27;</span>,</span><br><span class="line">    secretKey    <span class="type">varchar</span>(<span class="number">512</span>)                           <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;secretKey&#x27;</span>,</span><br><span class="line">    userRole     <span class="type">varchar</span>(<span class="number">256</span>) <span class="keyword">default</span> <span class="string">&#x27;user&#x27;</span>            <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;ç”¨æˆ·è§’è‰²ï¼šuser/admin/ban&#x27;</span>,</span><br><span class="line">    createTime   datetime     <span class="keyword">default</span> <span class="built_in">CURRENT_TIMESTAMP</span> <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,</span><br><span class="line">    updateTime   datetime     <span class="keyword">default</span> <span class="built_in">CURRENT_TIMESTAMP</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">on</span> <span class="keyword">update</span> <span class="built_in">CURRENT_TIMESTAMP</span> comment <span class="string">&#x27;æ›´æ–°æ—¶é—´&#x27;</span>,</span><br><span class="line">    isDelete     tinyint      <span class="keyword">default</span> <span class="number">0</span>                 <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;æ˜¯å¦åˆ é™¤&#x27;</span></span><br><span class="line">) comment <span class="string">&#x27;ç”¨æˆ·&#x27;</span> <span class="keyword">collate</span> <span class="operator">=</span> utf8mb4_unicode_ci;</span><br></pre></td></tr></table></figure><h3 id="æ¥å£ä¿¡æ¯è¡¨interface-info"><a href="#æ¥å£ä¿¡æ¯è¡¨interface-info" class="headerlink" title="æ¥å£ä¿¡æ¯è¡¨interface_info"></a>æ¥å£ä¿¡æ¯è¡¨<code>interface_info</code></h3><blockquote><p>Tips: ä»¿ç…§ç½‘ç»œä¸­è¯·æ±‚æ ·ä¾‹è¿›è¡Œè®¾è®¡</p><p>â€‹- statusä¸­ 0-å…³é—­(é»˜è®¤) 1 -æ‰“å¼€ </p></blockquote><table><thead><tr><th align="center">id</th><th align="center">åç§°</th><th align="center">æè¿°</th><th align="center">è¯·æ±‚åœ°å€</th><th align="center">è¯·æ±‚ç±»å‹</th><th align="center">è¯·æ±‚å¤´</th><th align="center">å“åº”å¤´</th><th align="center">çŠ¶æ€</th><th>åˆ›å»ºäºº</th><th align="center">åˆ›å»ºæ—¶é—´</th><th align="center">æ›´æ–°æ—¶é—´</th><th align="center">æ˜¯å¦åˆ é™¤</th></tr></thead><tbody><tr><td align="center">id</td><td align="center">name</td><td align="center">description</td><td align="center">url</td><td align="center">method</td><td align="center">requestHeader</td><td align="center">responseHeader</td><td align="center">status</td><td>userId</td><td align="center">createTime</td><td align="center">updateTime</td><td align="center">isDelete</td></tr></tbody></table><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- æ¥å£ä¿¡æ¯è¡¨</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> if <span class="keyword">not</span> <span class="keyword">exists</span> `interface_info`</span><br><span class="line">(</span><br><span class="line">    `id` <span class="type">bigint</span> <span class="keyword">not</span> <span class="keyword">null</span> auto_increment comment <span class="string">&#x27;ä¸»é”®&#x27;</span> <span class="keyword">primary</span> key,</span><br><span class="line">    `name` <span class="type">varchar</span>(<span class="number">256</span>) <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;æ¥å£åç§°&#x27;</span>,</span><br><span class="line">    `description` <span class="type">varchar</span>(<span class="number">256</span>) <span class="keyword">null</span> comment <span class="string">&#x27;æ¥å£æè¿°&#x27;</span>,</span><br><span class="line">    `url` <span class="type">varchar</span>(<span class="number">512</span>) <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;æ¥å£åœ°å€&#x27;</span>,</span><br><span class="line">    `<span class="keyword">method</span>` <span class="type">varchar</span>(<span class="number">256</span>) <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;è¯·æ±‚æ–¹æ³•&#x27;</span>,</span><br><span class="line">    `requestHeader` text <span class="keyword">null</span> comment <span class="string">&#x27;è¯·æ±‚å¤´&#x27;</span>,</span><br><span class="line">    `responseHeader` text <span class="keyword">null</span> comment <span class="string">&#x27;å“åº”å¤´&#x27;</span>,</span><br><span class="line">    `status` <span class="type">int</span> <span class="keyword">default</span> <span class="number">0</span> <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;æ¥å£çŠ¶æ€ 0-å…³é—­(é»˜è®¤) 1-æ‰“å¼€&#x27;</span>,</span><br><span class="line">    `userId` <span class="type">bigint</span> <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;åˆ›å»ºäºº&#x27;</span>,</span><br><span class="line">    `createTime` datetime <span class="keyword">default</span> <span class="built_in">CURRENT_TIMESTAMP</span> <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,</span><br><span class="line">    `updateTime` datetime <span class="keyword">default</span> <span class="built_in">CURRENT_TIMESTAMP</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">on</span> <span class="keyword">update</span> <span class="built_in">CURRENT_TIMESTAMP</span> comment <span class="string">&#x27;æ›´æ–°æ—¶é—´&#x27;</span>,</span><br><span class="line">    `isDeleted` tinyint <span class="keyword">default</span> <span class="number">0</span> <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;æ˜¯å¦åˆ é™¤(0-æœªåˆ , 1-å·²åˆ )&#x27;</span></span><br><span class="line">) comment <span class="string">&#x27;æ¥å£ä¿¡æ¯è¡¨&#x27;</span>;</span><br></pre></td></tr></table></figure><h3 id="ç”¨æˆ·æ¥å£å…³ç³»è¡¨user-interface-info"><a href="#ç”¨æˆ·æ¥å£å…³ç³»è¡¨user-interface-info" class="headerlink" title="ç”¨æˆ·æ¥å£å…³ç³»è¡¨user_interface_info"></a>ç”¨æˆ·æ¥å£å…³ç³»è¡¨<code>user_interface_info</code></h3><table><thead><tr><th align="center">id</th><th align="center">ç”¨æˆ·id</th><th align="center">æ¥å£id</th><th align="center">æ‹¥æœ‰è°ƒç”¨æ¬¡æ•°</th><th align="center">å·²è°ƒç”¨æ¬¡æ•°</th><th align="center">çŠ¶æ€</th><th align="center">åˆ›å»ºæ—¶é—´</th><th align="center">æ›´æ–°æ—¶é—´</th><th align="center">æ˜¯å¦åˆ é™¤</th></tr></thead><tbody><tr><td align="center">id</td><td align="center">userId</td><td align="center">interfaceInfoId</td><td align="center">totalNum</td><td align="center">invokeNum</td><td align="center">status</td><td align="center">createTime</td><td align="center">updateTime</td><td align="center">isDelete</td></tr></tbody></table><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- ç”¨æˆ·æ¥å£å…³ç³»è¡¨</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> if <span class="keyword">not</span> <span class="keyword">exists</span> `user_interface_info`</span><br><span class="line">(</span><br><span class="line">    `id`              <span class="type">bigint</span>                             <span class="keyword">not</span> <span class="keyword">null</span> auto_increment comment <span class="string">&#x27;ä¸»é”®&#x27;</span> <span class="keyword">primary</span> key,</span><br><span class="line">    `userId`          <span class="type">bigint</span>                             <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;ç”¨æˆ·id&#x27;</span>,</span><br><span class="line">    `interfaceInfoId` <span class="type">bigint</span>                             <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;æ¥å£id&#x27;</span>,</span><br><span class="line">    `totalNum`        <span class="type">int</span>      <span class="keyword">default</span> <span class="number">0</span>                 <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;æ‹¥æœ‰è°ƒç”¨æ¬¡æ•°&#x27;</span>,</span><br><span class="line">    `invokeNum`       <span class="type">int</span>      <span class="keyword">default</span> <span class="number">0</span>                 <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;å·²è°ƒç”¨æ¬¡æ•°&#x27;</span>,</span><br><span class="line">    `status`          <span class="type">int</span>      <span class="keyword">default</span> <span class="number">0</span>                 <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;0-æ­£å¸¸(é»˜è®¤) 1-ç¦ç”¨(æ¬¡æ•°ç”¨å…‰)&#x27;</span>,</span><br><span class="line">    `createTime`      datetime <span class="keyword">default</span> <span class="built_in">CURRENT_TIMESTAMP</span> <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,</span><br><span class="line">    `updateTime`      datetime <span class="keyword">default</span> <span class="built_in">CURRENT_TIMESTAMP</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">on</span> <span class="keyword">update</span> <span class="built_in">CURRENT_TIMESTAMP</span> comment <span class="string">&#x27;æ›´æ–°æ—¶é—´&#x27;</span>,</span><br><span class="line">    `isDeleted`       tinyint  <span class="keyword">default</span> <span class="number">0</span>                 <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;æ˜¯å¦åˆ é™¤(0-æœªåˆ , 1-å·²åˆ )&#x27;</span></span><br><span class="line">) comment <span class="string">&#x27;ç”¨æˆ·æ¥å£å…³ç³»è¡¨&#x27;</span>;</span><br></pre></td></tr></table></figure><h1 id="å¿«é€Ÿç”ŸæˆCRUD"><a href="#å¿«é€Ÿç”ŸæˆCRUD" class="headerlink" title="å¿«é€Ÿç”ŸæˆCRUD"></a>å¿«é€Ÿç”ŸæˆCRUD</h1><p>ğŸˆ <code>MybatisX</code>æ’ä»¶</p><ul><li><p>é€‰æ‹©æ¨¡å—åç§°ã€é©¼å³°å‘½åã€ç”Ÿæˆä½ç½®(æœ€åå…ˆç»Ÿä¸€ç”Ÿæˆåœ¨ä¸€ä¸ªåŒ…å†…, ç„¶ååˆ†åˆ«å¤åˆ¶è¿‡å»)</p><img src="/Project/API%E5%B9%B3%E5%8F%B0/image-20240728143557303.png" class="" title="image-20240728143557303"><img src="/Project/API%E5%B9%B3%E5%8F%B0/image-20240728143607828.png" class="" title="image-20240728143607828"></li><li><p>å°†ç”Ÿæˆçš„entityã€serviceã€mapperå¤åˆ¶åˆ°å¯¹åº”çš„ä½ç½®ï¼Œä¿®æ”¹mapper.xmlä¸­çš„åŒ…å</p></li><li><p>å¢åŠ ä¸»é”®å’Œé€»è¾‘åˆ é™¤æ³¨è§£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * id</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@TableId(type = IdType.ASSIGN_ID)</span></span><br><span class="line"><span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ˜¯å¦åˆ é™¤</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@TableLogic</span></span><br><span class="line"><span class="keyword">private</span> Integer isDelete;</span><br></pre></td></tr></table></figure></li></ul><h1 id="æ¨¡æ‹Ÿæ¥å£æ¨¡å—å¼€å‘"><a href="#æ¨¡æ‹Ÿæ¥å£æ¨¡å—å¼€å‘" class="headerlink" title="æ¨¡æ‹Ÿæ¥å£æ¨¡å—å¼€å‘"></a>æ¨¡æ‹Ÿæ¥å£æ¨¡å—å¼€å‘</h1><h2 id="æä¾›æ¥å£"><a href="#æä¾›æ¥å£" class="headerlink" title="æä¾›æ¥å£"></a>æä¾›æ¥å£</h2><blockquote><p>æ¨¡å—: api-interface</p><p>åŠŸèƒ½: æä¾›æ¨¡æ‹Ÿçš„æ¥å£</p><p>æä¾›ä¸‰ä¸ªæ¨¡æ‹Ÿæ¥å£  GETæ¥å£ | POSTæ¥å£(urlä¼ å‚) | (Restful)</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åç§°API</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/name&quot;)</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">NameController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping()</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getNameByGet</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;GET ä½ çš„åå­—æ˜¯&quot;</span> + name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/&#123;name&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getNameByPost</span><span class="params">(<span class="meta">@PathVariable</span> String name)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;POST ä½ çš„åå­—æ˜¯&quot;</span> + name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping()</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getUsernameByPost</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;POST ç”¨æˆ·åæ˜¯&quot;</span> + user.getUsername();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç½‘å…³æµé‡æŸ“è‰²éªŒè¯"><a href="#ç½‘å…³æµé‡æŸ“è‰²éªŒè¯" class="headerlink" title="ç½‘å…³æµé‡æŸ“è‰²éªŒè¯"></a>ç½‘å…³æµé‡æŸ“è‰²éªŒè¯</h2><blockquote><p>æµé‡æŸ“è‰²: æŒ‡åœ¨è¯·æ±‚æµä¸­æ·»åŠ æ ‡è¯†ï¼ˆä¾‹å¦‚ç‰¹å®šçš„ HTTP å¤´éƒ¨æˆ–è¯·æ±‚å‚æ•°ï¼‰ï¼Œä»¥æ ‡è®°ä¸åŒç±»å‹çš„æµé‡ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæµé‡åœ¨ç»è¿‡å„ä¸ªå¾®æœåŠ¡å’Œç»„ä»¶æ—¶å¯ä»¥è¢«è¯†åˆ«å’Œå¤„ç†ã€‚</p><p>é¿å…éæ³•è°ƒç”¨æ•…åœ¨ç½‘å…³å¤„å¢åŠ æµé‡æŸ“è‰², å¿…é¡»æ˜¯ç½‘å…³è½¬å‘çš„è¯·æ±‚æ‰ä¼šè¿›è¡Œå¤„ç†</p><p>ğŸˆ å®ç°æµç¨‹: </p><pre><code>- å®ç°å…¨å±€è¯·æ±‚æ‹¦æˆªå™¨åˆ¤æ–­è¯·æ±‚æ˜¯å¦æ˜¯ç”±ç½‘å…³è½¬å‘è€Œæ¥- è°ƒç”¨å¯¹åº”æ¥å£</code></pre></blockquote><p>ğŸ”— å…¨å±€è¯·æ±‚æ‹¦æˆªå™¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å…¨å±€æ¥å£è¯·æ±‚æ‹¦æˆªå™¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GlobalInterceptor</span> <span class="keyword">implements</span> <span class="title class_">HandlerInterceptor</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è¿”å› trueï¼šæ”¾è¡Œ falseï¼šä¸æ”¾è¡Œ</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">flag</span> <span class="operator">=</span> request.getHeader(<span class="string">&quot;Gateway-Flag&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (flag == <span class="literal">null</span> || !flag.equals(<span class="string">&quot;gbbdxstx&quot;</span>)) &#123;</span><br><span class="line">            response.setStatus(HttpServletResponse.SC_UNAUTHORIZED);</span><br><span class="line">            <span class="comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹å’Œç¼–ç </span></span><br><span class="line">            response.setContentType(<span class="string">&quot;application/json&quot;</span>);</span><br><span class="line">            response.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">            <span class="comment">// å†™å…¥å“åº”ä½“</span></span><br><span class="line">            response.getWriter().write(<span class="string">&quot;æ‚¨æ— æƒé™è°ƒç”¨æ­¤æ¥å£&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>; <span class="comment">//trueè¡¨ç¤ºæ”¾è¡Œ</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ğŸ”— æ³¨å†Œè‡ªå®šä¹‰æ‹¦æˆªå™¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é…ç½®ç±»ï¼Œæ³¨å†Œwebå±‚ç›¸å…³ç»„ä»¶</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebMvcConfiguration</span> <span class="keyword">extends</span> <span class="title class_">WebMvcConfigurationSupport</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> GlobalInterceptor globalInterceptor;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ³¨å†Œè‡ªå®šä¹‰æ‹¦æˆªå™¨</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> registry</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> &#123;</span><br><span class="line">        registry.addInterceptor(globalInterceptor)</span><br><span class="line">            .addPathPatterns(<span class="string">&quot;/**&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ‰©å±•Spring MVCæ¡†æ¶çš„æ¶ˆæ¯è½¬æ¢å™¨</span></span><br><span class="line"><span class="comment">     * é¿å…è¿”å›å­—ç¬¦ä¸²æ—¶æ˜¯ä¹±ç &#x27;?&#x27;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> converters</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">extendMessageConverters</span><span class="params">(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters)</span> &#123;</span><br><span class="line">        converters.stream()</span><br><span class="line">            <span class="comment">// è¿‡æ»¤å‡ºStringHttpMessageConverterç±»å‹å®ä¾‹</span></span><br><span class="line">            .filter(StringHttpMessageConverter.class::isInstance)</span><br><span class="line">            .map(c -&gt; (StringHttpMessageConverter) c)</span><br><span class="line">            <span class="comment">// è¿™é‡Œå°†è½¬æ¢å™¨çš„é»˜è®¤ç¼–ç è®¾ç½®ä¸ºutf-8</span></span><br><span class="line">            .forEach(c -&gt; c.setDefaultCharset(StandardCharsets.UTF_8));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="æ¥å£è°ƒç”¨SDKå¼€å‘"><a href="#æ¥å£è°ƒç”¨SDKå¼€å‘" class="headerlink" title="æ¥å£è°ƒç”¨SDKå¼€å‘"></a>æ¥å£è°ƒç”¨SDKå¼€å‘</h1><blockquote><p>æ¨¡å—ï¼š api-sdk</p><p><code>SDK</code>: ä¸€ç»„å·¥å…·ã€åº“ã€ç¤ºä¾‹ä»£ç çš„é›†åˆï¼Œå¸®åŠ©å¼€å‘è€…|æ¥å£è°ƒç”¨è€…åˆ›å»ºåº”ç”¨ç¨‹åºæˆ–è€…è¿›è¡Œç‰¹å®šçš„å¼€å‘ä»»åŠ¡</p><p>æ¨¡å—åŠŸèƒ½: æä¾›å®¢æˆ·ç«¯æœåŠ¡ï¼Œä½¿å¼€å‘è€…|æ¥å£è°ƒç”¨è€…åªéœ€è¦å…³æ³¨è°ƒç”¨å“ªä¸ªæ¥å£ï¼Œä¼ é€’å“ªäº›å‚æ•°ï¼Œå°±è·Ÿè°ƒç”¨ç°æœ‰çš„æ–¹æ³•ä¸€æ ·, è¿™æ ·å¼€å‘è€…| æ¥å£è°ƒç”¨è€…ä¾¿ä¸ç”¨è‡ªå·±ç¼–å†™ç­¾åè®¤è¯çš„ä»£ç , åªè¦è°ƒç”¨å®¢æˆ·ç«¯çš„æ–¹æ³•å³å¯</p><p>è°ƒç”¨HTTPæ–¹å¼: HttpClient | RestTemplate | ç¬¬ä¸‰æ–¹åº“(OKHTTPã€Hutool)</p><p>ğŸˆâ€‹ æœ¬é¡¹ç›®ä½¿ç”¨çš„æ˜¯ Hutool å·¥å…·åŒ…</p><p>ğŸˆ å®ç°æµç¨‹: </p><pre><code>- å®¢æˆ·ç«¯å¼€å‘, å°è£…è¯·æ±‚å¤´(ç­¾åè®¤è¯ä¿¡æ¯), å‘ç½‘å…³å‘é€è¯·æ±‚- ç­¾åå·¥å…·ç±»(åŠ å¯†)- ç¼–å†™é…ç½®ç±», å®ç°å°†ä»é…ç½®æ–‡ä»¶è¯»å–ä¿¡æ¯å¹¶æŠŠå®¢æˆ·ç«¯äº¤ç»™Springå®¹å™¨ç®¡ç†- å®ç°å¼€å‘è€…å¼•ç”¨`SDK`è‡ªåŠ¨é…ç½®- åˆ©ç”¨Mavenæ‰“åŒ…, ä¸Šä¼ åˆ°ä»“åº“ä¸­</code></pre></blockquote><h2 id="ğŸ”—-APIç­¾åè®¤è¯ä»‹ç»"><a href="#ğŸ”—-APIç­¾åè®¤è¯ä»‹ç»" class="headerlink" title="ğŸ”— APIç­¾åè®¤è¯ä»‹ç»"></a>ğŸ”— APIç­¾åè®¤è¯ä»‹ç»</h2><h3 id="æœ¬è´¨"><a href="#æœ¬è´¨" class="headerlink" title="æœ¬è´¨"></a>æœ¬è´¨</h3><ul><li>ç­¾å‘ç­¾å</li><li>ä½¿ç”¨ç­¾å(æ ¡éªŒç­¾å)</li></ul><blockquote><p>ç”¨æˆ·æ¯æ¬¡è°ƒç”¨æ¥å£éƒ½éœ€è¦æºå¸¦akå’Œsk, åªè®¤ç­¾å, ä¸å…³æ³¨ç”¨æˆ·ç™»å½•æ€</p><p>akå’Œskç±»ä¼¼ç”¨æˆ·åå’Œå¯†ç , åŒºåˆ«æ˜¯akå’Œskæ˜¯æ— çŠ¶æ€çš„</p></blockquote><ul><li>accessKey: è°ƒç”¨çš„æ ‡è¯†</li><li>secretKey: å¯†é’¥</li></ul><h3 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h3><blockquote><p>é€šè¿‡http request header å¤´ä¼ é€’å‚æ•°, ä¸»è¦åŒ…æ‹¬</p></blockquote><ul><li><p><code>accessKey</code> : è°ƒç”¨çš„æ ‡è¯†</p></li><li><p><code>secretKey</code>: å¯†é’¥  âœ¨ å¯†é’¥ä¸èƒ½æ”¾åˆ°è¯·æ±‚å¤´ä¸­</p></li><li><p>ç”¨æˆ·è¯·æ±‚å‚æ•°</p></li><li><p>ç­¾å<code>sign</code></p><ul><li>ç”Ÿæˆ: ç”¨æˆ·å‚æ•° + å¯†é’¥ + ç­¾åç”Ÿæˆç®—æ³•(MD5ã€Hmacã€Sha1) &#x3D;&gt; ä¸å¯è§£å¯†çš„å€¼</li><li>éªŒè¯: æœåŠ¡ç«¯ç”¨ä¸€æ¨¡ä¸€æ ·çš„å‚æ•°å’Œç®—æ³•ç”Ÿæˆæ–°ç­¾å, åˆ¤æ–­ä¸è¯·æ±‚å¤´ä¸­çš„ç­¾åæ˜¯å¦ä¸€è‡´</li></ul></li><li><p><code>nonce</code>: ä¸€ä¸ªéšæœºæ•°, åªèƒ½ç”¨ä¸€æ¬¡, æœåŠ¡ç«¯è¦ä¿å­˜ç”¨è¿‡çš„éšæœºæ•°</p></li><li><p><code>timestamp</code>: éªŒè¯æ—¶é—´æ—¶é—´æˆ³æ˜¯å¦è¿‡æœŸ, è¾¾åˆ°å®šæ—¶æ¸…ç†éšæœºæ•°çš„æ•ˆæœ</p></li></ul><h3 id="åˆ†é…accessKeyå’ŒsecretKey"><a href="#åˆ†é…accessKeyå’ŒsecretKey" class="headerlink" title="åˆ†é…accessKeyå’ŒsecretKey"></a>åˆ†é…accessKeyå’ŒsecretKey</h3><blockquote><p>åœ¨ç”¨æˆ·æ³¨å†ŒæˆåŠŸæ—¶è‡ªåŠ¨åˆ†é… <code>accessKey</code> å’Œ <code>secretKey</code></p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 3. åˆ†é… accessKey å’Œ secretKey</span></span><br><span class="line"><span class="type">String</span> <span class="variable">accessKey</span> <span class="operator">=</span> DigestUtil.md5Hex(SALT + userAccount + RandomUtil.randomNumbers(<span class="number">5</span>));</span><br><span class="line"><span class="type">String</span> <span class="variable">secretKey</span> <span class="operator">=</span> DigestUtil.md5Hex(SALT + userAccount + RandomUtil.randomNumbers(<span class="number">8</span>));</span><br><span class="line"><span class="comment">// 4. æ’å…¥æ•°æ®</span></span><br><span class="line"><span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">user.setAccessKey(accessKey);</span><br><span class="line">user.setSecretKey(secretKey);</span><br></pre></td></tr></table></figure><h3 id="ä½œä¸š"><a href="#ä½œä¸š" class="headerlink" title="ä½œä¸š"></a>ä½œä¸š</h3><p>ç”¨æˆ·å¯ä»¥ç”³è¯·æ›´æ¢ç­¾å â€“ æœ‰ç©ºå¯åš</p><h2 id="ğŸ”—-å®¢æˆ·ç«¯å¼€å‘"><a href="#ğŸ”—-å®¢æˆ·ç«¯å¼€å‘" class="headerlink" title="ğŸ”— å®¢æˆ·ç«¯å¼€å‘"></a>ğŸ”— å®¢æˆ·ç«¯å¼€å‘</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è°ƒç”¨ç¬¬ä¸‰æ–¹æ¥å£çš„å®¢æˆ·ç«¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ApiClient</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String accessKey;</span><br><span class="line">    <span class="keyword">private</span> String secretKey;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">GATEWAY_HOST</span> <span class="operator">=</span> <span class="string">&quot;http://localhost:8103&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ApiClient</span><span class="params">(String accessKey, String secretKey)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.accessKey = accessKey;</span><br><span class="line">        <span class="built_in">this</span>.secretKey = secretKey;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getNameByGet</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="comment">//å¯ä»¥å•ç‹¬ä¼ å…¥httpå‚æ•°ï¼Œè¿™æ ·å‚æ•°ä¼šè‡ªåŠ¨åšURLç¼–ç ï¼Œæ‹¼æ¥åœ¨URLä¸­</span></span><br><span class="line">        HashMap&lt;String, Object&gt; paramMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        paramMap.put(<span class="string">&quot;name&quot;</span>, name);</span><br><span class="line">        <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> HttpRequest.get(GATEWAY_HOST + <span class="string">&quot;/api/name&quot;</span>)</span><br><span class="line">                .form(paramMap)  <span class="comment">// æ‹¼æ¥å‚æ•°</span></span><br><span class="line">                .addHeaders(getHeaderMap(<span class="string">&quot;&quot;</span>))  <span class="comment">// å¢åŠ è¯·æ±‚å¤´</span></span><br><span class="line">                .execute().body();</span><br><span class="line">        System.out.println(result);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getNameByPost</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">urlString</span> <span class="operator">=</span> GATEWAY_HOST + <span class="string">&quot;/api/name/&quot;</span> + name;</span><br><span class="line">        <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> HttpUtil.post(urlString, <span class="string">&quot;&quot;</span>);</span><br><span class="line">        System.out.println(result);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, String&gt; <span class="title function_">getHeaderMap</span><span class="params">(String body)</span> &#123;</span><br><span class="line">        HashMap&lt;String, String&gt; hashMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        hashMap.put(<span class="string">&quot;accessKey&quot;</span>, accessKey);</span><br><span class="line">        <span class="comment">// ä¸€å®šä¸èƒ½å‘é€ç»™åç«¯</span></span><br><span class="line">        <span class="comment">//hashMap.put(&quot;secretKey&quot;, secretKey);</span></span><br><span class="line">        hashMap.put(<span class="string">&quot;nonce&quot;</span>, RandomUtil.randomNumbers(<span class="number">4</span>));</span><br><span class="line">        hashMap.put(<span class="string">&quot;body&quot;</span>, URLEncoder.encode(body, StandardCharsets.UTF_8));</span><br><span class="line">        hashMap.put(<span class="string">&quot;timestamp&quot;</span>, String.valueOf(System.currentTimeMillis() / <span class="number">1000</span>));</span><br><span class="line">        hashMap.put(<span class="string">&quot;sign&quot;</span>, SignUtil.getSign(body, secretKey));</span><br><span class="line">        <span class="keyword">return</span> hashMap;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getUsernameByPost</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">json</span> <span class="operator">=</span> JSONUtil.toJsonStr(user);</span><br><span class="line">        <span class="type">HttpResponse</span> <span class="variable">httpResponse</span> <span class="operator">=</span> HttpRequest.post(GATEWAY_HOST + <span class="string">&quot;/api/name/user&quot;</span>)</span><br><span class="line">                .addHeaders(getHeaderMap(json))</span><br><span class="line">                .body(json)  <span class="comment">// postè¯·æ±‚è¯·æ±‚ä½“</span></span><br><span class="line">                .execute();</span><br><span class="line">        System.out.println(httpResponse.getStatus());</span><br><span class="line">        <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> httpResponse.body();</span><br><span class="line">        System.out.println(result);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ğŸ”—-ç­¾åå·¥å…·ç±»"><a href="#ğŸ”—-ç­¾åå·¥å…·ç±»" class="headerlink" title="ğŸ”— ç­¾åå·¥å…·ç±»"></a>ğŸ”— ç­¾åå·¥å…·ç±»</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç­¾ååŠ å¯†</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SignUtil</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getSign</span><span class="params">(String body, String secretKey)</span> &#123;</span><br><span class="line">        <span class="type">Digester</span> <span class="variable">md5</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Digester</span>(DigestAlgorithm.MD5);</span><br><span class="line">        <span class="type">String</span> <span class="variable">content</span> <span class="operator">=</span> body + <span class="string">&quot;.&quot;</span> + secretKey;</span><br><span class="line">        <span class="keyword">return</span> md5.digestHex(content);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ğŸ”—-é…ç½®ç±»"><a href="#ğŸ”—-é…ç½®ç±»" class="headerlink" title="ğŸ”— é…ç½®ç±»"></a>ğŸ”— é…ç½®ç±»</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(&quot;api.client&quot;)</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@ComponentScan</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ApiClientConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ‡è¯†</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String accessKey;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¯†é’¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String secretKey;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> ApiClient <span class="title function_">apiClient</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ApiClient</span>(accessKey, secretKey);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ğŸ”—-å®ç°å¼€å‘è€…å¼•å…¥SDKè‡ªåŠ¨é…ç½®"><a href="#ğŸ”—-å®ç°å¼€å‘è€…å¼•å…¥SDKè‡ªåŠ¨é…ç½®" class="headerlink" title="ğŸ”— å®ç°å¼€å‘è€…å¼•å…¥SDKè‡ªåŠ¨é…ç½®"></a>ğŸ”— å®ç°å¼€å‘è€…å¼•å…¥<code>SDK</code>è‡ªåŠ¨é…ç½®</h2><blockquote><p> åˆ›å»º<code>resources\META-INF\spring.factories</code>æ–‡ä»¶, å†™å…¥ä»¥ä¸‹å†…å®¹</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># spring boot starter</span></span><br><span class="line">org.springframework.boot.autoconfigure.EnableAutoConfiguration=com.gbbdxstx.gbbdxstxapiclientsdk.ApiClientConfig</span><br></pre></td></tr></table></figure><h1 id="RPCå¼€å‘"><a href="#RPCå¼€å‘" class="headerlink" title="RPCå¼€å‘"></a>RPCå¼€å‘</h1><blockquote><p>ä½œç”¨: ä½¿è°ƒç”¨è€…åƒè°ƒç”¨æœ¬åœ°æ–¹æ³•ä¸€æ ·è°ƒç”¨è¿œç¨‹æ–¹æ³•</p></blockquote><p>ğŸˆ RPCæ¨¡å‹: </p><img src="/Project/API%E5%B9%B3%E5%8F%B0/image-20240805131518235.png" class="" title="image-20240805131518235"><h2 id="ğŸ”—-å…¬å…±æœåŠ¡æ¥å£"><a href="#ğŸ”—-å…¬å…±æœåŠ¡æ¥å£" class="headerlink" title="ğŸ”— å…¬å…±æœåŠ¡æ¥å£"></a>ğŸ”— å…¬å…±æœåŠ¡æ¥å£</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç½‘å…³æœåŠ¡å…¬å…±æ¥å£</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">DemoService</span> &#123;</span><br><span class="line"></span><br><span class="line">    String <span class="title function_">sayHello</span><span class="params">(String name)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è°ƒç”¨æ¥å£ç»Ÿè®¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">invokeCount</span><span class="params">(<span class="type">long</span> userId, <span class="type">long</span> interfaceInfoId)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®ak,skè·å–ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> accessKey</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    User <span class="title function_">getInvokeUser</span><span class="params">(String accessKey)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®è¯·æ±‚è·¯å¾„å’Œæ–¹æ³•è·å–æ¥å£ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> url</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> method</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    InterfaceInfo <span class="title function_">getInterfaceInfo</span><span class="params">(String url, String method)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ğŸ”—-æä¾›è€…"><a href="#ğŸ”—-æä¾›è€…" class="headerlink" title="ğŸ”— æä¾›è€…"></a>ğŸ”— æä¾›è€…</h2><blockquote><p>å¯åŠ¨ç±»ä¸Šè¦åŠ <code>@EnableDubbo</code>æ³¨è§£</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æä¾›æœåŠ¡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@DubboService</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DemoServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">DemoService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> UserInterfaceInfoMapper userInterfaceInfoMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> InterfaceInfoMapper interfaceInfoMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">sayHello</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello &quot;</span> + name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ›´æ–°è°ƒç”¨æ¬¡æ•°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> userId</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> interfaceInfoId</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">invokeCount</span><span class="params">(<span class="type">long</span> userId, <span class="type">long</span> interfaceInfoId)</span> &#123;</span><br><span class="line">        <span class="comment">// æ ¡éªŒ</span></span><br><span class="line">        ThrowUtils.throwIf(userId &lt;= <span class="number">0</span> || interfaceInfoId &lt;= <span class="number">0</span>, ErrorCode.PARAMS_ERROR);</span><br><span class="line">        <span class="comment">// æŸ¥è¯¢æ•°æ®</span></span><br><span class="line">        QueryWrapper&lt;UserInterfaceInfo&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">        queryWrapper.eq(<span class="string">&quot;userId&quot;</span>, userId);</span><br><span class="line">        queryWrapper.eq(<span class="string">&quot;interfaceInfoId&quot;</span>, interfaceInfoId);</span><br><span class="line">        queryWrapper.eq(<span class="string">&quot;status&quot;</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="type">UserInterfaceInfo</span> <span class="variable">userInterfaceInfo</span> <span class="operator">=</span> userInterfaceInfoMapper.selectOne(queryWrapper);</span><br><span class="line">        ThrowUtils.throwIf(userInterfaceInfo == <span class="literal">null</span>, ErrorCode.NO_AUTH_ERROR);</span><br><span class="line">        userInterfaceInfo.setInvokeNum(userInterfaceInfo.getInvokeNum() + <span class="number">1</span>);</span><br><span class="line">        <span class="comment">// åˆ¤æ–­æ˜¯å¦è¦æ›´æ–°ç”¨æˆ·æ¥å£çŠ¶æ€</span></span><br><span class="line">        <span class="keyword">if</span> (userInterfaceInfo.getTotalNum() == userInterfaceInfo.getInvokeNum()) &#123;</span><br><span class="line">            userInterfaceInfo.setStatus(<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æ›´æ–°æ•°æ®åº“ å°†è°ƒç”¨æ¬¡æ•° + 1 åŒæ—¶çŠ¶æ€æ”¹å˜æ—¶æ›´æ–°çŠ¶æ€</span></span><br><span class="line">        <span class="keyword">return</span> userInterfaceInfoMapper.updateById(userInterfaceInfo) == <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®ak,skè·å¾—ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> accessKey</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">getInvokeUser</span><span class="params">(String accessKey)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isAnyBlank(accessKey)) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BusinessException</span>(ErrorCode.PARAMS_ERROR);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">QueryWrapper</span> <span class="variable">queryWrapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>();</span><br><span class="line">        queryWrapper.eq(<span class="string">&quot;accessKey&quot;</span>, accessKey);</span><br><span class="line">        <span class="keyword">return</span> userMapper.selectOne(queryWrapper);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®è·¯å¾„å’Œæ–¹æ³•è·å¾—æ¥å£ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> url</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> method</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> InterfaceInfo <span class="title function_">getInterfaceInfo</span><span class="params">(String url, String method)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isAnyBlank(url, method)) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BusinessException</span>(ErrorCode.PARAMS_ERROR);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">QueryWrapper</span> <span class="variable">queryWrapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>();</span><br><span class="line">        queryWrapper.eq(<span class="string">&quot;url&quot;</span>, url);</span><br><span class="line">        queryWrapper.eq(<span class="string">&quot;method&quot;</span>, method);</span><br><span class="line">        <span class="keyword">return</span> interfaceInfoMapper.selectOne(queryWrapper);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ğŸ”—-ç½‘å…³è°ƒç”¨"><a href="#ğŸ”—-ç½‘å…³è°ƒç”¨" class="headerlink" title="ğŸ”— ç½‘å…³è°ƒç”¨"></a>ğŸ”— ç½‘å…³è°ƒç”¨</h2><blockquote><p>å¯åŠ¨ç±»ä¸Šè¦åŠ <code>@EnableDubbo</code>æ³¨è§£</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ³¨å…¥å…¬å…±æœåŠ¡æ¥å£</span></span><br><span class="line"><span class="meta">@DubboReference</span></span><br><span class="line"><span class="keyword">private</span> DemoService demoService;</span><br><span class="line"></span><br><span class="line">...è°ƒç”¨æä¾›çš„æ–¹æ³•</span><br></pre></td></tr></table></figure><h1 id="ç½‘å…³æ¨¡å—å¼€å‘"><a href="#ç½‘å…³æ¨¡å—å¼€å‘" class="headerlink" title="ç½‘å…³æ¨¡å—å¼€å‘"></a>ç½‘å…³æ¨¡å—å¼€å‘</h1><blockquote><p>æ¨¡å—: api-gateway</p><p>ç›®çš„: åˆ©ç”¨ç½‘å…³å®ç°ç»Ÿä¸€å¤„ç†ä¸åŒé¡¹ç›®ä¸åŒè¯·æ±‚çš„ç»Ÿä¸€æ“ä½œ</p><p>åŠŸèƒ½: å®ç°è·¯ç”±è½¬å‘, é»‘ç™½åå•, æ‰“å°æ—¥å¿—, è¿›è¡Œç”¨æˆ·é‰´æƒ, æµé‡æŸ“è‰², ç»Ÿè®¡è°ƒç”¨æ¬¡æ•°ç­‰åŠŸèƒ½</p><p>å®ç°æ–¹æ³•: åˆ©ç”¨ Spring Cloud Gateway + Dubbo + Nacoså®ç°ç½‘å…³åŠŸèƒ½</p></blockquote><p>ğŸ”— é…ç½®ä¿¡æ¯</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="comment"># è·¯ç”±è½¬å‘: å‰ç½®åŒ¹é…æ–­è¨€</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">api_route</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">http://localhost:8102</span></span><br><span class="line">          <span class="attr">predicates:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Path=/api/**</span></span><br><span class="line">      <span class="attr">default-filters:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">AddResponseHeader=source,</span> <span class="string">gbbdxstx</span></span><br><span class="line"><span class="attr">dubbo:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">dubbo-springboot-demo-consumer</span></span><br><span class="line">    <span class="attr">logger:</span> <span class="string">slf4j</span></span><br><span class="line">    <span class="attr">qos-port:</span> <span class="number">33333</span></span><br><span class="line">  <span class="attr">registry:</span></span><br><span class="line">    <span class="attr">address:</span> <span class="string">nacos://$&#123;nacos.address:127.0.0.1&#125;:8848?username=nacos&amp;password=nacos</span></span><br><span class="line">    <span class="attr">cache-file:</span> <span class="string">D:/software/nacos/.mapping.dubbo.cache</span></span><br></pre></td></tr></table></figure><p>ğŸ”— å…¨å±€è¯·æ±‚è¿‡æ»¤å™¨</p><blockquote><p>ä¸šåŠ¡é€»è¾‘: </p><pre><code>- ç”¨æˆ·å‘é€è¯·æ±‚è½¬å‘åˆ° API ç½‘å…³- è¯·æ±‚æ—¥å¿—- é»‘ç™½åå•- ç”¨æˆ·é‰´æƒï¼ˆåˆ¤æ–­ accessKey, secretKey æ˜¯å¦åˆæ³•ï¼‰- åˆ¤æ–­è¯·æ±‚çš„æ¨¡æ‹Ÿæ¥å£æ˜¯å¦å­˜åœ¨- **è¯·æ±‚è½¬å‘ï¼Œè°ƒç”¨æ¨¡æ‹Ÿæ¥å£**- å“åº”æ—¥å¿—- è°ƒç”¨æˆåŠŸï¼Œæ¬¡æ•° + 1- è°ƒç”¨å¤±è´¥ï¼Œè¿”å›ä¸€ä¸ªè§„èŒƒçš„é”™è¯¯ç </code></pre></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å…¨å±€è¯·æ±‚è¿‡æ»¤å™¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CustomGlobalFilter</span> <span class="keyword">implements</span> <span class="title class_">GlobalFilter</span>, Ordered &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@DubboReference</span></span><br><span class="line">    <span class="keyword">private</span> DemoService demoService;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> List&lt;String&gt; IP_WHITE_LIST = Arrays.asList(<span class="string">&quot;0:0:0:0:0:0:0:1&quot;</span>, <span class="string">&quot;127.0.0.1&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Mono&lt;Void&gt; <span class="title function_">filter</span><span class="params">(ServerWebExchange exchange, GatewayFilterChain chain)</span> &#123;</span><br><span class="line">        <span class="comment">// 1.è¯·æ±‚æ—¥å¿—</span></span><br><span class="line">        <span class="type">ServerHttpRequest</span> <span class="variable">request</span> <span class="operator">=</span> exchange.getRequest();</span><br><span class="line">        <span class="comment">// è·å¾—è¯·æ±‚åˆ°ç½‘å…³çš„å®Œæ•´urlä¿¡æ¯</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">originUrl</span> <span class="operator">=</span> request.getURI().toString();</span><br><span class="line">        <span class="comment">// è·å¾—ç½‘å…³è½¬å‘åçš„è·¯ç”±ä¿¡æ¯</span></span><br><span class="line">        <span class="type">Route</span> <span class="variable">route</span> <span class="operator">=</span> exchange.getAttribute(ServerWebExchangeUtils.GATEWAY_ROUTE_ATTR);</span><br><span class="line">        <span class="type">String</span> <span class="variable">urlBefore</span> <span class="operator">=</span> route.getUri().toString();</span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> urlBefore +  request.getPath().value();</span><br><span class="line">        <span class="type">String</span> <span class="variable">method</span> <span class="operator">=</span> request.getMethod().toString();</span><br><span class="line">        log.info(<span class="string">&quot;è¯·æ±‚å”¯ä¸€æ ‡è¯†: &#123;&#125;&quot;</span>, request.getId());</span><br><span class="line">        log.info(<span class="string">&quot;è¯·æ±‚è·¯å¾„: &#123;&#125;&quot;</span>, url);</span><br><span class="line">        log.info(<span class="string">&quot;è¯·æ±‚æ–¹æ³•: &#123;&#125;&quot;</span>, method);</span><br><span class="line">        log.info(<span class="string">&quot;è¯·æ±‚å‚æ•°: &#123;&#125;&quot;</span>, request.getQueryParams());</span><br><span class="line">        <span class="type">String</span> <span class="variable">sourceAddress</span> <span class="operator">=</span> request.getLocalAddress().getHostString();</span><br><span class="line">        log.info(<span class="string">&quot;è¯·æ±‚æ¥æºåœ°å€: &#123;&#125;&quot;</span>, sourceAddress);</span><br><span class="line">        <span class="type">ServerHttpResponse</span> <span class="variable">response</span> <span class="operator">=</span> exchange.getResponse();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.é»‘ç™½åå•</span></span><br><span class="line">        <span class="keyword">if</span> (!IP_WHITE_LIST.contains(sourceAddress)) &#123;</span><br><span class="line">            response.setStatusCode(HttpStatus.FORBIDDEN);</span><br><span class="line">            <span class="keyword">return</span> response.setComplete();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3. ç”¨æˆ·é‰´æƒ(åˆ¤æ–­ ak,sk æ˜¯å¦åˆæ³•)</span></span><br><span class="line">        <span class="type">HttpHeaders</span> <span class="variable">headers</span> <span class="operator">=</span> request.getHeaders();</span><br><span class="line">        <span class="type">String</span> <span class="variable">accessKey</span> <span class="operator">=</span> headers.getFirst(<span class="string">&quot;accessKey&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">nonce</span> <span class="operator">=</span> headers.getFirst(<span class="string">&quot;nonce&quot;</span>);</span><br><span class="line">        <span class="comment">// è¯·æ±‚ä½“</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">encodedBody</span> <span class="operator">=</span> headers.getFirst(<span class="string">&quot;body&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">body</span> <span class="operator">=</span> URLDecoder.decode(encodedBody, StandardCharsets.UTF_8);</span><br><span class="line">        <span class="type">String</span> <span class="variable">timestamp</span> <span class="operator">=</span> headers.getFirst(<span class="string">&quot;timestamp&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">sign</span> <span class="operator">=</span> headers.getFirst(<span class="string">&quot;sign&quot;</span>); <span class="comment">// ç”¨æˆ·ä¼ è¿‡æ¥çš„å¯†é’¥</span></span><br><span class="line">        <span class="comment">// å®é™…æƒ…å†µå»æ•°æ®åº“ä¸­æŸ¥è¯¢æ˜¯å¦åˆ†é…ç»™ç”¨æˆ·</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">invokeUser</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            invokeUser = demoService.getInvokeUser(accessKey);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            log.error(<span class="string">&quot;getInvokeUser error&quot;</span>, e);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (invokeUser == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> handleNoAuth(response);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// todo éšæœºæ•°nonce åˆ©ç”¨hashmapæˆ–rediså­˜è¿›è¡Œæ ¡éªŒ</span></span><br><span class="line">        <span class="keyword">if</span> (Long.parseLong(nonce) &gt; <span class="number">10000L</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> handleNoAuth(response);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// todo æ—¶é—´å’Œå½“å‰æ—¶é—´ä¸èƒ½è¶…è¿‡ 5 åˆ†é’Ÿ</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">currentTime</span> <span class="operator">=</span> System.currentTimeMillis() / <span class="number">1000</span>;</span><br><span class="line">        <span class="keyword">final</span> <span class="type">long</span> <span class="variable">FIVE_MINUTES</span> <span class="operator">=</span> <span class="number">60</span> * <span class="number">5L</span>;</span><br><span class="line">        <span class="keyword">if</span> (currentTime - Long.parseLong(timestamp) &gt; FIVE_MINUTES) &#123;</span><br><span class="line">            <span class="keyword">return</span> handleNoAuth(response);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å°†åˆ†é…ç»™ç”¨æˆ·çš„secretKeyä»æ•°æ®åº“æŸ¥å‡ºæ¥ç”¨äºç”Ÿæˆsign</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">secretKey</span> <span class="operator">=</span> invokeUser.getSecretKey();</span><br><span class="line">        <span class="type">String</span> <span class="variable">serverSign</span> <span class="operator">=</span> SignUtil.getSign(body, secretKey);</span><br><span class="line">        <span class="keyword">if</span> (sign == <span class="literal">null</span> || !sign.equals(serverSign)) &#123;</span><br><span class="line">            <span class="keyword">return</span> handleNoAuth(response);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// åˆ¤æ–­è¯·æ±‚çš„æ¨¡æ‹Ÿæ¥å£æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">        <span class="type">InterfaceInfo</span> <span class="variable">interfaceInfo</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            interfaceInfo = demoService.getInterfaceInfo(url, method);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            log.error(<span class="string">&quot;getInterfaceInfo error&quot;</span>, e);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (interfaceInfo == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> handleNoAuth(response);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4. å°†ç½‘å…³ä¿¡æ¯åŠ å…¥è¯·æ±‚å¤´ä¸­</span></span><br><span class="line">        <span class="type">ServerHttpRequest</span> <span class="variable">mutatedRequest</span> <span class="operator">=</span> request.mutate()</span><br><span class="line">            .header(<span class="string">&quot;Gateway-Flag&quot;</span>, <span class="string">&quot;gbbdxstx&quot;</span>).build();</span><br><span class="line">        <span class="type">ServerWebExchange</span> <span class="variable">mutatedExchange</span> <span class="operator">=</span> exchange.mutate()</span><br><span class="line">            .request(mutatedRequest)</span><br><span class="line">            .build();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 5. è¯·æ±‚è½¬å‘, è°ƒç”¨æ¨¡æ‹Ÿæ¥å£</span></span><br><span class="line">        Mono&lt;Void&gt; filter = chain.filter(mutatedExchange);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 6. å“åº”æ—¥å¿— Monoæ˜¯å¼‚æ­¥ç¼–ç¨‹ å› æ­¤ä¸Šé¢ä»£ç è°ƒç”¨æ¨¡æ‹Ÿæ¥å£ä¼šåœ¨å…¨å±€è¿‡æ»¤å™¨æ‰§è¡Œå®Œæ¯•åæ‰§è¡Œ(æ˜“å‡ºç°æ¬¡æ•°å¢åŠ ä½†è°ƒç”¨æ¥å£å¤±è´¥çš„è¯·æ±‚)</span></span><br><span class="line">        <span class="comment">// ä¸‹é¢ä»£ç å®ç°å…ˆè°ƒç”¨æ¨¡æ‹Ÿæ¥å£å†æ‰§è¡Œè°ƒç”¨æˆåŠŸæ¬¡æ•°åŠ ä¸€å’Œè¿”å›å“åº”æ—¥å¿—çš„ä»£ç </span></span><br><span class="line">        log.info(<span class="string">&quot;å“åº”: &#123;&#125;&quot;</span>, response.getStatusCode());</span><br><span class="line">        <span class="type">Long</span> <span class="variable">userId</span> <span class="operator">=</span> invokeUser.getId();</span><br><span class="line">        <span class="type">Long</span> <span class="variable">interfaceInfoId</span> <span class="operator">=</span> interfaceInfo.getId();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">DataBufferFactory</span> <span class="variable">bufferFactory</span> <span class="operator">=</span> response.bufferFactory();</span><br><span class="line">            <span class="type">HttpStatus</span> <span class="variable">statusCode</span> <span class="operator">=</span> response.getStatusCode();</span><br><span class="line">            <span class="keyword">if</span> (statusCode != HttpStatus.OK) &#123;</span><br><span class="line">                <span class="keyword">return</span> chain.filter(exchange);<span class="comment">//é™çº§å¤„ç†è¿”å›æ•°æ®</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">ServerHttpResponseDecorator</span> <span class="variable">decoratedResponse</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServerHttpResponseDecorator</span>(response) &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="keyword">public</span> Mono&lt;Void&gt; <span class="title function_">writeWith</span><span class="params">(Publisher&lt;? extends DataBuffer&gt; body)</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (body <span class="keyword">instanceof</span> Flux) &#123;</span><br><span class="line">                        Flux&lt;? <span class="keyword">extends</span> <span class="title class_">DataBuffer</span>&gt; fluxBody = Flux.from(body);</span><br><span class="line"></span><br><span class="line">                        <span class="keyword">return</span> <span class="built_in">super</span>.writeWith(fluxBody.buffer().map(dataBuffers -&gt; &#123;</span><br><span class="line">                            <span class="comment">// 7. è°ƒç”¨æˆåŠŸ, è°ƒç”¨æ¬¡æ•°åŠ 1</span></span><br><span class="line">                            <span class="keyword">try</span> &#123;</span><br><span class="line">                                demoService.invokeCount(userId, interfaceInfoId);</span><br><span class="line">                            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                                log.error(<span class="string">&quot;invokeCount error&quot;</span>, e);</span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="comment">// åˆå¹¶å¤šä¸ªæµé›†åˆï¼Œè§£å†³è¿”å›ä½“åˆ†æ®µä¼ è¾“</span></span><br><span class="line">                            <span class="type">DataBufferFactory</span> <span class="variable">dataBufferFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DefaultDataBufferFactory</span>();</span><br><span class="line">                            <span class="type">DataBuffer</span> <span class="variable">buff</span> <span class="operator">=</span> dataBufferFactory.join(dataBuffers);</span><br><span class="line">                            <span class="type">byte</span>[] content = <span class="keyword">new</span> <span class="title class_">byte</span>[buff.readableByteCount()];</span><br><span class="line">                            buff.read(content);</span><br><span class="line">                            DataBufferUtils.release(buff);<span class="comment">//é‡Šæ”¾æ‰å†…å­˜</span></span><br><span class="line"></span><br><span class="line">                            <span class="comment">// æ„å»ºè¿”å›æ—¥å¿—</span></span><br><span class="line">                            <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(content);</span><br><span class="line">                            List&lt;Object&gt; rspArgs = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">                            rspArgs.add(response.getStatusCode().value());</span><br><span class="line">                            rspArgs.add(exchange.getRequest().getURI());</span><br><span class="line">                            rspArgs.add(result);</span><br><span class="line">                            log.info(<span class="string">&quot;å“åº”ç»“æœ: &lt;-- &#123;&#125; &#123;&#125;\n&#123;&#125;&quot;</span>, rspArgs.toArray());</span><br><span class="line"></span><br><span class="line">                            getDelegate().getHeaders().setContentLength(result.getBytes().length);</span><br><span class="line">                            <span class="keyword">return</span> bufferFactory.wrap(result.getBytes());</span><br><span class="line">                        &#125;));</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="comment">// 8. è°ƒç”¨å¤±è´¥, è¿”å›ä¸€ä¸ªæ ‡å‡†çš„é”™è¯¯ç </span></span><br><span class="line">                        handleInvokeError(response);</span><br><span class="line">                        log.error(<span class="string">&quot;&lt;-- &#123;&#125; å“åº”codeå¼‚å¸¸&quot;</span>, getStatusCode());</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">return</span> <span class="built_in">super</span>.writeWith(body);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line">            <span class="keyword">return</span> chain.filter(exchange.mutate().response(decoratedResponse).build());</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            log.error(<span class="string">&quot;ç½‘å…³å¤„ç†å“åº”å¼‚å¸¸&quot;</span> + e);</span><br><span class="line">            <span class="keyword">return</span> chain.filter(exchange);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getOrder</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Mono&lt;Void&gt; <span class="title function_">handleNoAuth</span><span class="params">(ServerHttpResponse response)</span> &#123;</span><br><span class="line">        response.setStatusCode(HttpStatus.FORBIDDEN);</span><br><span class="line">        <span class="keyword">return</span> response.setComplete();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Mono&lt;Void&gt; <span class="title function_">handleInvokeError</span><span class="params">(ServerHttpResponse response)</span> &#123;</span><br><span class="line">        response.setStatusCode(HttpStatus.INTERNAL_SERVER_ERROR);</span><br><span class="line">        <span class="keyword">return</span> response.setComplete();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”å¾…è¡¥å……</p><h1 id="æ¥å£æµ‹è¯•è°ƒç”¨æµç¨‹"><a href="#æ¥å£æµ‹è¯•è°ƒç”¨æµç¨‹" class="headerlink" title="æ¥å£æµ‹è¯•è°ƒç”¨æµç¨‹"></a>æ¥å£æµ‹è¯•è°ƒç”¨æµç¨‹</h1><ol><li>å‰ç«¯å°†ç”¨æˆ·è¾“å…¥çš„è¯·æ±‚å‚æ•°å’Œè¦æµ‹è¯•çš„æ¥å£idä¼ åˆ°åç«¯</li><li>åç«¯å¯¹ä¿¡æ¯è¿›è¡Œæ ¡éªŒ</li><li>æ ¡éªŒæˆåŠŸåè°ƒç”¨æ¨¡æ‹Ÿæ¥å£</li></ol><h1 id="å‰ç«¯é—®é¢˜è§£å†³"><a href="#å‰ç«¯é—®é¢˜è§£å†³" class="headerlink" title="å‰ç«¯é—®é¢˜è§£å†³"></a>å‰ç«¯é—®é¢˜è§£å†³</h1><h2 id="layout-max-ä½†ä¸ç”Ÿæ•ˆ"><a href="#layout-max-ä½†ä¸ç”Ÿæ•ˆ" class="headerlink" title="layout = &#39;max&#39;ä½†ä¸ç”Ÿæ•ˆ"></a><code>layout = &#39;max&#39;</code>ä½†ä¸ç”Ÿæ•ˆ</h2><blockquote><p>app.tstæ–‡ä»¶ä¸­è·å–å…¨å±€é»˜è®¤è®¾ç½®</p></blockquote><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å½“æ¯ä¸ªé¡µé¢é¦–æ¬¡åŠ è½½æ—¶, è·å–è¦å…¨å±€ä¿å­˜çš„æ•°æ®, æ¯”å¦‚ç”¨æˆ·ç™»å½•ä¿¡æ¯å’Œå…¨å±€é»˜è®¤è®¾ç½®</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">state</span>: <span class="title class_">InitialState</span> = &#123;</span><br><span class="line"><span class="attr">loginUser</span>: <span class="literal">undefined</span>,</span><br><span class="line"><span class="attr">settings</span>: defaultSettings,  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ¨returnä¸­å±•å¼€è®¾ç½®</span></span><br><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line">    ...initialState?.<span class="property">settings</span>,  <span class="comment">// å±•å¼€ initialState ä¸­çš„è®¾ç½®</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Project </category>
          
      </categories>
      
      
        <tags>
            
            <tag> API </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢å‘å¯¹è±¡</title>
      <link href="/JavaSE/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"/>
      <url>/JavaSE/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/</url>
      
        <content type="html"><![CDATA[<h1 id="ç±»å’Œå¯¹è±¡"><a href="#ç±»å’Œå¯¹è±¡" class="headerlink" title="ç±»å’Œå¯¹è±¡"></a>ç±»å’Œå¯¹è±¡</h1><h2 id="ç±»çš„å®šä¹‰"><a href="#ç±»çš„å®šä¹‰" class="headerlink" title="ç±»çš„å®šä¹‰"></a>ç±»çš„å®šä¹‰</h2><p>ç±»çš„ç»„æˆæ˜¯ç”±å±æ€§å’Œè¡Œä¸ºä¸¤éƒ¨åˆ†ç»„æˆ</p><ul><li><p>å±æ€§ï¼šåœ¨ç±»ä¸­é€šè¿‡æˆå‘˜å˜é‡æ¥ä½“ç°ï¼ˆç±»ä¸­æ–¹æ³•å¤–çš„å˜é‡ï¼‰</p></li><li><p>è¡Œä¸ºï¼šåœ¨ç±»ä¸­é€šè¿‡æˆå‘˜æ–¹æ³•æ¥ä½“ç°ï¼ˆå’Œå‰é¢çš„æ–¹æ³•ç›¸æ¯”å»æ‰staticå…³é”®å­—å³å¯ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> ç±»å&#123;</span><br><span class="line">    <span class="comment">//æˆå‘˜å˜é‡</span></span><br><span class="line">    <span class="comment">//æˆå‘˜æ–¹æ³•</span></span><br><span class="line">    <span class="comment">//æ„é€ å™¨(å¯é€‰)</span></span><br><span class="line">    <span class="comment">//ä»£ç å—(å¯é€‰)</span></span><br><span class="line">    <span class="comment">//å†…éƒ¨ç±»(å¯é€‰)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="å¯¹è±¡çš„ä½¿ç”¨"><a href="#å¯¹è±¡çš„ä½¿ç”¨" class="headerlink" title="å¯¹è±¡çš„ä½¿ç”¨"></a>å¯¹è±¡çš„ä½¿ç”¨</h2><ul><li>åˆ›å»ºå¯¹è±¡çš„æ ¼å¼ï¼š<ul><li>ç±»å å¯¹è±¡å &#x3D; new ç±»å();</li></ul></li><li>è°ƒç”¨æˆå‘˜çš„æ ¼å¼ï¼š<ul><li><code>å¯¹è±¡å.æˆå‘˜å˜é‡</code></li><li><code>å¯¹è±¡å.æˆå‘˜æ–¹æ³•();</code></li></ul></li></ul><h2 id="å·¥å…·ç±»"><a href="#å·¥å…·ç±»" class="headerlink" title="å·¥å…·ç±»"></a>å·¥å…·ç±»</h2><ul><li>å¸®åŠ©æˆ‘ä»¬åšä¸€äº›äº‹æƒ…ï¼Œä½†ä¸æè¿°ä»»ä½•äº‹ç‰©çš„ç±»</li></ul><h3 id="ç§æœ‰åŒ–æ„é€ æ–¹æ³•"><a href="#ç§æœ‰åŒ–æ„é€ æ–¹æ³•" class="headerlink" title="ç§æœ‰åŒ–æ„é€ æ–¹æ³•"></a>ç§æœ‰åŒ–æ„é€ æ–¹æ³•</h3><ul><li><p>å¤–ç•Œä¸å¯ä»¥åˆ›å»ºæ­¤ç±»çš„å¯¹è±¡ï¼Œå› ä¸ºè¿™ä¸ªç±»ä¸æè¿°ä»»ä½•äº‹ç‰©ï¼Œå› æ­¤åˆ›å»ºè¿™ä¸ªç±»çš„å¯¹è±¡æ²¡æœ‰æ„ä¹‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">class</span> <span class="title class_">Math</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Math</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="æ–¹æ³•å®šä¹‰ä¸ºé™æ€"><a href="#æ–¹æ³•å®šä¹‰ä¸ºé™æ€" class="headerlink" title="æ–¹æ³•å®šä¹‰ä¸ºé™æ€"></a>æ–¹æ³•å®šä¹‰ä¸ºé™æ€</h3><ul><li>å› ä¸ºå¤–ç•Œä¸å¯ä»¥åˆ›å»ºæ­¤ç±»å¯¹è±¡ï¼Œå› æ­¤éœ€è¦å°†æ–¹æ³•å…¨éƒ¨å®šä¹‰ä¸ºé™æ€ï¼Œä»¥ä¾›ä½¿ç”¨</li></ul><h1 id="å°è£…"><a href="#å°è£…" class="headerlink" title="å°è£…"></a>å°è£…</h1><h2 id="å°è£…æ€æƒ³"><a href="#å°è£…æ€æƒ³" class="headerlink" title="å°è£…æ€æƒ³"></a>å°è£…æ€æƒ³</h2><ul><li><p>å¯¹è±¡ä»£è¡¨ä»€ä¹ˆï¼Œå°±å¾—å°è£…å¯¹åº”çš„æ•°æ®ï¼Œå¹¶æä¾›æ•°æ®å¯¹åº”çš„è¡Œä¸ºã€‚egï¼šäººç”»åœ†ï¼Œç”»åœ†è¿™ç§è¡Œä¸ºåº”å®šä¹‰åœ¨åœ†ä¸­</p></li><li><p>å°è£…ä»£ç å®ç°ï¼š</p><p>å°†ç±»çš„æŸäº›ä¿¡æ¯éšè—åœ¨ç±»å†…éƒ¨ï¼Œä¸å…è®¸å¤–éƒ¨ç¨‹åºç›´æ¥è®¿é—®ï¼Œè€Œæ˜¯é€šè¿‡è¯¥ç±»æä¾›çš„æ–¹æ³•æ¥å®ç°å¯¹éšè—ä¿¡æ¯çš„æ“ä½œå’Œè®¿é—®<br>æˆå‘˜å˜é‡privateï¼Œæä¾›å¯¹åº”çš„getXxx()&#x2F;setXxx()æ–¹æ³•</p></li></ul><h2 id="private"><a href="#private" class="headerlink" title="private"></a>private</h2><p>privateæ˜¯ä¸€ä¸ªä¿®é¥°ç¬¦ï¼Œå¯ä»¥ç”¨æ¥ä¿®é¥°æˆå‘˜ï¼ˆæˆå‘˜å˜é‡ï¼Œæˆå‘˜æ–¹æ³•ï¼‰</p><ul><li>è¢«privateä¿®é¥°çš„æˆå‘˜ï¼Œåªèƒ½åœ¨æœ¬ç±»è¿›è¡Œè®¿é—®ï¼Œé’ˆå¯¹privateä¿®é¥°çš„æˆå‘˜å˜é‡ï¼Œå¦‚æœéœ€è¦è¢«å…¶ä»–ç±»ä½¿ç”¨ï¼Œæä¾›ç›¸åº”çš„æ“ä½œ<ul><li>æä¾›â€œgetå˜é‡å()â€æ–¹æ³•ï¼Œç”¨äºè·å–æˆå‘˜å˜é‡çš„å€¼ï¼Œæ–¹æ³•ç”¨publicä¿®é¥°</li><li>æä¾›â€œsetå˜é‡å(å‚æ•°)â€æ–¹æ³•ï¼Œç”¨äºè®¾ç½®æˆå‘˜å˜é‡çš„å€¼ï¼Œæ–¹æ³•ç”¨publicä¿®é¥°</li></ul></li></ul><h2 id="æˆå‘˜å˜é‡-å±€éƒ¨å˜é‡-this"><a href="#æˆå‘˜å˜é‡-å±€éƒ¨å˜é‡-this" class="headerlink" title="æˆå‘˜å˜é‡|å±€éƒ¨å˜é‡|this"></a>æˆå‘˜å˜é‡|å±€éƒ¨å˜é‡|this</h2><p>æˆå‘˜å˜é‡:ç›´æ¥å®šä¹‰åœ¨ç±»ä¸­</p><p>å±€éƒ¨å˜é‡:åœ¨ç±»çš„æŸä¸ªæ–¹æ³•ä¸­å®šä¹‰çš„å˜é‡</p><p>thisä¿®é¥°çš„å˜é‡ç”¨äºæŒ‡ä»£æˆå‘˜å˜é‡ï¼Œå…¶ä¸»è¦ä½œç”¨æ˜¯ï¼ˆåŒºåˆ†å±€éƒ¨å˜é‡å’Œæˆå‘˜å˜é‡çš„é‡åé—®é¢˜ï¼‰</p><ul><li>thisï¼šä»£è¡¨æ–¹æ³•è°ƒç”¨è€…çš„åœ°å€å€¼</li><li>æ–¹æ³•çš„å½¢å‚å¦‚æœä¸æˆå‘˜å˜é‡åŒåï¼Œä¸å¸¦thisä¿®é¥°çš„å˜é‡æŒ‡çš„æ˜¯å½¢å‚ï¼Œè€Œä¸æ˜¯æˆå‘˜å˜é‡</li><li>æ–¹æ³•çš„å½¢å‚æ²¡æœ‰ä¸æˆå‘˜å˜é‡åŒåï¼Œä¸å¸¦thisä¿®é¥°çš„å˜é‡æŒ‡çš„æ˜¯æˆå‘˜å˜é‡</li></ul><h2 id="æ„é€ æ–¹æ³•"><a href="#æ„é€ æ–¹æ³•" class="headerlink" title="æ„é€ æ–¹æ³•"></a>æ„é€ æ–¹æ³•</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ ¼å¼</span></span><br><span class="line"><span class="comment">//åŠŸèƒ½ï¼šå®Œæˆå¯¹è±¡æ•°æ®çš„åˆå§‹åŒ–</span></span><br><span class="line"><span class="keyword">public</span> class ç±»å&#123;</span><br><span class="line">    ä¿®é¥°ç¬¦ ç±»å(å‚æ•°)&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æ„é€ æ–¹æ³•çš„åˆ›å»º</li></ul><p>å¦‚æœæ²¡æœ‰å®šä¹‰æ„é€ æ–¹æ³•ï¼Œç³»ç»Ÿå°†ç»™å‡ºä¸€ä¸ªé»˜è®¤çš„æ— å‚æ•°æ„é€ æ–¹æ³•<br>å¦‚æœå®šä¹‰äº†æ„é€ æ–¹æ³•ï¼Œç³»ç»Ÿå°†ä¸å†æä¾›é»˜è®¤çš„æ„é€ æ–¹æ³•</p><ul><li>æ„é€ æ–¹æ³•çš„é‡è½½</li></ul><p>å¦‚æœè‡ªå®šä¹‰äº†å¸¦å‚æ„é€ æ–¹æ³•ï¼Œè¿˜è¦ä½¿ç”¨æ— å‚æ•°æ„é€ æ–¹æ³•ï¼Œå°±<u>å¿…é¡»å†å†™ä¸€ä¸ªæ— å‚æ•°æ„é€ æ–¹æ³•</u></p><h1 id="staticå…³é”®å­—"><a href="#staticå…³é”®å­—" class="headerlink" title="staticå…³é”®å­—"></a>staticå…³é”®å­—</h1><ul><li>staticè¡¨ç¤ºé™æ€ï¼Œæ˜¯Javaä¸­çš„ä¸€ä¸ªä¿®é¥°ç¬¦ï¼Œå¯ä»¥ä¿®é¥°æˆå‘˜æ–¹æ³•ï¼Œæˆå‘˜å˜é‡</li><li>è¢«staticä¿®é¥°çš„æˆå‘˜å˜é‡&#x2F;æ–¹æ³•ï¼Œå«åšé™æ€å˜é‡&#x2F;æ–¹æ³•</li></ul><h2 id="é™æ€å˜é‡"><a href="#é™æ€å˜é‡" class="headerlink" title="é™æ€å˜é‡"></a>é™æ€å˜é‡</h2><h3 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h3><ul><li>è¢«è¯¥ç±»æ‰€æœ‰å¯¹è±¡æ‰€å…±äº«ï¼Œå³å½“æ‰€ç”¨å¯¹è±¡çš„æ­¤å˜é‡çš†ç›¸åŒæ—¶ï¼Œä½¿ç”¨staticä¿®é¥°æ­¤æˆå‘˜å˜é‡</li><li>ä¸å±äºå¯¹è±¡ï¼Œå±äºç±»</li><li>éšç€ç±»çš„åŠ è½½è€Œè¢«åŠ è½½åˆ°é™æ€åŒºä¸­ï¼Œä¼˜å…ˆäºå¯¹è±¡å­˜åœ¨</li></ul><h3 id="è®¿é—®"><a href="#è®¿é—®" class="headerlink" title="è®¿é—®"></a>è®¿é—®</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ–¹æ³•1(æ¨è)</span></span><br><span class="line">ç±»å.é™æ€å˜é‡;</span><br><span class="line"><span class="comment">//æ–¹æ³•2</span></span><br><span class="line">å¯¹è±¡åè°ƒç”¨</span><br></pre></td></tr></table></figure><h2 id="é™æ€æ–¹æ³•"><a href="#é™æ€æ–¹æ³•" class="headerlink" title="é™æ€æ–¹æ³•"></a>é™æ€æ–¹æ³•</h2><h3 id="ç‰¹ç‚¹-1"><a href="#ç‰¹ç‚¹-1" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h3><ul><li>å¤šç”¨åœ¨æµ‹è¯•ç±»å’Œå·¥å…·ç±»ä¸­</li><li>javabeanç±»ä¸­å¾ˆå°‘ä½¿ç”¨</li></ul><h3 id="è®¿é—®-1"><a href="#è®¿é—®-1" class="headerlink" title="è®¿é—®"></a>è®¿é—®</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ–¹æ³•1(æ¨è)</span></span><br><span class="line">ç±»å.é™æ€æ–¹æ³•();</span><br><span class="line"><span class="comment">//æ–¹æ³•2</span></span><br><span class="line">å¯¹è±¡åè°ƒç”¨</span><br></pre></td></tr></table></figure><h2 id="staticæ³¨æ„äº‹é¡¹"><a href="#staticæ³¨æ„äº‹é¡¹" class="headerlink" title="staticæ³¨æ„äº‹é¡¹"></a>staticæ³¨æ„äº‹é¡¹</h2><ul><li><p>é™æ€æ–¹æ³•åªèƒ½è®¿é—®é™æ€å˜é‡å’Œé™æ€æ–¹æ³•</p><p>â€‹é™æ€éšç±»çš„åŠ è½½è€ŒåŠ è½½ï¼Œåœ¨å¯¹è±¡ä¹‹å‰ä¾¿å­˜åœ¨ï¼Œæ•…ä¸å¯ä»¥è®¿é—®éé™æ€çš„ä¸œè¥¿</p><p>â€‹å› æ­¤æµ‹è¯•ç±»ä¸­<code>Main()</code>æ–¹æ³•å¤–çš„å…¶ä»–æ–¹æ³•ä¹Ÿå¿…é¡»è¢«staticä¿®é¥°</p></li><li><p>éé™æ€æ–¹æ³•å¯ä»¥è®¿é—®æ‰€æœ‰å˜é‡å’Œæ–¹æ³•</p></li><li><p>é™æ€æ–¹æ³•ä¸­<u>æ²¡æœ‰thiså…³é”®å­—</u>ï¼Œä¹Ÿ<u>æ²¡æœ‰superå…³é”®å­—</u></p><p>â€‹é™æ€æ–¹æ³•ä¸å±äºå¯¹è±¡ï¼Œè€Œå±äºç±»ï¼Œä¸éœ€è¦å¯¹è±¡æ¥è°ƒç”¨ï¼Œæ•…æ²¡æœ‰thiså…³é”®å­—</p></li></ul><h1 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h1><h2 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h2><ul><li><p>ç»§æ‰¿æ˜¯é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹å¾ä¹‹ä¸€ï¼Œå¯ä»¥è®©ç±»è·Ÿç±»ä¹‹é—´äº§ç”Ÿå­çˆ¶çš„å…³ç³»ï¼Œå­ç±»å¯ä»¥è°ƒç”¨çˆ¶ç±»ä¸­çš„ä»£ç ï¼Œæé«˜å¤ç”¨æ€§</p></li><li><p>æ ¼å¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> class å­ç±» extends çˆ¶ç±» &#123;&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="ç‰¹ç‚¹-2"><a href="#ç‰¹ç‚¹-2" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h2><blockquote><p>é¡¶å±‚çˆ¶ç±»æ˜¯Objectç±»ã€‚æ‰€æœ‰çš„ç±»é»˜è®¤ç»§æ‰¿Objectï¼Œä½œä¸ºçˆ¶ç±»ã€‚</p></blockquote><ul><li><p>Javaåªæ”¯æŒå•ç»§æ‰¿ï¼Œä¸æ”¯æŒå¤šç»§æ‰¿</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä¸€ä¸ªç±»åªèƒ½æœ‰ä¸€ä¸ªç›´æ¥çˆ¶ç±»ï¼Œä¸å¯ä»¥æœ‰å¤šä¸ªç›´æ¥çˆ¶ç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> &#123;&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">C1</span> <span class="keyword">extends</span> <span class="title class_">A</span> &#123;&#125;  <span class="comment">//âˆš</span></span><br><span class="line"><span class="comment">//class C2 extends A,B &#123;&#125; //Ã—</span></span><br></pre></td></tr></table></figure></li><li><p>ä¸€ä¸ªç±»å¯ä»¥æœ‰å¤šä¸ªå­ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Aå¯ä»¥æœ‰å¤šä¸ªå­ç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">C1</span> <span class="keyword">extends</span> <span class="title class_">A</span> &#123;&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">C2</span> <span class="keyword">extends</span> <span class="title class_">B</span> &#123;&#125;</span><br></pre></td></tr></table></figure></li><li><p>å¯ä»¥å¤šå±‚ç»§æ‰¿</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">C1</span> <span class="keyword">extends</span> <span class="title class_">A</span> &#123;&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">D</span> <span class="keyword">extends</span> <span class="title class_">C1</span> &#123;&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="å­—ç±»å¯ä»¥ç»§æ‰¿çˆ¶ç±»çš„å“ªäº›å†…å®¹ï¼Ÿ"><a href="#å­—ç±»å¯ä»¥ç»§æ‰¿çˆ¶ç±»çš„å“ªäº›å†…å®¹ï¼Ÿ" class="headerlink" title="å­—ç±»å¯ä»¥ç»§æ‰¿çˆ¶ç±»çš„å“ªäº›å†…å®¹ï¼Ÿ"></a>å­—ç±»å¯ä»¥ç»§æ‰¿çˆ¶ç±»çš„å“ªäº›å†…å®¹ï¼Ÿ</h2><table><thead><tr><th align="center">å†…å®¹</th><th align="center"></th><th align="center"></th></tr></thead><tbody><tr><td align="center">æ„é€ æ–¹æ³•</td><td align="center">éç§æœ‰â€“ä¸èƒ½</td><td align="center">privateâ€“ä¸èƒ½</td></tr><tr><td align="center">æˆå‘˜å˜é‡</td><td align="center">éç§æœ‰â€“èƒ½</td><td align="center">privateâ€“èƒ½</td></tr><tr><td align="center">æˆå‘˜æ–¹æ³•</td><td align="center">è™šæ–¹æ³•â€“èƒ½</td><td align="center">å¦åˆ™â€“ä¸èƒ½</td></tr></tbody></table><p>è™šæ–¹æ³•ï¼š<code>éprivate å’Œ éstatic å’Œ éfinalä¿®é¥°çš„æ–¹æ³•</code></p><h3 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h3><ul><li>å­ç±»åªèƒ½è®¿é—®çˆ¶ç±»ä¸­çš„éç§æœ‰æˆå‘˜</li><li>å­ç±»ä¸èƒ½ç»§æ‰¿çˆ¶ç±»çš„ç§æœ‰å±æ€§ï¼Œä½†æ˜¯å¦‚æœå­ç±»ä¸­å…¬æœ‰çš„æ–¹æ³•å½±å“åˆ°äº†çˆ¶ç±»ç§æœ‰å±æ€§ï¼Œé‚£ä¹ˆç§æœ‰å±æ€§æ˜¯èƒ½å¤Ÿè¢«å­ç±»ä½¿ç”¨çš„ã€‚</li></ul><h2 id="ç»§æ‰¿åè®¿é—®ç‰¹ç‚¹"><a href="#ç»§æ‰¿åè®¿é—®ç‰¹ç‚¹" class="headerlink" title="ç»§æ‰¿åè®¿é—®ç‰¹ç‚¹"></a>ç»§æ‰¿åè®¿é—®ç‰¹ç‚¹</h2><h3 id="æˆå‘˜å˜é‡"><a href="#æˆå‘˜å˜é‡" class="headerlink" title="æˆå‘˜å˜é‡"></a>æˆå‘˜å˜é‡</h3><p>å°±è¿‘åŸåˆ™</p><ul><li><p>å…ˆåœ¨å±€éƒ¨ä½ç½®æ‰¾ï¼Œæœ¬ç±»æˆå‘˜ä½ç½®æ‰¾ï¼Œçˆ¶ç±»æˆå‘˜ä½ç½®æ‰¾ï¼Œé€çº§å¾€ä¸Š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å‡ºç°é‡åçš„æˆå‘˜å˜é‡æ€ä¹ˆåŠï¼Ÿ</span></span><br><span class="line">System.out.println(name);<span class="comment">//ä»å±€éƒ¨ä½ç½®å¼€å§‹å¾€ä¸Šæ‰¾--é€šå¸¸æŒ‡çš„æ˜¯å­ç±»æ–¹æ³•ä¸­å®šä¹‰çš„name</span></span><br><span class="line">System.out.println(<span class="built_in">this</span>.name);<span class="comment">//ä»æœ¬ç±»æˆå‘˜ä½ç½®å¼€å§‹å¾€ä¸Šæ‰¾  --é€šå¸¸æŒ‡çš„æ˜¯å­ç±»æˆå‘˜å˜é‡çš„name</span></span><br><span class="line">System.out.println(<span class="built_in">super</span>.name);<span class="comment">//ä»çˆ¶ç±»æˆå‘˜ä½ç½®å¼€å§‹å¾€ä¸Šæ‰¾    --é€šå¸¸æŒ‡çš„æ˜¯çˆ¶ç±»æˆå‘˜å˜é‡çš„name</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="æˆå‘˜æ–¹æ³•"><a href="#æˆå‘˜æ–¹æ³•" class="headerlink" title="æˆå‘˜æ–¹æ³•"></a>æˆå‘˜æ–¹æ³•</h3><ul><li>thisè°ƒç”¨ï¼šå°±è¿‘åŸåˆ™</li><li>superè°ƒç”¨ï¼šç›´æ¥æ‰¾çˆ¶ç±»</li></ul><h3 id="æ„é€ æ–¹æ³•-1"><a href="#æ„é€ æ–¹æ³•-1" class="headerlink" title="æ„é€ æ–¹æ³•"></a>æ„é€ æ–¹æ³•</h3><p>æ„é€ æ–¹æ³•çš„ä½œç”¨æ˜¯åˆå§‹åŒ–å¯¹è±¡æˆå‘˜å˜é‡æ•°æ®çš„ã€‚æ‰€ä»¥å­ç±»çš„åˆå§‹åŒ–è¿‡ç¨‹ä¸­ï¼Œå¿…é¡»å…ˆæ‰§è¡Œçˆ¶ç±»çš„åˆå§‹åŒ–åŠ¨ä½œã€‚å­ç±»çš„æ„é€ æ–¹æ³•ä¸­é»˜è®¤æœ‰ä¸€ä¸ª<code>super()</code> ï¼Œè¡¨ç¤ºè°ƒç”¨çˆ¶ç±»çš„æ„é€ æ–¹æ³•ï¼Œçˆ¶ç±»æˆå‘˜å˜é‡åˆå§‹åŒ–åï¼Œæ‰å¯ä»¥ç»™å­ç±»ä½¿ç”¨ã€‚ï¼ˆ<strong>å…ˆæœ‰çˆ¸çˆ¸ï¼Œæ‰èƒ½æœ‰å„¿å­</strong>ï¼‰</p><ul><li>å­ç±»ä¸èƒ½ç»§æ‰¿çˆ¶ç±»çš„æ„é€ æ–¹æ³•ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡superè°ƒç”¨</li><li>é»˜è®¤å…ˆè®¿é—®çˆ¶ç±»ä¸­æ— å‚çš„æ„é€ æ–¹æ³•ï¼Œå†æ‰§è¡Œè‡ªå·±</li><li>å­ç±»æ„é€ æ–¹æ³•çš„ç¬¬ä¸€è¡Œï¼Œæœ‰ä¸€ä¸ªé»˜è®¤çš„<code>super()</code>ï¼Œé»˜è®¤å…ˆè°ƒç”¨çˆ¶ç±»çš„æ— å‚æ„é€ æ–¹æ³•ï¼Œå› æ­¤<code>super()</code>å¯ä»¥çœç•¥ä¸å†™ï¼Œä½†å¦‚æœæƒ³è¦è°ƒç”¨çˆ¶ç±»æœ‰å‚æ„é€ ï¼Œå¿…é¡»åœ¨ç¬¬ä¸€è¡Œæ‰‹åŠ¨ä¹¦å†™<code>super(å‚æ•°...)</code></li></ul><h2 id="super-å’Œthis"><a href="#super-å’Œthis" class="headerlink" title="super()å’Œthis()"></a><code>super()</code>å’Œ<code>this()</code></h2><h3 id="è°ƒç”¨æ„é€ æ–¹æ³•"><a href="#è°ƒç”¨æ„é€ æ–¹æ³•" class="headerlink" title="è°ƒç”¨æ„é€ æ–¹æ³•"></a>è°ƒç”¨æ„é€ æ–¹æ³•</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">super(...) -- è°ƒç”¨çˆ¶ç±»çš„æ„é€ æ–¹æ³•ï¼Œæ ¹æ®å‚æ•°åŒ¹é…ç¡®è®¤</span><br><span class="line">this(...) -- è°ƒç”¨æœ¬ç±»çš„å…¶ä»–æ„é€ æ–¹æ³•ï¼Œæ ¹æ®å‚æ•°åŒ¹é…ç¡®è®¤</span><br></pre></td></tr></table></figure><h3 id="æ³¨æ„-1"><a href="#æ³¨æ„-1" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h3><ul><li><p>super(..)æ˜¯æ ¹æ®å‚æ•°å»ç¡®å®šè°ƒç”¨çˆ¶ç±»å“ªä¸ªæ„é€ æ–¹æ³•çš„ã€‚</p></li><li><p>super() å’Œ this() éƒ½å¿…é¡»æ˜¯åœ¨æ„é€ æ–¹æ³•çš„ç¬¬ä¸€è¡Œï¼Œæ‰€ä»¥ä¸èƒ½åŒæ—¶å‡ºç°ã€‚</p></li><li><p>å­ç±»çš„æ¯ä¸ªæ„é€ æ–¹æ³•ä¸­å‡æœ‰é»˜è®¤çš„super()ï¼Œè°ƒç”¨çˆ¶ç±»çš„ç©ºå‚æ„é€ ã€‚æ‰‹åŠ¨è°ƒç”¨çˆ¶ç±»æ„é€ ä¼šè¦†ç›–é»˜è®¤çš„super()ã€‚</p></li></ul><h2 id="æ–¹æ³•é‡å†™"><a href="#æ–¹æ³•é‡å†™" class="headerlink" title="æ–¹æ³•é‡å†™"></a>æ–¹æ³•é‡å†™</h2><h3 id="æ¦‚å¿µä¸æœ¬è´¨"><a href="#æ¦‚å¿µä¸æœ¬è´¨" class="headerlink" title="æ¦‚å¿µä¸æœ¬è´¨"></a>æ¦‚å¿µä¸æœ¬è´¨</h3><ul><li>å­ç±»ä¸­å‡ºç°ä¸çˆ¶ç±»ä¸€æ¨¡ä¸€æ ·çš„æ–¹æ³•æ—¶ï¼ˆè¿”å›å€¼ç±»å‹ï¼Œæ–¹æ³•åå’Œå‚æ•°åˆ—è¡¨éƒ½ç›¸åŒï¼‰ï¼Œä¼šå‡ºç°è¦†ç›–æ•ˆæœï¼Œä¹Ÿç§°ä¸ºé‡å†™æˆ–è€…å¤å†™ã€‚</li><li>è¦†ç›–è™šæ–¹æ³•è¡¨ä¸­çš„æ–¹æ³•ã€‚å› ä¸ºåªæœ‰å¯ä»¥æ·»åŠ åˆ°è™šæ–¹æ³•è¡¨ä¸­çš„è™šæ–¹æ³•æ‰å¯ä»¥è¢«ç»§æ‰¿</li></ul><h3 id="ä½¿ç”¨åœºæ™¯"><a href="#ä½¿ç”¨åœºæ™¯" class="headerlink" title="ä½¿ç”¨åœºæ™¯"></a>ä½¿ç”¨åœºæ™¯</h3><ul><li>å­ç±»ç»§æ‰¿äº†çˆ¶ç±»çš„æ–¹æ³•ï¼Œä½†å­ç±»è§‰å¾—çˆ¶ç±»çš„è¿™æ–¹æ³•ä¸è¶³ä»¥æ»¡è¶³è‡ªå·±çš„éœ€æ±‚ï¼Œå­ç±»ä¾¿å¯ä»¥é‡å†™äº†ä¸€ä¸ªä¸çˆ¶ç±»åŒåçš„æ–¹æ³•ã€‚</li></ul><h3 id="overrideæ³¨è§£"><a href="#overrideæ³¨è§£" class="headerlink" title="@overrideæ³¨è§£"></a>@overrideæ³¨è§£</h3><ul><li>@overrideå¯ä»¥æ ¡éªŒé‡å†™æ˜¯å¦æ­£ç¡®ï¼Œå¯è¯»æ€§æ›´å¥½</li></ul><h3 id="é‡å†™æ–¹æ³•åŸºæœ¬è¦æ±‚"><a href="#é‡å†™æ–¹æ³•åŸºæœ¬è¦æ±‚" class="headerlink" title="é‡å†™æ–¹æ³•åŸºæœ¬è¦æ±‚"></a>é‡å†™æ–¹æ³•åŸºæœ¬è¦æ±‚</h3><ul><li>å­ç±»é‡å†™çš„æ–¹æ³•å°½é‡è·Ÿçˆ¶ç±»ä¸­çš„æ–¹æ³•ä¿æŒä¸€è‡´</li><li>åªæœ‰è™šæ–¹æ³•è¡¨é‡Œé¢çš„æ–¹æ³•å¯ä»¥è¢«é‡å†™ã€‚å› ä¸ºåªæœ‰å¯ä»¥æ·»åŠ åˆ°è™šæ–¹æ³•è¡¨ä¸­çš„è™šæ–¹æ³•æ‰å¯ä»¥è¢«ç»§æ‰¿</li></ul><h1 id="å¤šæ€"><a href="#å¤šæ€" class="headerlink" title="å¤šæ€"></a>å¤šæ€</h1><h2 id="æ¦‚å¿µä¸æ³¨æ„"><a href="#æ¦‚å¿µä¸æ³¨æ„" class="headerlink" title="æ¦‚å¿µä¸æ³¨æ„"></a>æ¦‚å¿µä¸æ³¨æ„</h2><h3 id="æ¦‚å¿µ-1"><a href="#æ¦‚å¿µ-1" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h3><ul><li><p>å¤šæ€æ˜¯ç»§å°è£…å’Œç»§æ‰¿ä¹‹åï¼Œé¢å‘å¯¹è±¡çš„ç¬¬ä¸‰å¤§ç‰¹å¾</p></li><li><p>åŒç§ç±»å‹çš„å¯¹è±¡ï¼Œè¡¨ç°å‡ºçš„ä¸åŒå½¢æ€ï¼›å³é€šè¿‡çˆ¶ç±»æŒ‡å‘ä¸åŒçš„å­ç±»ï¼Œä½¿ä¼ é€’çˆ¶ç±»å¯¹è±¡åå¯ä»¥è°ƒç”¨ä¸åŒå­ç±»çš„æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ ¼å¼</span></span><br><span class="line">çˆ¶ç±»ç±»å‹ å¯¹è±¡åç§° = å­ç±»å¯¹è±¡;</span><br></pre></td></tr></table></figure></li></ul><h3 id="æ³¨æ„-2"><a href="#æ³¨æ„-2" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h3><ul><li>ä½¿ç”¨çˆ¶ç±»å‹ä½œä¸ºå‚æ•°ï¼Œå¯ä»¥æ¥æ”¶æ‰€æœ‰å­ç±»å¯¹è±¡</li><li>å½“ä¸€ä¸ªæ–¹æ³•çš„å½¢å‚æ˜¯ä¸€ä¸ªç±»ï¼Œæˆ‘ä»¬å¯ä»¥ä¼ é€’è¿™ä¸ªç±»æ‰€æœ‰çš„å­ç±»å¯¹è±¡ã€‚</li><li>å½“ä¸€ä¸ªæ–¹æ³•çš„å½¢å‚æ˜¯ä¸€ä¸ªæ¥å£ï¼Œæˆ‘ä»¬å¯ä»¥ä¼ é€’è¿™ä¸ªæ¥å£æ‰€æœ‰çš„å®ç°ç±»å¯¹è±¡ï¼ˆåé¢ä¼šå­¦ï¼‰ã€‚</li><li>è€Œä¸”å¤šæ€è¿˜å¯ä»¥æ ¹æ®ä¼ é€’çš„ä¸åŒå¯¹è±¡æ¥è°ƒç”¨ä¸åŒç±»ä¸­çš„æ–¹æ³•ã€‚</li></ul><h2 id="ä½¿ç”¨å‰æ"><a href="#ä½¿ç”¨å‰æ" class="headerlink" title="ä½¿ç”¨å‰æ"></a>ä½¿ç”¨å‰æ</h2><ul><li>æœ‰ç»§æ‰¿&#x2F;å®ç°å…³ç³»  <code>extends</code></li><li>æœ‰çˆ¶ç±»å¼•ç”¨æŒ‡å‘å­ç±»å¯¹è±¡  <code>çˆ¶ç±»ç±»å‹ å¯¹è±¡åç§° = å­ç±»å¯¹è±¡;</code></li><li>æœ‰æ–¹æ³•é‡å†™(å› ä¸ºä¸é‡å†™å¤šæ€æ²¡æ„ä¹‰)  <code>@override</code></li></ul><h2 id="å¤šæ€è¿è¡Œçš„ç‰¹ç‚¹"><a href="#å¤šæ€è¿è¡Œçš„ç‰¹ç‚¹" class="headerlink" title="å¤šæ€è¿è¡Œçš„ç‰¹ç‚¹"></a>å¤šæ€è¿è¡Œçš„ç‰¹ç‚¹</h2><h3 id="è°ƒç”¨æˆå‘˜å˜é‡"><a href="#è°ƒç”¨æˆå‘˜å˜é‡" class="headerlink" title="è°ƒç”¨æˆå‘˜å˜é‡"></a>è°ƒç”¨æˆå‘˜å˜é‡</h3><ul><li><p>ç¼–è¯‘çœ‹å·¦è¾¹ï¼Œè¿è¡Œçœ‹å·¦è¾¹</p></li><li><p><code>f</code>æ˜¯<code>Fu</code>ç±»å‹çš„ï¼Œæ‰€ä»¥é»˜è®¤ä¼šä»<code>Fu</code>è¿™ä¸ªç±»ä¸­å»æ‰¾</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Fu</span> <span class="variable">f</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Zi</span>();</span><br><span class="line"><span class="comment">//ç¼–è¯‘çœ‹å·¦è¾¹çš„çˆ¶ç±»ä¸­æœ‰æ²¡æœ‰nameè¿™ä¸ªå±æ€§ï¼Œæ²¡æœ‰å°±æŠ¥é”™</span></span><br><span class="line"><span class="comment">//åœ¨å®é™…è¿è¡Œçš„æ—¶å€™ï¼ŒæŠŠå·¦è¾¹çˆ¶ç±»nameå±æ€§çš„å€¼æ‰“å°å‡ºæ¥</span></span><br><span class="line">System.out.println(f.name);</span><br></pre></td></tr></table></figure></li></ul><h3 id="è°ƒç”¨æˆå‘˜æ–¹æ³•"><a href="#è°ƒç”¨æˆå‘˜æ–¹æ³•" class="headerlink" title="è°ƒç”¨æˆå‘˜æ–¹æ³•"></a>è°ƒç”¨æˆå‘˜æ–¹æ³•</h3><ul><li><p>ç¼–è¯‘çœ‹å·¦è¾¹ï¼Œè¿è¡Œçœ‹å³è¾¹</p></li><li><p><code>f</code>æ˜¯<code>Fu</code>ç±»å‹çš„ï¼Œæ‰€ä»¥é»˜è®¤ä¼šä»<code>Fu</code>è¿™ä¸ªç±»ä¸­å»æ‰¾ï¼Œä½†æ˜¯å¤šæ€ä½¿ç”¨æ—¶ä»£è¡¨å­ç±»å·²ç»å¯¹æ–¹æ³•è¿›è¡Œäº†é‡å†™ï¼Œé‚£ä¹ˆè™šæ–¹æ³•è¡¨ä¸­æ˜¯ä¼šæŠŠçˆ¶ç±»æ–¹æ³•è¿›è¡Œè¦†ç›–ï¼Œå› æ­¤è°ƒç”¨çš„æ˜¯å­ç±»ä¸­é‡å†™çš„æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Fu</span> <span class="variable">f</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Zi</span>();</span><br><span class="line"><span class="comment">//ç¼–è¯‘çœ‹å·¦è¾¹çš„çˆ¶ç±»ä¸­æœ‰æ²¡æœ‰showè¿™ä¸ªæ–¹æ³•ï¼Œæ²¡æœ‰å°±æŠ¥é”™</span></span><br><span class="line"><span class="comment">//åœ¨å®é™…è¿è¡Œçš„æ—¶å€™ï¼Œè¿è¡Œçš„æ˜¯å­ç±»ä¸­çš„showæ–¹æ³•</span></span><br><span class="line">f.show();</span><br></pre></td></tr></table></figure></li></ul><h2 id="å¤šæ€çš„å¼Šç«¯å’Œç±»å‹è½¬æ¢"><a href="#å¤šæ€çš„å¼Šç«¯å’Œç±»å‹è½¬æ¢" class="headerlink" title="å¤šæ€çš„å¼Šç«¯å’Œç±»å‹è½¬æ¢"></a>å¤šæ€çš„å¼Šç«¯å’Œç±»å‹è½¬æ¢</h2><h3 id="å¤šæ€çš„å¼Šç«¯"><a href="#å¤šæ€çš„å¼Šç«¯" class="headerlink" title="å¤šæ€çš„å¼Šç«¯"></a>å¤šæ€çš„å¼Šç«¯</h3><ul><li>å¤šæ€ç¼–è¯‘é˜¶æ®µæ˜¯çœ‹å·¦è¾¹çˆ¶ç±»ç±»å‹çš„ï¼Œå¦‚æœå­ç±»æœ‰äº›ç‹¬æœ‰çš„åŠŸèƒ½(æ–¹æ³•)ï¼Œæ­¤æ—¶<strong>å¤šæ€çš„å†™æ³•å°±æ— æ³•è®¿é—®å­ç±»ç‹¬æœ‰åŠŸèƒ½äº†</strong>ã€‚</li></ul><h3 id="ç±»å‹è½¬æ¢"><a href="#ç±»å‹è½¬æ¢" class="headerlink" title="ç±»å‹è½¬æ¢"></a>ç±»å‹è½¬æ¢</h3><ul><li><p>å› ä¸ºå¤šæ€çš„å¼Šç«¯ï¼Œæ‰€ä»¥æƒ³è¦è°ƒç”¨å­ç±»çš„ç‹¬æœ‰åŠŸèƒ½å¿…é¡»å‘ä¸‹è½¬å‹</p></li><li><p>å‘ä¸Šè½¬å‹ï¼ˆè‡ªåŠ¨è½¬æ¢ï¼‰  â€“  å°â€“&gt;å¤§ï¼Œè‡ªåŠ¨è½¬æ¢</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å½“çˆ¶ç±»å¼•ç”¨æŒ‡å‘ä¸€ä¸ªå­ç±»å¯¹è±¡æ—¶ï¼Œä¾¿æ˜¯å‘ä¸Šè½¬å‹ã€‚</span></span><br><span class="line">çˆ¶ç±»ç±»å‹  å˜é‡å = <span class="keyword">new</span> å­ç±»ç±»å‹();</span><br><span class="line">å¦‚ï¼š<span class="type">Animal</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cat</span>();</span><br></pre></td></tr></table></figure></li><li><p>å‘ä¸‹è½¬å‹ï¼ˆå¼ºåˆ¶è½¬æ¢ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä¸€ä¸ªå·²ç»å‘ä¸Šè½¬å‹çš„å­ç±»å¯¹è±¡ï¼Œå°†çˆ¶ç±»å¼•ç”¨è½¬ä¸ºå­ç±»å¼•ç”¨ï¼Œå¯ä»¥ä½¿ç”¨å¼ºåˆ¶ç±»å‹è½¬æ¢çš„æ ¼å¼ï¼Œä¾¿æ˜¯å‘ä¸‹è½¬å‹ã€‚</span></span><br><span class="line">å­ç±»ç±»å‹ å˜é‡å = (å­ç±»ç±»å‹) çˆ¶ç±»å˜é‡å;</span><br><span class="line">å¦‚:<span class="type">Aniaml</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cat</span>();</span><br><span class="line">   <span class="type">Cat</span> <span class="variable">c</span> <span class="operator">=</span>(Cat) a;  </span><br></pre></td></tr></table></figure></li><li><p>ç±»å‹è½¬æ¢çš„å¼‚å¸¸</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‘ä¸Šè½¬å‹  </span></span><br><span class="line"><span class="type">Animal</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cat</span>();  </span><br><span class="line">a.eat();               <span class="comment">// è°ƒç”¨çš„æ˜¯ Cat çš„ eat</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å‘ä¸‹è½¬å‹  </span></span><br><span class="line"><span class="type">Dog</span> <span class="variable">d</span> <span class="operator">=</span> (Dog)a;       </span><br><span class="line">d.watchHouse();        <span class="comment">// è°ƒç”¨çš„æ˜¯ Dog çš„ watchHouse ã€è¿è¡ŒæŠ¥é”™ã€‘</span></span><br><span class="line"><span class="comment">//æŠ¥å‡ºäº†ClassCastExceptionï¼Œç±»å‹è½¬æ¢å¼‚å¸¸ï¼è¿™æ˜¯å› ä¸ºï¼Œæ˜æ˜åˆ›å»ºäº†Catç±»å‹å¯¹è±¡ï¼Œè¿è¡Œæ—¶ï¼Œå½“ç„¶ä¸èƒ½è½¬æ¢æˆDogå¯¹è±¡çš„ã€‚</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="instanceofå…³é”®å­—"><a href="#instanceofå…³é”®å­—" class="headerlink" title="instanceofå…³é”®å­—"></a>instanceofå…³é”®å­—</h3><ul><li><p>ä¸ºäº†é¿å…ClassCastExceptionçš„å‘ç”Ÿï¼ŒJavaæä¾›äº† <code>instanceof</code> å…³é”®å­—ï¼Œç»™å¼•ç”¨å˜é‡åšç±»å‹çš„æ ¡éªŒï¼Œæ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‘ä¸‹è½¬å‹  </span></span><br><span class="line"><span class="keyword">if</span> (a <span class="keyword">instanceof</span> Cat)&#123;</span><br><span class="line">    <span class="type">Cat</span> <span class="variable">c</span> <span class="operator">=</span> (Cat)a;       </span><br><span class="line">    c.catchMouse();        <span class="comment">// è°ƒç”¨çš„æ˜¯ Cat çš„ catchMouse</span></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (a <span class="keyword">instanceof</span> Dog)&#123;</span><br><span class="line">    <span class="type">Dog</span> <span class="variable">d</span> <span class="operator">=</span> (Dog)a;       </span><br><span class="line">    d.watchHouse();       <span class="comment">// è°ƒç”¨çš„æ˜¯ Dog çš„ watchHouse</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ–°ç‰¹æ€§</span></span><br><span class="line"><span class="comment">//å…ˆåˆ¤æ–­aæ˜¯å¦ä¸ºDogç±»å‹ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™å¼ºè½¬æˆDogç±»å‹ï¼Œè½¬æ¢ä¹‹åå˜é‡åä¸ºd</span></span><br><span class="line"><span class="comment">//å¦‚æœä¸æ˜¯ï¼Œåˆ™ä¸å¼ºè½¬ï¼Œç»“æœç›´æ¥æ˜¯false</span></span><br><span class="line"><span class="keyword">if</span>(a <span class="keyword">instanceof</span> Dog d)&#123;</span><br><span class="line">    d.lookHome();</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(a <span class="keyword">instanceof</span> Cat c)&#123;</span><br><span class="line">    c.catchMouse();</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;æ²¡æœ‰è¿™ä¸ªç±»å‹ï¼Œæ— æ³•è½¬æ¢&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h1 id="åŒ…"><a href="#åŒ…" class="headerlink" title="åŒ…"></a>åŒ…</h1><ul><li>ä½¿ç”¨åŒä¸€ä¸ªåŒ…ä¸­çš„ç±»æ—¶ï¼Œä¸éœ€è¦å¯¼åŒ…</li><li>ä½¿ç”¨<code>java.lang</code>åŒ…ä¸­çš„ç±»æ—¶ï¼Œä¸éœ€è¦å¯¼åŒ…</li><li>å…¶ä»–æƒ…å†µéƒ½éœ€è¦å¯¼åŒ…</li><li>å¦‚æœåŒæ—¶ä½¿ç”¨ä¸¤ä¸ªåŒ…ä¸­çš„åŒåç±»æ—¶ï¼Œéœ€è¦ä½¿ç”¨å…¨ç±»åï¼š<code>åŒ…å + ç±»å</code></li></ul><h1 id="finalå…³é”®å­—"><a href="#finalå…³é”®å­—" class="headerlink" title="finalå…³é”®å­—"></a>finalå…³é”®å­—</h1><h2 id="æ¦‚å¿µ-2"><a href="#æ¦‚å¿µ-2" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h2><ul><li><p><code>final</code>ï¼šä¸å¯æ”¹å˜ï¼Œæœ€ç»ˆçš„å«ä¹‰ã€‚å¯ä»¥ç”¨äºä¿®é¥°ç±»ã€æ–¹æ³•å’Œå˜é‡ã€‚</p></li><li><p>ä¿®é¥°ç±»ï¼šè¡¨ç¤ºè¯¥ç±»ä¸ºæœ€ç»ˆç±»ï¼Œä¸èƒ½è¢«ç»§æ‰¿</p></li><li><p>ä¿®é¥°æ–¹æ³•ï¼šè¡¨ç¤ºè¯¥æ–¹æ³•æ˜¯æœ€ç»ˆæ–¹æ³•ï¼Œä¸èƒ½è¢«é‡å†™</p></li><li><p>ä¿®é¥°å˜é‡ï¼šå«åšå¸¸é‡ï¼Œåªèƒ½è¢«èµ‹å€¼ä¸€æ¬¡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ³¨æ„ï¼šä¿®é¥°æˆå‘˜å˜é‡æ—¶ï¼Œæ¶‰åŠåˆå§‹åŒ–é—®é¢˜ï¼Œæˆå‘˜å˜é‡å¯ä»¥æ˜¾ç¤ºåˆå§‹åŒ–oræ„é€ æ–¹æ³•åˆå§‹åŒ–ï¼Œä¸€ä¸ªå˜é‡ä¸¤è€…åªèƒ½é€‰æ‹©å…¶ä¸€</span></span><br><span class="line"><span class="comment">//æ˜¾ç¤ºåˆå§‹åŒ–ï¼š</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ„é€ æ–¹æ³•åˆå§‹åŒ–</span></span><br><span class="line"><span class="comment">//æ³¨æ„ï¼šæ¯ä¸ªæ„é€ æ–¹æ³•ä¸­éƒ½éœ€è¦èµ‹å€¼ä¸€æ¬¡</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="type">int</span> num;</span><br><span class="line">    <span class="keyword">final</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(<span class="type">int</span> num)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.num = <span class="number">20</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">     <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(<span class="type">int</span> num, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.num = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="å¸¸é‡"><a href="#å¸¸é‡" class="headerlink" title="å¸¸é‡"></a>å¸¸é‡</h2><h3 id="å‘½åè§„èŒƒ"><a href="#å‘½åè§„èŒƒ" class="headerlink" title="å‘½åè§„èŒƒ"></a>å‘½åè§„èŒƒ</h3><ul><li>å•ä¸ªå•è¯ï¼šå…¨éƒ¨å¤§å†™</li><li>å¤šä¸ªå•è¯ï¼šå…¨éƒ¨å¤§å†™ï¼Œå•è¯ä¹‹é—´ç”¨ä¸‹åˆ’çº¿éš”å¼€</li></ul><h3 id="ç»†èŠ‚"><a href="#ç»†èŠ‚" class="headerlink" title="ç»†èŠ‚"></a>ç»†èŠ‚</h3><ul><li>finalä¿®é¥°çš„æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œé‚£ä¹ˆå˜é‡å­˜å‚¨çš„<u>æ•°æ®å€¼</u>æ˜¯ä¸å¯æ”¹å˜çš„</li><li>finalä¿®é¥°çš„æ˜¯å¼•ç”¨æ•°æ®ç±»å‹ï¼Œé‚£ä¹ˆå˜é‡å­˜å‚¨çš„<u>åœ°å€å€¼</u>æ˜¯ä¸èƒ½å‘ç”Ÿæ”¹å˜çš„ï¼Œå¯¹è±¡å†…éƒ¨çš„å±æ€§å€¼æ˜¯å¯ä»¥æ”¹å˜çš„</li></ul><h1 id="æƒé™ä¿®é¥°ç¬¦"><a href="#æƒé™ä¿®é¥°ç¬¦" class="headerlink" title="æƒé™ä¿®é¥°ç¬¦"></a>æƒé™ä¿®é¥°ç¬¦</h1><table><thead><tr><th></th><th>public</th><th>protected</th><th>é»˜è®¤</th><th>private</th></tr></thead><tbody><tr><td>åŒä¸€ç±»ä¸­</td><td>âˆš</td><td>âˆš</td><td>âˆš</td><td>âˆš</td></tr><tr><td>åŒä¸€åŒ…ä¸­çš„ç±»</td><td>âˆš</td><td>âˆš</td><td>âˆš</td><td></td></tr><tr><td>ä¸åŒåŒ…çš„å­ç±»ä¸­</td><td>âˆš</td><td>âˆš</td><td></td><td></td></tr><tr><td>ä¸åŒåŒ…ä¸­çš„æ— å…³ç±»</td><td>âˆš</td><td></td><td></td><td></td></tr></tbody></table><p>publicå…·æœ‰æœ€å¤§æƒé™ã€‚privateåˆ™æ˜¯æœ€å°æƒé™ã€‚ç¼–å†™ä»£ç æ—¶ï¼Œå¦‚æœæ²¡æœ‰ç‰¹æ®Šçš„è€ƒè™‘ï¼Œå»ºè®®è¿™æ ·ä½¿ç”¨æƒé™ï¼š</p><ul><li>æˆå‘˜å˜é‡ä½¿ç”¨<code>private</code> ï¼Œéšè—ç»†èŠ‚ã€‚</li><li>æ„é€ æ–¹æ³•ä½¿ç”¨<code> public</code> ï¼Œæ–¹ä¾¿åˆ›å»ºå¯¹è±¡ã€‚</li><li>æˆå‘˜æ–¹æ³•ä½¿ç”¨<code>public</code> ï¼Œæ–¹ä¾¿è°ƒç”¨æ–¹æ³•ã€‚<ul><li>å¦‚æœç±»ä¸­çš„æŸä¸ªæˆå‘˜æ–¹æ³•æ˜¯æŠ½å–å…¶ä»–æˆå‘˜æ–¹æ³•ä¸­çš„å…±æ€§ä»£ç ï¼Œè¿™ä¸ªæ–¹æ³•ä¸€èˆ¬ä¹Ÿç§æœ‰ï¼Œå› ä¸ºè¿™äº›å…±æ€§ä»£ç ä¸€èˆ¬ä¸å¸Œæœ›è¢«åˆ«çš„ç±»è°ƒç”¨</li></ul></li></ul><blockquote><p>å°è´´å£«ï¼šä¸åŠ æƒé™ä¿®é¥°ç¬¦ï¼Œå°±æ˜¯é»˜è®¤æƒé™</p></blockquote><h1 id="ä»£ç å—"><a href="#ä»£ç å—" class="headerlink" title="ä»£ç å—"></a>ä»£ç å—</h1><ul><li>åˆ†ç±»<ul><li>å±€éƒ¨ä»£ç å—ï¼Œæ„é€ ä»£ç å—ï¼Œé™æ€ä»£ç å—</li></ul></li><li>å±€éƒ¨ä»£ç å—çš„ä½œç”¨<ul><li>æå‰ç»“æŸå˜é‡çš„å£°æ˜å‘¨æœŸï¼ˆå·²æ·˜æ±°ï¼‰</li></ul></li><li>æ„é€ ä»£ç å—çš„ä½œç”¨<ul><li>æŠ½å–æ„é€ æ–¹æ³•ä¸­çš„é‡å¤ä»£ç ï¼ˆä¸å¤Ÿçµæ´»ï¼‰</li></ul></li></ul><h2 id="é™æ€ä»£ç å—-star"><a href="#é™æ€ä»£ç å—-star" class="headerlink" title="é™æ€ä»£ç å—:star:"></a>é™æ€ä»£ç å—:star:</h2><ul><li><p>æ ¼å¼</p><ul><li><pre><code class="java">static &#123;    &#125;<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- ç‰¹ç‚¹</span><br><span class="line"></span><br><span class="line">  - éšç€ç±»çš„åŠ è½½è€ŒåŠ è½½ï¼Œå¹¶ä¸”è‡ªåŠ¨è§¦å‘ï¼Œ&lt;u&gt;åªæ‰§è¡Œä¸€æ¬¡&lt;/u&gt;</span><br><span class="line"></span><br><span class="line">- ä½¿ç”¨åœºæ™¯</span><br><span class="line"></span><br><span class="line">  - åœ¨ç±»åŠ è½½æ—¶ï¼Œåšä¸€äº›æ•°æ®åˆå§‹åŒ–çš„æ—¶å€™ä½¿ç”¨</span><br><span class="line"></span><br><span class="line">- æ‰§è¡Œé¡ºåº</span><br><span class="line"></span><br><span class="line">  - é™æ€ä»£ç å— --&gt;  æ„é€ ä»£ç å—  --&gt; æ„é€ æ–¹æ³•</span><br><span class="line">  - [(3æ¡æ¶ˆæ¯) javaä¸­é™æ€ä»£ç å—è¯¦è§£_è¿™è¾ˆå­_å®‰é™çš„åŠªåŠ›ç€çš„åšå®¢-CSDNåšå®¢_é™æ€ä»£ç å—](https://blog.csdn.net/qq_35868412/article/details/89360250)</span><br><span class="line"></span><br><span class="line"># æŠ½è±¡ç±»</span><br><span class="line"></span><br><span class="line">## ä½œç”¨</span><br><span class="line"></span><br><span class="line">- æŠ½å–å…±æ€§æ—¶ï¼Œæ— æ³•ç¡®å®šæ–¹æ³•ä½“ï¼Œå°±æŠŠæ–¹æ³•å®šä¹‰ä¸ºæŠ½è±¡çš„ã€‚</span><br><span class="line">- å¼ºåˆ¶è®©å­ç±»æŒ‰ç…§æŸç§æ ¼å¼é‡å†™</span><br><span class="line">- æŠ½è±¡æ–¹æ³•æ‰€åœ¨çš„ç±»ï¼Œå¿…é¡»æ˜¯æŠ½è±¡ç±»</span><br><span class="line"></span><br><span class="line">## abstractæ ¼å¼</span><br><span class="line"></span><br><span class="line">```java</span><br><span class="line">//æŠ½è±¡ç±»</span><br><span class="line">public abstract class ç±»å&#123;&#125;</span><br><span class="line">//æŠ½è±¡æ–¹æ³•</span><br><span class="line">public abstract è¿”å›å€¼ç±»å‹ æ–¹æ³•å(å‚æ•°åˆ—è¡¨);</span><br></pre></td></tr></table></figure></code></pre></li></ul></li></ul><h2 id="æ³¨æ„-star"><a href="#æ³¨æ„-star" class="headerlink" title="æ³¨æ„:star:"></a>æ³¨æ„:star:</h2><p>å…³äºæŠ½è±¡ç±»çš„ä½¿ç”¨ï¼Œä»¥ä¸‹ä¸ºè¯­æ³•ä¸Šè¦æ³¨æ„çš„ç»†èŠ‚ï¼Œè™½ç„¶æ¡ç›®è¾ƒå¤šï¼Œä½†è‹¥ç†è§£äº†æŠ½è±¡çš„æœ¬è´¨ï¼Œæ— éœ€æ­»è®°ç¡¬èƒŒã€‚</p><ul><li><p>æŠ½è±¡ç±»<strong>ä¸èƒ½åˆ›å»ºå¯¹è±¡</strong>ï¼Œå¦‚æœåˆ›å»ºï¼Œç¼–è¯‘æ— æ³•é€šè¿‡è€ŒæŠ¥é”™ã€‚åªèƒ½åˆ›å»ºå…¶éæŠ½è±¡å­ç±»çš„å¯¹è±¡ã€‚</p><blockquote><p>ç†è§£ï¼šå‡è®¾åˆ›å»ºäº†æŠ½è±¡ç±»çš„å¯¹è±¡ï¼Œè°ƒç”¨æŠ½è±¡çš„æ–¹æ³•ï¼Œè€ŒæŠ½è±¡æ–¹æ³•æ²¡æœ‰å…·ä½“çš„æ–¹æ³•ä½“ï¼Œæ²¡æœ‰æ„ä¹‰ã€‚</p></blockquote></li><li><p>æŠ½è±¡ç±»ä¸­ï¼Œå¯ä»¥æœ‰æ„é€ æ–¹æ³•ï¼Œæ˜¯ä¾›å­ç±»åˆ›å»ºå¯¹è±¡æ—¶ï¼Œåˆå§‹åŒ–çˆ¶ç±»æˆå‘˜ä½¿ç”¨çš„ã€‚</p><blockquote><p>ç†è§£ï¼šå­ç±»çš„æ„é€ æ–¹æ³•ä¸­ï¼Œæœ‰é»˜è®¤çš„super()ï¼Œéœ€è¦è®¿é—®çˆ¶ç±»æ„é€ æ–¹æ³•ã€‚</p></blockquote></li><li><p>æŠ½è±¡ç±»ä¸­ï¼Œä¸ä¸€å®šåŒ…å«æŠ½è±¡æ–¹æ³•ï¼Œä½†æ˜¯æœ‰æŠ½è±¡æ–¹æ³•çš„ç±»å¿…å®šæ˜¯æŠ½è±¡ç±»ã€‚</p><blockquote><p>ç†è§£ï¼šæœªåŒ…å«æŠ½è±¡æ–¹æ³•çš„æŠ½è±¡ç±»ï¼Œç›®çš„å°±æ˜¯ä¸æƒ³è®©è°ƒç”¨è€…åˆ›å»ºè¯¥ç±»å¯¹è±¡ï¼Œé€šå¸¸ç”¨äºæŸäº›ç‰¹æ®Šçš„ç±»ç»“æ„è®¾è®¡ã€‚</p></blockquote></li><li><p>æŠ½è±¡ç±»çš„å­ç±»ï¼Œå¿…é¡»é‡å†™æŠ½è±¡çˆ¶ç±»ä¸­<strong>æ‰€æœ‰çš„</strong>æŠ½è±¡æ–¹æ³•ï¼Œå¦åˆ™å­ç±»ä¹Ÿå¿…é¡»å®šä¹‰æˆæŠ½è±¡ç±»ï¼Œç¼–è¯‘æ— æ³•é€šè¿‡è€ŒæŠ¥é”™ã€‚ </p><blockquote><p>ç†è§£ï¼šå‡è®¾ä¸é‡å†™æ‰€æœ‰æŠ½è±¡æ–¹æ³•ï¼Œåˆ™ç±»ä¸­å¯èƒ½åŒ…å«æŠ½è±¡æ–¹æ³•ã€‚é‚£ä¹ˆåˆ›å»ºå¯¹è±¡åï¼Œè°ƒç”¨æŠ½è±¡çš„æ–¹æ³•ï¼Œæ²¡æœ‰æ„ä¹‰ã€‚</p></blockquote></li><li><p>æŠ½è±¡ç±»å­˜åœ¨çš„æ„ä¹‰æ˜¯ä¸ºäº†è¢«å­ç±»ç»§æ‰¿ã€‚</p><blockquote><p>ç†è§£ï¼šæŠ½è±¡ç±»ä¸­å·²ç»å®ç°çš„æ˜¯æ¨¡æ¿ä¸­ç¡®å®šçš„æˆå‘˜ï¼ŒæŠ½è±¡ç±»ä¸ç¡®å®šå¦‚ä½•å®ç°çš„å®šä¹‰æˆæŠ½è±¡æ–¹æ³•ï¼Œäº¤ç»™å…·ä½“çš„å­ç±»å»å®ç°ã€‚</p></blockquote></li></ul><h1 id="æ¥å£"><a href="#æ¥å£" class="headerlink" title="æ¥å£"></a>æ¥å£</h1><h2 id="ä½œç”¨"><a href="#ä½œç”¨" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h2><ul><li>ç”±ç»§æ‰¿å¯çŸ¥æ‰€æœ‰å­ç±»çš„å…±æ€§è¢«æŠ½å–åˆ°çˆ¶ç±»ä¸­ï¼Œä½†å½“æŸä¸ªå…±æ€§ä¸æ˜¯å…¨éƒ¨å­ç±»ï¼Œåªæ˜¯éƒ¨åˆ†å­ç±»çš„å…±æ€§æ—¶ï¼Œè¿™æ—¶å°±éœ€è¦ä½¿ç”¨æ¥å£æ¥å®šä¹‰è¿™ä¸€å…±æ€§(è§„åˆ™)ï¼Œåªéœ€è®©è¿™äº›éƒ¨åˆ†å­ç±»å®ç°æ¥å£å³å¯</li><li>æ¥å£æ˜¯æ›´åŠ å½»åº•çš„æŠ½è±¡ï¼Œåœ¨JDK7ä¹‹å‰ï¼Œæ¥å£ä¸­å…¨æ˜¯æŠ½è±¡æ–¹æ³•ã€‚æ¥å£åŒæ ·æ˜¯ä¸èƒ½åˆ›å»ºå¯¹è±¡çš„</li></ul><h2 id="æ ¼å¼"><a href="#æ ¼å¼" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ¥å£çš„å®šä¹‰æ ¼å¼ï¼Œé»˜è®¤åœ¨interfaceå‰é¢ä¼šæœ‰abstract</span></span><br><span class="line">interface æ¥å£å&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å®ç°æ¥å£ï¼Œæ¥å£æ˜¯å¯ä»¥å¤šå®ç°çš„</span></span><br><span class="line">class ç±»å implements æ¥å£<span class="number">1</span>,æ¥å£<span class="number">2.</span>..&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ¥å£æˆå‘˜çš„ç‰¹ç‚¹"><a href="#æ¥å£æˆå‘˜çš„ç‰¹ç‚¹" class="headerlink" title="æ¥å£æˆå‘˜çš„ç‰¹ç‚¹"></a>æ¥å£æˆå‘˜çš„ç‰¹ç‚¹</h2><ul><li>åœ¨JDK7ï¼ŒåŒ…æ‹¬JDK7ä¹‹å‰ï¼Œæ¥å£ä¸­çš„<strong>åªæœ‰</strong>åŒ…å«ï¼šæŠ½è±¡æ–¹æ³•å’Œå¸¸é‡</li><li>æ¥å£ä¸­<strong>æ²¡æœ‰</strong>æ„é€ æ–¹æ³•ï¼Œå› ä¸ºæ¥å£ä¸èƒ½åˆ›å»ºå¯¹è±¡åŒæ—¶ä¹Ÿä¸éœ€è¦ç»™å­ç±»çš„æˆå‘˜å˜é‡èµ‹å€¼ã€‚</li><li>JDK8çš„æ–°ç‰¹æ€§ï¼Œæ¥å£ä¸­å¯ä»¥å®šä¹‰æœ‰æ–¹æ³•ä½“çš„æ–¹æ³•</li><li>JDK9çš„æ–°ç‰¹æ€§ï¼Œæ¥å£ä¸­å¯ä»¥å®šä¹‰ç§æœ‰æ–¹æ³•</li></ul><h3 id="æŠ½è±¡æ–¹æ³•"><a href="#æŠ½è±¡æ–¹æ³•" class="headerlink" title="æŠ½è±¡æ–¹æ³•"></a>æŠ½è±¡æ–¹æ³•</h3><ul><li>æ³¨æ„ï¼šæ¥å£ä¸­çš„æŠ½è±¡æ–¹æ³•é»˜è®¤ä¼šè‡ªåŠ¨åŠ ä¸Špublic abstractä¿®é¥°ç¨‹åºå‘˜æ— éœ€è‡ªå·±æ‰‹å†™ï¼ï¼</li><li>æŒ‰ç…§è§„èŒƒï¼šä»¥åæ¥å£ä¸­çš„æŠ½è±¡æ–¹æ³•å»ºè®®ä¸è¦å†™ä¸Špublic abstractã€‚å› ä¸ºæ²¡æœ‰å¿…è¦å•Šï¼Œé»˜è®¤ä¼šåŠ ä¸Šã€‚</li></ul><h3 id="å¸¸é‡-1"><a href="#å¸¸é‡-1" class="headerlink" title="å¸¸é‡"></a>å¸¸é‡</h3><ul><li>åœ¨æ¥å£ä¸­å®šä¹‰çš„æˆå‘˜å˜é‡é»˜è®¤ä¼šåŠ ä¸Šï¼š public static finalä¿®é¥°ã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨æ¥å£ä¸­å®šä¹‰çš„æˆå‘˜å˜é‡å®é™…ä¸Šæ˜¯ä¸€ä¸ªå¸¸é‡ã€‚è¿™é‡Œæ˜¯ä½¿ç”¨public static finalä¿®é¥°åï¼Œå˜é‡å€¼å°±ä¸å¯è¢«ä¿®æ”¹ï¼Œå¹¶ä¸”æ˜¯é™æ€åŒ–çš„å˜é‡å¯ä»¥ç›´æ¥ç”¨æ¥å£åè®¿é—®ï¼Œæ‰€ä»¥ä¹Ÿå«å¸¸é‡ã€‚å¸¸é‡å¿…é¡»è¦ç»™åˆå§‹å€¼ã€‚å¸¸é‡å‘½åè§„èŒƒå»ºè®®å­—æ¯å…¨éƒ¨å¤§å†™ï¼Œå¤šä¸ªå•è¯ç”¨ä¸‹åˆ’çº¿è¿æ¥ã€‚</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">InterF</span> &#123;</span><br><span class="line">    <span class="comment">// æŠ½è±¡æ–¹æ³•ï¼</span></span><br><span class="line">    <span class="comment">//    public abstract void run();</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//    public abstract String getName();</span></span><br><span class="line">    String <span class="title function_">getName</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//    public abstract int add(int a , int b);</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> a , <span class="type">int</span> b)</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å®ƒçš„æœ€ç»ˆå†™æ³•æ˜¯ï¼š</span></span><br><span class="line">    <span class="comment">// public static final int AGE = 12 ;</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">AGE</span>  <span class="operator">=</span> <span class="number">12</span>; <span class="comment">//å¸¸é‡</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">SCHOOL_NAME</span> <span class="operator">=</span> <span class="string">&quot;é»‘é©¬ç¨‹åºå‘˜&quot;</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ¥å£å’Œç±»çš„å…³ç³»"><a href="#æ¥å£å’Œç±»çš„å…³ç³»" class="headerlink" title="æ¥å£å’Œç±»çš„å…³ç³»"></a>æ¥å£å’Œç±»çš„å…³ç³»</h2><h3 id="ç±»å’Œç±»çš„å…³ç³»"><a href="#ç±»å’Œç±»çš„å…³ç³»" class="headerlink" title="ç±»å’Œç±»çš„å…³ç³»"></a>ç±»å’Œç±»çš„å…³ç³»</h3><ul><li>ç»§æ‰¿å…³ç³»ï¼Œåªèƒ½å•ç»§æ‰¿ï¼Œä¸èƒ½å¤šç»§æ‰¿ï¼Œä½†æ˜¯å¯ä»¥å¤šå±‚ç»§æ‰¿</li></ul><h3 id="ç±»å’Œæ¥å£çš„å…³ç³»"><a href="#ç±»å’Œæ¥å£çš„å…³ç³»" class="headerlink" title="ç±»å’Œæ¥å£çš„å…³ç³»"></a>ç±»å’Œæ¥å£çš„å…³ç³»</h3><ul><li>å®ç°å…³ç³»ï¼Œå¯ä»¥å•å®ç°ï¼Œä¹Ÿå¯ä»¥å¤šå®ç°ï¼Œè¿˜å¯ä»¥åœ¨ç»§æ‰¿ä¸€ä¸ªç±»çš„åŒæ—¶å®ç°å¤šä¸ªæ¥å£</li></ul><h3 id="æ¥å£å’Œæ¥å£çš„å…³ç³»"><a href="#æ¥å£å’Œæ¥å£çš„å…³ç³»" class="headerlink" title="æ¥å£å’Œæ¥å£çš„å…³ç³»"></a>æ¥å£å’Œæ¥å£çš„å…³ç³»</h3><ul><li>ç»§æ‰¿å…³ç³»ï¼Œå¯ä»¥å•ç»§æ‰¿ï¼Œä¹Ÿå¯ä»¥å¤šç»§æ‰¿</li><li>ç»†èŠ‚ï¼šå¦‚æœç±»å®ç°äº†æœ€ä¸‹é¢çš„å­æ¥å£ï¼Œé‚£ä¹ˆå°±éœ€è¦é‡å†™æ‰€æœ‰çš„æŠ½è±¡æ–¹æ³•</li></ul><h2 id="æ³¨æ„-star-1"><a href="#æ³¨æ„-star-1" class="headerlink" title="æ³¨æ„:star:"></a>æ³¨æ„:star:</h2><p>å…³äºæ¥å£çš„ä½¿ç”¨ï¼Œä»¥ä¸‹ä¸ºè¯­æ³•ä¸Šè¦æ³¨æ„çš„ç»†èŠ‚ï¼Œè™½ç„¶æ¡ç›®è¾ƒå¤šï¼Œä½†è‹¥ç†è§£äº†æŠ½è±¡çš„æœ¬è´¨ï¼Œæ— éœ€æ­»è®°ç¡¬èƒŒã€‚</p><ol><li>å½“ä¸¤ä¸ªæ¥å£ä¸­å­˜åœ¨ç›¸åŒæŠ½è±¡æ–¹æ³•çš„æ—¶å€™ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ</li></ol><blockquote><p>åªè¦é‡å†™ä¸€æ¬¡å³å¯ã€‚æ­¤æ—¶é‡å†™çš„æ–¹æ³•ï¼Œæ—¢è¡¨ç¤ºé‡å†™1æ¥å£çš„ï¼Œä¹Ÿè¡¨ç¤ºé‡å†™2æ¥å£çš„ã€‚</p></blockquote><ol start="2"><li>å®ç°ç±»èƒ½ä¸èƒ½ç»§æ‰¿Aç±»çš„æ—¶å€™ï¼ŒåŒæ—¶å®ç°å…¶ä»–æ¥å£å‘¢ï¼Ÿ</li></ol><blockquote><p>ç»§æ‰¿çš„çˆ¶ç±»ï¼Œå°±å¥½æ¯”æ˜¯äº²çˆ¸çˆ¸ä¸€æ ·<br>å®ç°çš„æ¥å£ï¼Œå°±å¥½æ¯”æ˜¯å¹²çˆ¹ä¸€æ ·<br>å¯ä»¥ç»§æ‰¿ä¸€ä¸ªç±»çš„åŒæ—¶ï¼Œå†å®ç°å¤šä¸ªæ¥å£ï¼Œåªä¸è¿‡ï¼Œè¦æŠŠæ¥å£é‡Œé¢æ‰€æœ‰çš„æŠ½è±¡æ–¹æ³•ï¼Œå…¨éƒ¨å®ç°ã€‚</p></blockquote><ol start="3"><li>å®ç°ç±»èƒ½ä¸èƒ½ç»§æ‰¿ä¸€ä¸ªæŠ½è±¡ç±»çš„æ—¶å€™ï¼ŒåŒæ—¶å®ç°å…¶ä»–æ¥å£å‘¢ï¼Ÿ</li></ol><blockquote><p>å®ç°ç±»å¯ä»¥ç»§æ‰¿ä¸€ä¸ªæŠ½è±¡ç±»çš„åŒæ—¶ï¼Œå†å®ç°å…¶ä»–å¤šä¸ªæ¥å£ï¼Œåªä¸è¿‡è¦æŠŠé‡Œé¢æ‰€æœ‰çš„æŠ½è±¡æ–¹æ³•å…¨éƒ¨é‡å†™ã€‚</p></blockquote><ol start="4"><li>å®ç°ç±»Ziï¼Œå®ç°äº†ä¸€ä¸ªæ¥å£ï¼Œè¿˜ç»§æ‰¿äº†ä¸€ä¸ªFuç±»ã€‚å‡è®¾åœ¨æ¥å£ä¸­æœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œçˆ¶ç±»ä¸­ä¹Ÿæœ‰ä¸€ä¸ªç›¸åŒçš„æ–¹æ³•ã€‚å­ç±»å¦‚ä½•æ“ä½œå‘¢ï¼Ÿ</li></ol><blockquote><p>å¤„ç†åŠæ³•ä¸€ï¼šå¦‚æœçˆ¶ç±»ä¸­çš„æ–¹æ³•ä½“ï¼Œèƒ½æ»¡è¶³å½“å‰ä¸šåŠ¡çš„éœ€æ±‚ï¼Œåœ¨å­ç±»ä¸­å¯ä»¥ä¸ç”¨é‡å†™ã€‚<br>å¤„ç†åŠæ³•äºŒï¼šå¦‚æœçˆ¶ç±»ä¸­çš„æ–¹æ³•ä½“ï¼Œä¸èƒ½æ»¡è¶³å½“å‰ä¸šåŠ¡çš„éœ€æ±‚ï¼Œéœ€è¦åœ¨å­ç±»ä¸­é‡å†™ã€‚</p></blockquote><ol start="5"><li>å¦‚æœä¸€ä¸ªæ¥å£ä¸­ï¼Œæœ‰10ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œä½†æ˜¯æˆ‘åœ¨å®ç°ç±»ä¸­ï¼Œåªéœ€è¦ç”¨å…¶ä¸­ä¸€ä¸ªï¼Œè¯¥æ€ä¹ˆåŠ?</li></ol><blockquote><p>å¯ä»¥åœ¨æ¥å£è·Ÿå®ç°ç±»ä¸­é—´ï¼Œæ–°å»ºä¸€ä¸ªä¸­é—´ç±»ï¼ˆé€‚é…å™¨ç±»ï¼‰<br>è®©è¿™ä¸ªé€‚é…å™¨ç±»å»å®ç°æ¥å£ï¼Œå¯¹æ¥å£é‡Œé¢çš„æ‰€æœ‰çš„æ–¹æ³•åšç©ºé‡å†™ã€‚<br>è®©å­ç±»ç»§æ‰¿è¿™ä¸ªé€‚é…å™¨ç±»ï¼Œæƒ³è¦ç”¨åˆ°å“ªä¸ªæ–¹æ³•ï¼Œå°±é‡å†™å“ªä¸ªæ–¹æ³•ã€‚<br>å› ä¸ºä¸­é—´ç±»æ²¡æœ‰ä»€ä¹ˆå®é™…çš„æ„ä¹‰ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¼šæŠŠä¸­é—´ç±»å®šä¹‰ä¸ºæŠ½è±¡çš„ï¼Œä¸è®©å¤–ç•Œåˆ›å»ºå¯¹è±¡</p></blockquote><h2 id="æ–°ç‰¹æ€§"><a href="#æ–°ç‰¹æ€§" class="headerlink" title="æ–°ç‰¹æ€§"></a>æ–°ç‰¹æ€§</h2><h3 id="JDK8ä»¥åæ¥å£æ–°å¢çš„æ–¹æ³•-é»˜è®¤æ–¹æ³•"><a href="#JDK8ä»¥åæ¥å£æ–°å¢çš„æ–¹æ³•-é»˜è®¤æ–¹æ³•" class="headerlink" title="JDK8ä»¥åæ¥å£æ–°å¢çš„æ–¹æ³•-é»˜è®¤æ–¹æ³•"></a>JDK8ä»¥åæ¥å£æ–°å¢çš„æ–¹æ³•-é»˜è®¤æ–¹æ³•</h3><ul><li><p>æ¦‚å¿µ</p><ul><li>å…è®¸åœ¨æ¥å£ä¸­å®šä¹‰é»˜è®¤æ–¹æ³•ï¼Œéœ€è¦ä½¿ç”¨å…³é”®å­—<code>default</code>ä¿®é¥°</li><li>ä½œç”¨ï¼šè§£å†³æ¥å£å‡çº§åï¼Œå®ç°ç±»æœªé‡å†™æ–°å‡çº§çš„æ–¹æ³•è€ŒæŠ¥é”™çš„é—®é¢˜</li></ul></li><li><p>æ ¼å¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">default</span> è¿”å›å€¼ç±»å‹ æ–¹æ³•å(å‚æ•°åˆ—è¡¨)&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æ³¨æ„äº‹é¡¹</p><ul><li>é»˜è®¤æ–¹æ³•ä¸æ˜¯æŠ½è±¡æ–¹æ³•ï¼Œæ‰€ä»¥ä¸å¼ºåˆ¶è¢«é‡å†™ï¼Œä½†æ˜¯å¦‚æœè¢«é‡å†™ï¼Œé‡å†™çš„æ—¶å€™å»æ‰<code>default</code>å…³é”®å­—</li><li>publicå¯ä»¥çœç•¥ï¼Œdefaultä¸èƒ½çœç•¥</li><li>å¦‚æœå®ç°äº†å¤šä¸ªæ¥å£ï¼Œå¤šä¸ªæ¥å£å­˜åœ¨ç›¸åŒåå­—çš„é»˜è®¤æ–¹æ³•ï¼Œå­ç±»å°±å¿…é¡»å¯¹è¯¥æ–¹æ³•è¿›è¡Œé‡å†™</li></ul></li></ul><h3 id="JDK8ä»¥åæ¥å£æ–°å¢çš„æ–¹æ³•-é™æ€æ–¹æ³•"><a href="#JDK8ä»¥åæ¥å£æ–°å¢çš„æ–¹æ³•-é™æ€æ–¹æ³•" class="headerlink" title="JDK8ä»¥åæ¥å£æ–°å¢çš„æ–¹æ³•-é™æ€æ–¹æ³•"></a>JDK8ä»¥åæ¥å£æ–°å¢çš„æ–¹æ³•-é™æ€æ–¹æ³•</h3><ul><li><p>å…è®¸åœ¨æ¥å£ä¸­å®šä¹‰é™æ€æ–¹æ³•ï¼Œéœ€è¦ç”¨staticä¿®é¥°</p></li><li><p>æ ¼å¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> è¿”å›å€¼ç±»å‹ æ–¹æ³•å(å‚æ•°åˆ—è¡¨)&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æ³¨æ„äº‹é¡¹</p><ul><li>é™æ€æ–¹æ³•åªèƒ½é€šè¿‡æ¥å£åè°ƒç”¨ï¼Œä¸èƒ½é€šè¿‡å®ç°ç±»åæˆ–è€…å¯¹è±¡åè°ƒç”¨</li><li>publicå¯ä»¥çœç•¥ï¼Œstaticä¸èƒ½çœç•¥</li></ul></li></ul><h3 id="JDK9ä»¥åæ¥å£æ–°å¢çš„æ–¹æ³•-ç§æœ‰æ–¹æ³•"><a href="#JDK9ä»¥åæ¥å£æ–°å¢çš„æ–¹æ³•-ç§æœ‰æ–¹æ³•" class="headerlink" title="JDK9ä»¥åæ¥å£æ–°å¢çš„æ–¹æ³•-ç§æœ‰æ–¹æ³•"></a>JDK9ä»¥åæ¥å£æ–°å¢çš„æ–¹æ³•-ç§æœ‰æ–¹æ³•</h3><ul><li><p>æ ¼å¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ ¼å¼1 --ä¾›é»˜è®¤æ–¹æ³•ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">private</span> è¿”å›å€¼ç±»å‹ æ–¹æ³•å(å‚æ•°åˆ—è¡¨)&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ ¼å¼2  --ä¾›é™æ€æ–¹æ³•ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> è¿”å›å€¼ç±»å‹ æ–¹æ³•å(å‚æ•°åˆ—è¡¨)&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="æ¥å£çš„åº”ç”¨"><a href="#æ¥å£çš„åº”ç”¨" class="headerlink" title="æ¥å£çš„åº”ç”¨"></a>æ¥å£çš„åº”ç”¨</h2><ul><li>æ¥å£ä»£è¡¨è§„åˆ™ï¼Œæ˜¯è¡Œä¸ºçš„æŠ½è±¡ã€‚æƒ³è¦è®©å“ªä¸ªç±»æ‹¥æœ‰ä¸€ä¸ªè¡Œä¸ºï¼Œå°±è®©è¿™ä¸ªç±»å®ç°å¯¹åº”çš„æ¥å£å°±è¡Œ</li><li>å½“ä¸€ä¸ªæ–¹æ³•çš„å‚æ•°æ˜¯æ¥å£æ—¶ï¼Œå¯ä»¥ä¼ é€’æ¥å£æ‰€æœ‰å®ç°ç±»çš„å¯¹è±¡ï¼Œè¿™ç§æ–¹å¼ç§°ä¹‹ä¸ºæ¥å£å¤šæ€</li></ul><h2 id="é€‚é…å™¨è®¾è®¡æ¨¡å¼"><a href="#é€‚é…å™¨è®¾è®¡æ¨¡å¼" class="headerlink" title="é€‚é…å™¨è®¾è®¡æ¨¡å¼"></a>é€‚é…å™¨è®¾è®¡æ¨¡å¼</h2><h3 id="ä½œç”¨-1"><a href="#ä½œç”¨-1" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h3><ul><li>è§£å†³æ¥å£å’Œæ¥å£å®ç°ç±»ä¹‹é—´çš„çŸ›ç›¾é—®é¢˜ï¼šæ¥å£å®ç°ç±»ä¸æƒ³é‡å†™æ¥å£ä¸­çš„æ‰€æœ‰æŠ½è±¡æ–¹æ³•</li></ul><h3 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h3><ul><li>ç¼–å†™ä¸­é—´ç±»XXXAdapterï¼Œå®ç°å¯¹åº”çš„æ¥å£</li><li>å¯¹æ¥å£ä¸­çš„æŠ½è±¡æ–¹æ³•è¿›è¡Œç©ºå®ç°</li><li>è®©çœŸæ­£çš„æ¥å£å®ç°ç±»ç»§æ‰¿ä¸­é—´ç±»ï¼Œå¹¶é‡å†™éœ€è¦ç”¨çš„æ–¹æ³•</li><li>ä¸ºäº†é¿å…å…¶ä»–ç±»åˆ›å»ºé€‚é…å™¨ç±»çš„å¯¹è±¡ï¼Œä¸­é—´çš„é€‚é…å™¨ç±»ç”¨<code>abstract</code>ä¿®é¥°</li><li>å¦‚æœçœŸæ­£çš„å®ç°ç±»æœ‰å…¶ä»–çš„çˆ¶ç±»ï¼Œç”±äºjavaä¸èƒ½å¤šç»§æ‰¿æ•…å¯ä»¥è®©ä¸­é—´ç±»ç»§æ‰¿çœŸæ­£å®ç°ç±»çš„çˆ¶ç±»ï¼Œè¾¾åˆ°é—´æ¥ç»§æ‰¿</li></ul><h1 id="å†…éƒ¨ç±»"><a href="#å†…éƒ¨ç±»" class="headerlink" title="å†…éƒ¨ç±»"></a>å†…éƒ¨ç±»</h1><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><ul><li>å†…éƒ¨ç±»è¡¨ç¤ºçš„äº‹åŠ¡æ˜¯å¤–éƒ¨ç±»çš„ä¸€éƒ¨åˆ†ï¼Œå†…éƒ¨ç±»å•ç‹¬å‡ºç°æ²¡æœ‰ä»»ä½•æ„ä¹‰ï¼Œæ¯”å¦‚æ±½è½¦å†…æœ‰ä¸€ä¸ªå‘åŠ¨æœº</li></ul><h2 id="è®¿é—®ç‰¹ç‚¹"><a href="#è®¿é—®ç‰¹ç‚¹" class="headerlink" title="è®¿é—®ç‰¹ç‚¹"></a>è®¿é—®ç‰¹ç‚¹</h2><ul><li>å†…éƒ¨ç±»å¯ä»¥ç›´æ¥è®¿é—®å¤–éƒ¨ç±»çš„æˆå‘˜ï¼ŒåŒ…æ‹¬ç§æœ‰</li><li>å¤–éƒ¨ç±»è¦è®¿é—®å†…éƒ¨ç±»çš„æˆå‘˜ï¼Œå¿…é¡»åˆ›å»ºå¯¹è±¡ï¼Œç”¨å†…éƒ¨ç±»å¯¹è±¡è®¿é—®å†…éƒ¨ç±»çš„æˆå‘˜</li></ul><h2 id="åˆ†ç±»"><a href="#åˆ†ç±»" class="headerlink" title="åˆ†ç±»"></a>åˆ†ç±»</h2><ul><li>æˆå‘˜å†…éƒ¨ç±»</li><li>é™æ€å†…éƒ¨ç±»</li><li>å±€éƒ¨å†…éƒ¨ç±»</li><li>åŒ¿åå†…éƒ¨ç±»</li></ul><h2 id="æˆå‘˜å†…éƒ¨ç±»"><a href="#æˆå‘˜å†…éƒ¨ç±»" class="headerlink" title="æˆå‘˜å†…éƒ¨ç±»"></a>æˆå‘˜å†…éƒ¨ç±»</h2><ul><li>å†™åœ¨æˆå‘˜ä½ç½®çš„ï¼Œå±äºå¤–éƒ¨ç±»çš„æˆå‘˜</li></ul><h3 id="è·å–æ–¹å¼"><a href="#è·å–æ–¹å¼" class="headerlink" title="è·å–æ–¹å¼"></a>è·å–æ–¹å¼</h3><ul><li>æ–¹å¼ä¸€<ul><li>å½“æˆå‘˜å†…éƒ¨ç±»è¢«privateä¿®é¥°æ—¶ï¼Œåœ¨å¤–éƒ¨ç±»ç¼–å†™æ–¹æ³•ï¼Œè¿”å›å†…éƒ¨ç±»å¯¹è±¡ï¼Œè¾¾åˆ°å¯¹å¤–æä¾›å†…éƒ¨ç±»å¯¹è±¡ï¼ˆç±»ä¼¼set&#x2F;getæ–¹æ³•ï¼‰</li></ul></li><li>æ–¹å¼äºŒ<ul><li>å½“æˆå‘˜å†…éƒ¨ç±»è¢«éç§æœ‰ä¿®é¥°æ—¶ï¼Œç›´æ¥åˆ›å»ºå¯¹è±¡ï¼š<code>Outer.Inner oi = new Outer().new Inner();</code></li></ul></li></ul><h3 id="æ³¨æ„-3"><a href="#æ³¨æ„-3" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h3><ul><li>å¤–éƒ¨ç±»æˆå‘˜å˜é‡å’Œå†…éƒ¨ç±»æˆå‘˜å˜é‡é‡åæ—¶ï¼Œåœ¨å†…éƒ¨ç±»å¦‚ä½•è®¿é—®ï¼Ÿ<code>Sout(Outer.this.å˜é‡å)</code></li><li>å†…éƒ¨ç±»è®¿é—®å¤–éƒ¨ç±»çš„æ–¹æ³•æ—¶ï¼Œè¦ç”¨<code>Outer.this.æ–¹æ³•å()</code></li></ul><h2 id="é™æ€å†…éƒ¨ç±»"><a href="#é™æ€å†…éƒ¨ç±»" class="headerlink" title="é™æ€å†…éƒ¨ç±»"></a>é™æ€å†…éƒ¨ç±»</h2><h3 id="è·å–æ–¹å¼-1"><a href="#è·å–æ–¹å¼-1" class="headerlink" title="è·å–æ–¹å¼"></a>è·å–æ–¹å¼</h3><ul><li><code>Outer.Inner oi = new Outer.Inner()</code></li></ul><h3 id="è°ƒç”¨é™æ€å†…éƒ¨ç±»ä¸­çš„æ–¹æ³•"><a href="#è°ƒç”¨é™æ€å†…éƒ¨ç±»ä¸­çš„æ–¹æ³•" class="headerlink" title="è°ƒç”¨é™æ€å†…éƒ¨ç±»ä¸­çš„æ–¹æ³•"></a>è°ƒç”¨é™æ€å†…éƒ¨ç±»ä¸­çš„æ–¹æ³•</h3><ul><li>éé™æ€æ–¹æ³•ï¼šå…ˆåˆ›å»ºå¯¹è±¡ï¼Œç”¨å¯¹è±¡è°ƒç”¨</li><li>é™æ€æ–¹æ³•ï¼šå¤–éƒ¨ç±»å.å†…éƒ¨ç±»å.æ–¹æ³•å();</li></ul><h3 id="æ³¨æ„-4"><a href="#æ³¨æ„-4" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h3><ul><li>é™æ€å†…éƒ¨ç±»å¯ä»¥ç›´æ¥è®¿é—®å¤–éƒ¨ç±»çš„é™æ€æˆå‘˜ã€‚</li><li>é™æ€å†…éƒ¨ç±»ä¸å¯ä»¥ç›´æ¥è®¿é—®å¤–éƒ¨ç±»çš„éé™æ€æˆå‘˜ï¼Œå¦‚æœè¦è®¿é—®éœ€è¦åˆ›å»ºå¤–éƒ¨ç±»çš„å¯¹è±¡ã€‚</li><li>é™æ€å†…éƒ¨ç±»ä¸­æ²¡æœ‰<code>Outer.this</code>ï¼Œå†…å¤–éƒ¨ç±»å˜é‡é‡åè¦è®¿é—®å¤–éƒ¨ç±»å˜é‡ä½¿ç”¨ï¼š<code>å¤–éƒ¨ç±».å˜é‡å</code></li></ul><h2 id="å±€éƒ¨å†…éƒ¨ç±»"><a href="#å±€éƒ¨å†…éƒ¨ç±»" class="headerlink" title="å±€éƒ¨å†…éƒ¨ç±»"></a>å±€éƒ¨å†…éƒ¨ç±»</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">class å¤–éƒ¨ç±»å &#123;</span><br><span class="line">æ•°æ®ç±»å‹ å˜é‡å;</span><br><span class="line"></span><br><span class="line">ä¿®é¥°ç¬¦ è¿”å›å€¼ç±»å‹ æ–¹æ³•å(å‚æ•°åˆ—è¡¨) &#123;</span><br><span class="line"><span class="comment">// â€¦</span></span><br><span class="line">class å†…éƒ¨ç±» &#123;</span><br><span class="line"><span class="comment">// æˆå‘˜å˜é‡</span></span><br><span class="line"><span class="comment">// æˆå‘˜æ–¹æ³•</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åŒ¿åå†…éƒ¨ç±»-star"><a href="#åŒ¿åå†…éƒ¨ç±»-star" class="headerlink" title="åŒ¿åå†…éƒ¨ç±»:star:"></a>åŒ¿åå†…éƒ¨ç±»:star:</h2><h3 id="æ¦‚å¿µ-3"><a href="#æ¦‚å¿µ-3" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h3><ul><li>éšè—äº†åå­—çš„å†…éƒ¨ç±»ï¼Œå¯ä»¥å†™åœ¨æˆå‘˜ä½ç½®ï¼Œä¹Ÿå¯ä»¥å†™åœ¨å±€éƒ¨ä½ç½®</li></ul><h3 id="æ ¼å¼-1"><a href="#æ ¼å¼-1" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> ç±»å/æ¥å£å() &#123;</span><br><span class="line">    é‡å†™æ–¹æ³•;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ ¼å¼çš„ç»†èŠ‚"><a href="#æ ¼å¼çš„ç»†èŠ‚" class="headerlink" title="æ ¼å¼çš„ç»†èŠ‚"></a>æ ¼å¼çš„ç»†èŠ‚</h3><ul><li>åŒ…å«äº†ç»§æ‰¿æˆ–å®ç°ï¼Œæ–¹æ³•é‡å†™ï¼Œåˆ›å»ºå¯¹è±¡ã€‚</li><li>æ•´ä½“å°±æ˜¯ä¸€ä¸ªç±»çš„å­ç±»æˆ–è€…æ¥å£çš„å®ç°ç±»å¯¹è±¡</li></ul><h3 id="ä½¿ç”¨åœºæ™¯-1"><a href="#ä½¿ç”¨åœºæ™¯-1" class="headerlink" title="ä½¿ç”¨åœºæ™¯"></a>ä½¿ç”¨åœºæ™¯</h3><ul><li>å½“æ–¹æ³•çš„å‚æ•°æ˜¯æ¥å£æˆ–è€…ç±»æ—¶ï¼Œä»¥æ¥å£ä¸ºä¾‹ï¼Œå¯ä»¥ä¼ é€’è¿™ä¸ªæ¥å£çš„å®ç°ç±»å¯¹è±¡ï¼Œå¦‚æœå®ç°ç±»åªè¦ä½¿ç”¨ä¸€æ¬¡ï¼Œå°±å¯ä»¥ç”¨åŒ¿åå†…éƒ¨ç±»ç®€åŒ–ä»£ç </li></ul><h1 id="æ³›å‹"><a href="#æ³›å‹" class="headerlink" title="æ³›å‹"></a>æ³›å‹</h1><h2 id="æ¦‚è¿°-1"><a href="#æ¦‚è¿°-1" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><ul><li><p>æ³›å‹çš„ä»‹ç»</p><p>â€‹æ³›å‹æ˜¯JDK5ä¸­å¼•å…¥çš„ç‰¹æ€§ï¼Œå®ƒæä¾›äº†ç¼–è¯‘æ—¶ç±»å‹å®‰å…¨æ£€æµ‹æœºåˆ¶</p></li><li><p>æ³›å‹çš„å¥½å¤„</p><ol><li>æŠŠè¿è¡Œæ—¶æœŸçš„é—®é¢˜æå‰åˆ°äº†ç¼–è¯‘æœŸé—´</li><li>é¿å…äº†å¼ºåˆ¶ç±»å‹è½¬æ¢</li></ol></li><li><p>ç”¨äºçº¦æŸé›†åˆä¸­å­˜å‚¨å…ƒç´ çš„æ•°æ®ç±»å‹</p></li></ul><h2 id="ç»†èŠ‚-1"><a href="#ç»†èŠ‚-1" class="headerlink" title="ç»†èŠ‚"></a>ç»†èŠ‚</h2><ul><li><p>æ³›å‹ä¸­ä¸èƒ½å†™åŸºæœ¬æ•°æ®ç±»å‹</p></li><li><p>æŒ‡å®šæ³›å‹çš„å…·ä½“ç±»å‹åï¼Œä¼ é€’æ•°æ®æ—¶ï¼Œå¯ä»¥ä¼ å…¥è¯¥ç±»å‹æˆ–è€…å…¶å­ç±»ç±»å‹</p></li><li><p>å¦‚æœä¸å†™æ³›å‹ï¼Œç±»å‹é»˜è®¤æ˜¯Objectï¼Œè¿™æ ·å¤šæ€çš„å¼Šç«¯å°±æ˜¾ç°å‡ºæ¥ï¼šä¸èƒ½è°ƒç”¨å­ç±»ç‰¹æœ‰çš„åŠŸèƒ½</p></li><li><p>ä¸èƒ½ç›´æ¥åœ¨é™æ€æ–¹æ³•ä¸­ä½¿ç”¨ç±»çš„æ³›å‹ç±»å‹å‚æ•°ï¼Œä½†é™æ€æ–¹æ³•æœ¬èº«å¯ä»¥å£°æ˜è‡ªå·±çš„æ³›å‹ç±»å‹å‚æ•°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyClass</span>&lt;T&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é™æ€æ–¹æ³•ä¸èƒ½ç›´æ¥ä½¿ç”¨ç±»çš„æ³›å‹å‚æ•° T</span></span><br><span class="line">    <span class="comment">// public static void print(T value) &#123;</span></span><br><span class="line">    <span class="comment">//     System.out.println(value);</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// é™æ€æ–¹æ³•å¯ä»¥å®šä¹‰è‡ªå·±çš„æ³›å‹å‚æ•°</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;U&gt; <span class="keyword">void</span> <span class="title function_">print</span><span class="params">(U value)</span> &#123;</span><br><span class="line">        System.out.println(value);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å› ä¸ºé™æ€æ–¹æ³•å±äºç±»æœ¬èº«è€Œä¸æ˜¯ç±»çš„å®ä¾‹ã€‚ä½†é™æ€æ–¹æ³•å¯ä»¥å£°æ˜è‡ªå·±çš„æ³›å‹å‚æ•°ï¼Œä»è€Œå®ç°ä¸æ³›å‹ç›¸å…³çš„åŠŸèƒ½ã€‚</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="æ³›å‹ç±»"><a href="#æ³›å‹ç±»" class="headerlink" title="æ³›å‹ç±»"></a>æ³›å‹ç±»</h2><ul><li><p>å½“å®šä¹‰ä¸€ä¸ªç±»æ—¶ï¼ŒæŸä¸ªå˜é‡çš„ç±»å‹ä¸ç¡®å®šï¼Œå°±å¯ä»¥ä½¿ç”¨å¸¦æœ‰æ³›å‹çš„ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ä¿®é¥°ç¬¦ class ç±»å&lt;E&gt;&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="æ³›å‹æ–¹æ³•"><a href="#æ³›å‹æ–¹æ³•" class="headerlink" title="æ³›å‹æ–¹æ³•"></a>æ³›å‹æ–¹æ³•</h2><ul><li><p>å½“æ–¹æ³•ä¸­å½¢å‚ç±»å‹ä¸ç¡®å®šçš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨æ³›å‹</p></li><li><p>åªèƒ½åœ¨æœ¬æ–¹æ³•ä¸­ä½¿ç”¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ä¿®é¥°ç¬¦&lt;E&gt; è¿”å›ç±»å‹ æ–¹æ³•å(å‚æ•°...)&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="æ³›å‹æ¥å£"><a href="#æ³›å‹æ¥å£" class="headerlink" title="æ³›å‹æ¥å£"></a>æ³›å‹æ¥å£</h2><ul><li><p>å½“æ¥å£ä¸­ç±»å‹ä¸ç¡®å®šçš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨æ³›å‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ä¿®é¥°ç¬¦ interface æ¥å£å&lt;E&gt;&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="æ³›å‹æ¥å£çš„ä½¿ç”¨"><a href="#æ³›å‹æ¥å£çš„ä½¿ç”¨" class="headerlink" title="æ³›å‹æ¥å£çš„ä½¿ç”¨"></a>æ³›å‹æ¥å£çš„ä½¿ç”¨</h3><ul><li><p>å®ç°ç±»ç»™å‡ºå…·ä½“çš„æ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyList</span> <span class="keyword">implements</span> <span class="title class_">List</span>&lt;æ­¤å¤„ç»™å‡ºå…·ä½“çš„ç±»å‹&gt; &#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å®ç°ç±»å»¶ç»­æ³›å‹ï¼Œåˆ›å»ºå¯¹è±¡æ—¶åœ¨ç¡®å®š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyList</span>&lt;E&gt; <span class="keyword">implements</span> <span class="title class_">List</span>&lt;E&gt; &#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MyList&lt;æ­¤å¤„ç»™å‡ºå…·ä½“çš„ç±»å‹&gt; list = <span class="keyword">new</span> <span class="title class_">MyList</span>&lt;&gt;&#123;&#125;;</span><br></pre></td></tr></table></figure></li></ul><h2 id="æ³›å‹çš„ä¸å¯ç»§æ‰¿æ€§å’Œé€šé…ç¬¦"><a href="#æ³›å‹çš„ä¸å¯ç»§æ‰¿æ€§å’Œé€šé…ç¬¦" class="headerlink" title="æ³›å‹çš„ä¸å¯ç»§æ‰¿æ€§å’Œé€šé…ç¬¦"></a>æ³›å‹çš„ä¸å¯ç»§æ‰¿æ€§å’Œé€šé…ç¬¦</h2><h3 id="ä¸å¯ç»§æ‰¿æ€§"><a href="#ä¸å¯ç»§æ‰¿æ€§" class="headerlink" title="ä¸å¯ç»§æ‰¿æ€§"></a>ä¸å¯ç»§æ‰¿æ€§</h3><ul><li><p>æ³›å‹ä¸å…·å¤‡ç»§æ‰¿æ€§(ä¸€æ—¦Eçš„ç±»å‹ç¡®å®šï¼Œä¾¿åªèƒ½ä¼ é€’æ­¤ç±»å‹)ï¼Œä½†æ˜¯æ•°æ®å…·å¤‡ç»§æ‰¿æ€§</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        ArrayList&lt;Ye&gt; list1 = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        ArrayList&lt;Fu&gt; list2 = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        ArrayList&lt;Zi&gt; list3 = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//æ³›å‹ä¸å…·å¤‡ç»§æ‰¿æ€§</span></span><br><span class="line">        method(list1);</span><br><span class="line">        method(list2); <span class="comment">// æŠ¥é”™ï¼Œåªèƒ½ä¼ é€’ArrayList&lt;Ye&gt;</span></span><br><span class="line">        method(list3); <span class="comment">// æŠ¥é”™ï¼Œåªèƒ½ä¼ é€’ArrayList&lt;Ye&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//æ•°æ®å…·å¤‡ç»§æ‰¿æ€§</span></span><br><span class="line">        list1.add(<span class="keyword">new</span> <span class="title class_">Fu</span>());  <span class="comment">// å¯ä»¥å°†å­ç±»å¯¹è±¡ä¼ é€’è‡³çˆ¶ç±»é›†åˆä¸­</span></span><br><span class="line"></span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">(ArrayList&lt;Ye&gt; list)</span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Ye</span>&#123;&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Fu</span> <span class="keyword">extends</span> <span class="title class_">Ye</span>&#123;&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Zi</span> <span class="keyword">extends</span> <span class="title class_">Fu</span>&#123;&#125;</span><br></pre></td></tr></table></figure></li><li><p>é‚£ä¹ˆæ­¤æ—¶æˆ‘å°±æ˜¯æƒ³è¦ç”¨methodæ–¹æ³•æ·»åŠ ArrayList<Fu>å’Œ ArrayList<Zi>é›†åˆåº”è¯¥æ€ä¹ˆåŠï¼Ÿ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¯¹methodæ–¹æ³•è¿›è¡Œä¿®æ”¹</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span>&lt;E&gt; <span class="keyword">void</span> <span class="title function_">method</span><span class="params">(ArrayList&lt;E&gt; list)</span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä½†æ˜¯è¿™æ ·æœ‰ä¸€ä¸ªå¼Šç«¯ï¼Œmethodæ–¹æ³•ä¸ä»…ArrayList&lt;Ye/Fu/Zi&gt;å¯ä»¥æ¥æ”¶ï¼Œè€Œä¸”ArrayList&lt;Student&gt;ä¹Ÿå¯ä»¥æ¥æ”¶</span></span><br><span class="line"><span class="comment">//é‚£æˆ‘å°±æ˜¯åªæƒ³æ¥æ”¶ArrayList&lt;Ye/Fu/Zi&gt;ï¼Œåº”è¯¥æ€ä¹ˆåŠå‘¢?</span></span><br><span class="line"><span class="comment">//æ³›å‹çš„é€šé…ç¬¦ å¯ä»¥è§£å†³</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="æ³›å‹çš„é€šé…ç¬¦"><a href="#æ³›å‹çš„é€šé…ç¬¦" class="headerlink" title="æ³›å‹çš„é€šé…ç¬¦"></a>æ³›å‹çš„é€šé…ç¬¦</h3><ul><li><p>æ¦‚è¿°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">?ä¹Ÿè¡¨ç¤ºä¸ç¡®å®šçš„ç±»å‹ï¼Œå®ƒå¯ä»¥è¿›è¡Œç±»å‹çš„é™å®š</span><br><span class="line">? <span class="keyword">extends</span> <span class="title class_">E</span>: è¡¨ç¤ºå¯ä»¥ä¼ é€’Eæˆ–è€…Eæ‰€æœ‰çš„å­ç±»ç±»å‹</span><br><span class="line">? <span class="built_in">super</span> E: è¡¨ç¤ºå¯ä»¥ä¼ é€’Eæˆ–è€…Eæ‰€æœ‰çš„çˆ¶ç±»ç±»å‹</span><br><span class="line">    </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        ArrayList&lt;Ye&gt; list1 = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        ArrayList&lt;Fu&gt; list2 = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        ArrayList&lt;Zi&gt; list3 = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        ArrayList&lt;Student&gt; list4 = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//æ³›å‹ä¸å…·å¤‡ç»§æ‰¿æ€§</span></span><br><span class="line">        method(list1);</span><br><span class="line">        method(list2); </span><br><span class="line">        method(list3); </span><br><span class="line"></span><br><span class="line">        method(list4); <span class="comment">// æŠ¥é”™ï¼Œå› ä¸ºä½¿ç”¨é€šé…ç¬¦åï¼Œåªèƒ½ä¼ é€’Yeå’Œå®ƒæ‰€æœ‰çš„å­ç±»ç±»å‹</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//æ³¨æ„ï¼šåœ¨æ–¹æ³•ä¸­ä½¿ç”¨æ³›å‹çš„é€šé…ç¬¦æ—¶ï¼Œä¿®é¥°ç¬¦åé¢çš„&lt;E&gt;å»æ‰ä¸ç”¨å†™</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">(ArrayList&lt;? extends Ye&gt; list)</span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>&#123;&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Ye</span>&#123;&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Fu</span> <span class="keyword">extends</span> <span class="title class_">Ye</span>&#123;&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Zi</span> <span class="keyword">extends</span> <span class="title class_">Fu</span>&#123;&#125;</span><br></pre></td></tr></table></figure></li><li><p>åº”ç”¨åœºæ™¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>å¦‚æœæˆ‘ä»¬åœ¨å®šä¹‰ç±»ã€æ–¹æ³•ã€æ¥å£çš„æ—¶å€™ï¼Œå¦‚æœç±»å‹ä¸ç¡®å®šï¼Œå°±å¯ä»¥å®šä¹‰æ³›å‹ç±»ã€æ³›å‹æ–¹æ³•ã€æ³›å‹æ¥å£</span><br><span class="line"><span class="number">2.</span>å¦‚æœç±»å‹ä¸ç¡®å®šï¼Œä½†æ˜¯èƒ½çŸ¥é“ä»¥ååªèƒ½ä¼ é€’æŸä¸ªç»§æ‰¿ä½“ç³»ä¸­çš„ï¼Œå°±å¯ä»¥ä½¿ç”¨æ³›å‹çš„é€šé…ç¬¦</span><br><span class="line">å…³é”®ç‚¹ï¼šæ³›å‹çš„é€šé…ç¬¦å¯ä»¥é™å®šç±»å‹çš„èŒƒå›´</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> JavaSE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœç´¢å¼•æ“é¡¹ç›®</title>
      <link href="/Project/searchplatform/"/>
      <url>/Project/searchplatform/</url>
      
        <content type="html"><![CDATA[<h1 id="æœç´¢å¼•æ“é¡¹ç›®"><a href="#æœç´¢å¼•æ“é¡¹ç›®" class="headerlink" title="æœç´¢å¼•æ“é¡¹ç›®"></a>æœç´¢å¼•æ“é¡¹ç›®</h1><h2 id="å¸–å­æœç´¢"><a href="#å¸–å­æœç´¢" class="headerlink" title="å¸–å­æœç´¢"></a>å¸–å­æœç´¢</h2><h3 id="æ•°æ®åŒæ­¥"><a href="#æ•°æ®åŒæ­¥" class="headerlink" title="æ•°æ®åŒæ­¥"></a>æ•°æ®åŒæ­¥</h3><ul><li>å…¨é‡åŒæ­¥è‡³ES  é¡¹ç›®å¯åŠ¨æ—¶å°†æ•°æ®åº“æ•°æ®å­˜è‡³ES</li><li>å®šæ—¶å¢é‡åŒæ­¥è‡³ES  æ¯ä¸€åˆ†é’Ÿè¿›è¡Œä¿å­˜ ä¿å­˜æ—¶åˆ¤æ–­æ—¶é—´ é¿å…æ•°æ®é‡å¤ä¿å­˜</li></ul><h3 id="æœç´¢"><a href="#æœç´¢" class="headerlink" title="æœç´¢"></a>æœç´¢</h3><ul><li>ä½¿ç”¨eså®ç°å¿«é€Ÿæœç´¢</li></ul><h2 id="ç”¨æˆ·æœç´¢"><a href="#ç”¨æˆ·æœç´¢" class="headerlink" title="ç”¨æˆ·æœç´¢"></a>ç”¨æˆ·æœç´¢</h2><h3 id="æ•°æ®åŒæ­¥-1"><a href="#æ•°æ®åŒæ­¥-1" class="headerlink" title="æ•°æ®åŒæ­¥"></a>æ•°æ®åŒæ­¥</h3><ul><li>å…¨é‡åŒæ­¥è‡³ES é¡¹ç›®å¯åŠ¨æ—¶å°†æ•°æ®åº“æ•°æ®å­˜è‡³ES</li><li>å®æ—¶å¢é‡åŒæ­¥è‡³ES ç”¨æˆ·ä¿¡æ¯å‘ç”Ÿæ”¹å˜ç«‹åˆ»å°†æ•°æ®å­˜è‡³ES</li></ul><h3 id="æœç´¢-1"><a href="#æœç´¢-1" class="headerlink" title="æœç´¢"></a>æœç´¢</h3><ul><li>ä½¿ç”¨eså®ç°å¿«é€Ÿæœç´¢</li></ul><h3 id="å®ç°è¿‡ç¨‹"><a href="#å®ç°è¿‡ç¨‹" class="headerlink" title="å®ç°è¿‡ç¨‹"></a>å®ç°è¿‡ç¨‹</h3><p>1.åˆ›å»ºuserçš„eså®ä½“ç±»</p><ul><li><code>UserEsDao</code>  ç»§æ‰¿<code>ElasticsearchRepository</code>å®ç°åŸºæœ¬çš„CRUDæ“ä½œ</li><li><code>UserEsDTO</code>  ç”¨æˆ·ESåŒ…è£…ç±», ä¸ESä¸­useræ–‡æ¡£ç›¸å¯¹åº”</li></ul><p>2.ä½¿ç”¨<code>dev tools</code>åˆ›å»ºuseræ–‡æ¡£</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">PUT user_v1</span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;aliases&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;user&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;mappings&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;properties&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;userName&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;analyzer&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ik_max_word&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;search_analyzer&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ik_smart&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;fields&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;keyword&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;keyword&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;ignore_above&quot;</span><span class="punctuation">:</span> <span class="number">64</span></span><br><span class="line">          <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;userProfile&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;analyzer&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ik_max_word&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;search_analyzer&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ik_smart&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;fields&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;keyword&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;keyword&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;ignore_above&quot;</span><span class="punctuation">:</span> <span class="number">256</span></span><br><span class="line">          <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;userAvatar&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;keyword&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;createTime&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;date&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;updateTime&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;date&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;isDelete&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;keyword&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>3.å®ç°å¯åŠ¨æ—¶å…¨é‡åŒæ­¥è‡³ES</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FullSyncUserToEs</span> <span class="keyword">implements</span> <span class="title class_">CommandLineRunner</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> UserEsDao userEsDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">(String... args)</span> &#123;</span><br><span class="line">        <span class="comment">// å…¨é‡åŒæ­¥ä¹‹å‰åˆ é™¤esä¸­å…¨éƒ¨æ•°æ®</span></span><br><span class="line">        userEsDao.deleteAll();</span><br><span class="line"></span><br><span class="line">        List&lt;User&gt; userList = userService.list();</span><br><span class="line">        <span class="keyword">if</span> (CollUtil.isEmpty(userList)) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        List&lt;UserEsDTO&gt; userEsDTOList = userList.stream().map(UserEsDTO::objToDto).collect(Collectors.toList());</span><br><span class="line">        <span class="keyword">final</span> <span class="type">int</span> <span class="variable">pageSize</span> <span class="operator">=</span> <span class="number">500</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">total</span> <span class="operator">=</span> userEsDTOList.size();</span><br><span class="line">        log.info(<span class="string">&quot;FullSyncUserToEs start, total &#123;&#125;&quot;</span>, total);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; total; i += pageSize) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">end</span> <span class="operator">=</span> Math.min(i + pageSize, total);</span><br><span class="line">            log.info(<span class="string">&quot;sync from &#123;&#125; to &#123;&#125;&quot;</span>, i, end);</span><br><span class="line">            userEsDao.saveAll(userEsDTOList.subList(i, end));</span><br><span class="line">        &#125;</span><br><span class="line">        log.info(<span class="string">&quot;FullSyncUserToEs end, total &#123;&#125;&quot;</span>, total);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>4.å®ç°ç”¨æˆ·æ•°æ®å¢é‡åŒæ­¥è‡³ES</p><blockquote><p>JDK17ä½¿ç”¨Canalçš„æ³¨æ„äº‹é¡¹</p><p>å¯åŠ¨æ—¶æŠ¥é”™:    Error: Could not create the Java Virtual Machine.</p><p>â€‹Error: A fatal exception has occurred. Program will exit.</p><p>å› ä¸ºJDK17ä¸æ”¯æŒPermSizeå‚æ•°æ•…éœ€è¦å°†start.batä¸­çš„:</p><p>set JAVA_MEM_OPTS&#x3D; -Xms128m -Xmx512m -XX:PermSize&#x3D;128m   ä¿®æ”¹ä¸º</p><p>set JAVA_MEM_OPTS&#x3D;-Xms128m -Xmx512m</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IncSyncUserToEs</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> UserEsDao userEsDao;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> CanalConnector connector;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostConstruct</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span>  <span class="title function_">start</span><span class="params">()</span> &#123;</span><br><span class="line">        connector = CanalConnectors.newSingleConnector(<span class="keyword">new</span> <span class="title class_">InetSocketAddress</span>(AddressUtils.getHostIp(),</span><br><span class="line">                <span class="number">11111</span>), <span class="string">&quot;example&quot;</span>, <span class="string">&quot;&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="built_in">this</span>::run).start(); <span class="comment">// å¼€ä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹æ‰§è¡Œæ•°æ®åŒæ­¥, é¿å…é˜»å¡springbootä¸»çº¿ç¨‹</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿›è¡Œå¢é‡åŒæ­¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">batchSize</span> <span class="operator">=</span> <span class="number">1000</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">emptyCount</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connector.connect();</span><br><span class="line">            connector.subscribe(<span class="string">&quot;my_db.user&quot;</span>); <span class="comment">// è®¢é˜…userè¡¨</span></span><br><span class="line">            connector.rollback();</span><br><span class="line">            <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">                <span class="type">Message</span> <span class="variable">message</span> <span class="operator">=</span> connector.getWithoutAck(batchSize);</span><br><span class="line">                <span class="type">long</span> <span class="variable">batchId</span> <span class="operator">=</span> message.getId();</span><br><span class="line">                <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> message.getEntries().size();</span><br><span class="line">                <span class="keyword">if</span> (batchId == -<span class="number">1</span> || size == <span class="number">0</span>) &#123;</span><br><span class="line">                    emptyCount++;</span><br><span class="line">                    <span class="keyword">if</span> (emptyCount &gt; <span class="number">3600</span>) &#123;  <span class="comment">// æ¯ä¸€å°æ—¶é‡æ–°å¼€å§‹è®¡æ•°</span></span><br><span class="line">                        emptyCount = <span class="number">0</span>;</span><br><span class="line">                        log.info(<span class="string">&quot;empty count : &#123;&#125;&quot;</span>, emptyCount);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        Thread.currentThread().interrupt();</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    emptyCount = <span class="number">0</span>;</span><br><span class="line">                    processEntries(message.getEntries());</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                connector.ack(batchId);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;empty too many times, exit&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            connector.disconnect();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">processEntries</span><span class="params">(List&lt;Entry&gt; entries)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (Entry entry : entries) &#123;</span><br><span class="line">            <span class="keyword">if</span> (entry.getEntryType() == EntryType.TRANSACTIONBEGIN || entry.getEntryType() == EntryType.TRANSACTIONEND) &#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            RowChange rowChange;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                rowChange = RowChange.parseFrom(entry.getStoreValue());</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;ERROR ## parser of eromanga-event has an error , data:&quot;</span> + entry.toString(), e);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="type">EventType</span> <span class="variable">eventType</span> <span class="operator">=</span> rowChange.getEventType();</span><br><span class="line">            <span class="keyword">for</span> (RowData rowData : rowChange.getRowDatasList()) &#123;</span><br><span class="line">                <span class="keyword">if</span> (eventType == EventType.INSERT) &#123;</span><br><span class="line">                    syncToEs(rowData.getAfterColumnsList(), <span class="string">&quot;insert&quot;</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (eventType == EventType.UPDATE) &#123;</span><br><span class="line">                    syncToEs(rowData.getAfterColumnsList(), <span class="string">&quot;update&quot;</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (eventType == EventType.DELETE) &#123;</span><br><span class="line">                    syncToEs(rowData.getBeforeColumnsList(), <span class="string">&quot;delete&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">syncToEs</span><span class="params">(List&lt;Column&gt; columns, String eventType)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;insert&quot;</span>.equals(eventType) || <span class="string">&quot;update&quot;</span>.equals(eventType)) &#123;</span><br><span class="line">            <span class="comment">// è·å–è¦æ›´æ–°æˆ–æ·»åŠ çš„ç”¨æˆ·æ•°æ®</span></span><br><span class="line">            Map&lt;String, Object&gt; columnMap = getColumnMap(columns);</span><br><span class="line">            <span class="type">UserEsDTO</span> <span class="variable">userEsDTO</span> <span class="operator">=</span> BeanUtil.copyProperties(columnMap, UserEsDTO.class);</span><br><span class="line">            log.info( <span class="string">&quot;&#123;&#125;å‰çš„æ•°æ®æ€»æ•°: &#123;&#125;&quot;</span>, eventType, userEsDao.count());</span><br><span class="line">            userEsDao.save(userEsDTO);</span><br><span class="line">            log.info( <span class="string">&quot;&#123;&#125;åçš„æ•°æ®æ€»æ•°: &#123;&#125;&quot;</span>, eventType, userEsDao.count());</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">&quot;delete&quot;</span>.equals(eventType)) &#123;</span><br><span class="line">            <span class="comment">// è·å–è¦åˆ é™¤çš„ç”¨æˆ·id</span></span><br><span class="line">            <span class="type">long</span> <span class="variable">id</span> <span class="operator">=</span> Long.parseLong(getColumnValue(columns, <span class="string">&quot;id&quot;</span>));</span><br><span class="line">            log.info( <span class="string">&quot;&#123;&#125;å‰çš„æ•°æ®æ€»æ•°: &#123;&#125;&quot;</span>, eventType, userEsDao.count());</span><br><span class="line">            userEsDao.deleteById(id);</span><br><span class="line">            log.info( <span class="string">&quot;&#123;&#125;åçš„æ•°æ®æ€»æ•°: &#123;&#125;&quot;</span>, eventType, userEsDao.count());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, Object&gt; <span class="title function_">getColumnMap</span><span class="params">(List&lt;Column&gt; columns)</span> &#123;</span><br><span class="line">        Map&lt;String, Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (Column column : columns) &#123;</span><br><span class="line">            map.put(column.getName(), column.getValue());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> map;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String <span class="title function_">getColumnValue</span><span class="params">(List&lt;Column&gt; columns, String columnName)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (Column column : columns) &#123;</span><br><span class="line">            <span class="keyword">if</span> (column.getName().equals(columnName)) &#123;</span><br><span class="line">                <span class="keyword">return</span> column.getValue();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PreDestroy</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">stop</span><span class="params">()</span> &#123;</span><br><span class="line">        connector.disconnect();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="5"><li>å®ç°eså¿«é€Ÿæœç´¢</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Page&lt;User&gt; <span class="title function_">searchFromEs</span><span class="params">(UserQueryRequest userQueryRequest)</span> &#123;</span><br><span class="line">        <span class="type">Long</span> <span class="variable">id</span> <span class="operator">=</span> userQueryRequest.getId();</span><br><span class="line">        <span class="type">String</span> <span class="variable">userName</span> <span class="operator">=</span> userQueryRequest.getUserName();</span><br><span class="line">        <span class="type">String</span> <span class="variable">userProfile</span> <span class="operator">=</span> userQueryRequest.getUserProfile();</span><br><span class="line">        <span class="comment">// es èµ·å§‹é¡µä¸º 0</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">current</span> <span class="operator">=</span> userQueryRequest.getCurrent() - <span class="number">1</span>;</span><br><span class="line">        <span class="type">long</span> <span class="variable">pageSize</span> <span class="operator">=</span> userQueryRequest.getPageSize();</span><br><span class="line">        <span class="type">String</span> <span class="variable">sortField</span> <span class="operator">=</span> userQueryRequest.getSortField();</span><br><span class="line">        <span class="type">String</span> <span class="variable">sortOrder</span> <span class="operator">=</span> userQueryRequest.getSortOrder();</span><br><span class="line">        <span class="type">BoolQueryBuilder</span> <span class="variable">boolQueryBuilder</span> <span class="operator">=</span> QueryBuilders.boolQuery();</span><br><span class="line">        <span class="comment">// è¿‡æ»¤</span></span><br><span class="line">        boolQueryBuilder.filter(QueryBuilders.termQuery(<span class="string">&quot;isDelete&quot;</span>, <span class="number">0</span>));</span><br><span class="line">        <span class="keyword">if</span> (id != <span class="literal">null</span>) &#123;</span><br><span class="line">            boolQueryBuilder.filter(QueryBuilders.termQuery(<span class="string">&quot;id&quot;</span>, id));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æŒ‰å…³é”®è¯æ£€ç´¢</span></span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isNotBlank(userName)) &#123;</span><br><span class="line">            boolQueryBuilder.should(QueryBuilders.matchQuery(<span class="string">&quot;userName&quot;</span>, userName));</span><br><span class="line">            boolQueryBuilder.should(QueryBuilders.matchQuery(<span class="string">&quot;userProfile&quot;</span>, userName));</span><br><span class="line">            boolQueryBuilder.minimumShouldMatch(<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æ’åº</span></span><br><span class="line">        SortBuilder&lt;?&gt; sortBuilder = SortBuilders.scoreSort();</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isNotBlank(sortField)) &#123;</span><br><span class="line">            sortBuilder = SortBuilders.fieldSort(sortField);</span><br><span class="line">            sortBuilder.order(CommonConstant.SORT_ORDER_ASC.equals(sortOrder) ? SortOrder.ASC : SortOrder.DESC);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// åˆ†é¡µ</span></span><br><span class="line">        <span class="type">PageRequest</span> <span class="variable">pageRequest</span> <span class="operator">=</span> PageRequest.of((<span class="type">int</span>) current, (<span class="type">int</span>) pageSize);</span><br><span class="line">        <span class="comment">// æ„é€ æŸ¥è¯¢</span></span><br><span class="line">        <span class="type">NativeSearchQuery</span> <span class="variable">searchQuery</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">NativeSearchQueryBuilder</span>().withQuery(boolQueryBuilder)</span><br><span class="line">                .withPageable(pageRequest).withSorts(sortBuilder).build();</span><br><span class="line">        SearchHits&lt;UserEsDTO&gt; searchHits = elasticsearchRestTemplate.search(searchQuery, UserEsDTO.class);</span><br><span class="line">        Page&lt;User&gt; page = <span class="keyword">new</span> <span class="title class_">Page</span>&lt;&gt;();</span><br><span class="line">        page.setTotal(searchHits.getTotalHits());</span><br><span class="line">        List&lt;User&gt; resourceList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">// æŸ¥å‡ºç»“æœåï¼Œä» db è·å–æœ€æ–°åŠ¨æ€æ•°æ®</span></span><br><span class="line">        <span class="keyword">if</span> (searchHits.hasSearchHits()) &#123;</span><br><span class="line">            List&lt;SearchHit&lt;UserEsDTO&gt;&gt; searchHitList = searchHits.getSearchHits();</span><br><span class="line">            List&lt;Long&gt; userIdList = searchHitList.stream().map(searchHit -&gt; searchHit.getContent().getId())</span><br><span class="line">                    .collect(Collectors.toList());</span><br><span class="line">            List&lt;User&gt; userList = baseMapper.selectBatchIds(userIdList);</span><br><span class="line">            <span class="keyword">if</span> (userList != <span class="literal">null</span>) &#123;</span><br><span class="line">                Map&lt;Long, List&lt;User&gt;&gt; idUserMap = userList.stream().collect(Collectors.groupingBy(User::getId));</span><br><span class="line">                userIdList.forEach(userId -&gt; &#123;</span><br><span class="line">                    <span class="keyword">if</span> (idUserMap.containsKey(userId)) &#123;</span><br><span class="line">                        resourceList.add(idUserMap.get(userId).get(<span class="number">0</span>));</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="comment">// ä» es æ¸…ç©º db å·²ç‰©ç†åˆ é™¤çš„æ•°æ®</span></span><br><span class="line">                        <span class="type">String</span> <span class="variable">delete</span> <span class="operator">=</span> elasticsearchRestTemplate.delete(String.valueOf(userId), UserEsDTO.class);</span><br><span class="line">                        log.info(<span class="string">&quot;delete user &#123;&#125;&quot;</span>, delete);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        page.setRecords(resourceList);</span><br><span class="line">        <span class="keyword">return</span> page;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="å…³é”®è¯é«˜äº®"><a href="#å…³é”®è¯é«˜äº®" class="headerlink" title="å…³é”®è¯é«˜äº®"></a>å…³é”®è¯é«˜äº®</h2><blockquote><p>åœ¨esæœç´¢ä¸­å¢åŠ é«˜äº®é…ç½®</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é«˜äº®</span></span><br><span class="line"><span class="type">HighlightBuilder</span> <span class="variable">highlightBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HighlightBuilder</span>();</span><br><span class="line">highlightBuilder.field(<span class="string">&quot;userName&quot;</span>);</span><br><span class="line">highlightBuilder.field(<span class="string">&quot;userProfile&quot;</span>);</span><br><span class="line"><span class="comment">//highlightBuilder.preTags(&quot;&lt;span class=&#x27;highlight&#x27;&gt;&quot;); // è®¾ç½®é«˜äº®å‰æ ‡ç­¾  å¢åŠ é«˜äº®style</span></span><br><span class="line">highlightBuilder.preTags(<span class="string">&quot;&lt;span style=\&quot;background: yellow;\&quot;&gt;&quot;</span>); <span class="comment">// è®¾ç½®é«˜äº®å‰æ ‡ç­¾  èƒŒæ™¯ä¸ºé»„è‰²</span></span><br><span class="line">highlightBuilder.postTags(<span class="string">&quot;&lt;/span&gt;&quot;</span>); <span class="comment">// è®¾ç½®é«˜äº®åæ ‡ç­¾</span></span><br><span class="line"><span class="comment">// æ„é€ æŸ¥è¯¢</span></span><br><span class="line"><span class="type">NativeSearchQuery</span> <span class="variable">searchQuery</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">NativeSearchQueryBuilder</span>()</span><br><span class="line">    .withQuery(boolQueryBuilder)</span><br><span class="line">    .withPageable(pageRequest)</span><br><span class="line">    .withSorts(sortBuilder)</span><br><span class="line">    .withHighlightBuilder(highlightBuilder) <span class="comment">// æ·»åŠ é«˜äº®</span></span><br><span class="line">    .build();</span><br></pre></td></tr></table></figure><blockquote><p>å°†é«˜äº®å­—æ®µè®¾ç½®åˆ°è¿”å›æ•°æ®ä¸­</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> idUserMap.get(userId).get(<span class="number">0</span>);</span><br><span class="line"><span class="comment">// æå–é«˜äº®å­—æ®µè®¾ç½®åˆ°userå¯¹è±¡ä¸­</span></span><br><span class="line">searchHits.forEach(searchHit -&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (searchHit.getContent().getId().equals(userId)) &#123;</span><br><span class="line">        Map&lt;String, List&lt;String&gt;&gt; highlightFields = searchHit.getHighlightFields();</span><br><span class="line">        <span class="keyword">if</span> (highlightFields.containsKey(<span class="string">&quot;userName&quot;</span>)) &#123;</span><br><span class="line">            user.setUserName(String.join(<span class="string">&quot;&quot;</span>, highlightFields.get(<span class="string">&quot;userName&quot;</span>)));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (highlightFields.containsKey(<span class="string">&quot;userProfile&quot;</span>)) &#123;</span><br><span class="line">            user.setUserProfile(String.join(<span class="string">&quot;&quot;</span>, highlightFields.get(<span class="string">&quot;userProfile&quot;</span>)));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">resourceList.add(user);</span><br></pre></td></tr></table></figure><blockquote><p>ä¾‹å­: è¿”å›å€¼å¦‚ä¸‹  æœç´¢å…³é”®è¯ â€œæ—…æ¸¸â€</p></blockquote><img src="/Project/searchplatform/image-20240717201227522.png" class="" title="image-20240717201227522"><h2 id="å‹åŠ›æµ‹è¯•"><a href="#å‹åŠ›æµ‹è¯•" class="headerlink" title="å‹åŠ›æµ‹è¯•"></a>å‹åŠ›æµ‹è¯•</h2><blockquote><p>1så†…100ä¸ªçº¿ç¨‹</p></blockquote><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;searchText&quot;</span><span class="punctuation">:</span> <span class="string">&quot;é±¼çš®&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;post&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><ul><li>ä¸ä½¿ç”¨esæ—¶:</li></ul><img src="/Project/searchplatform/image-20240717180254909.png" class="" title="image-20240717180254909"><ul><li>ä½¿ç”¨esæ—¶</li></ul><img src="/Project/searchplatform/image-20240717180622011.png" class="" title="image-20240717180622011"><h2 id="ä¸‹æ‹‰è”æƒ³è¯"><a href="#ä¸‹æ‹‰è”æƒ³è¯" class="headerlink" title="ä¸‹æ‹‰è”æƒ³è¯"></a>ä¸‹æ‹‰è”æƒ³è¯</h2><blockquote><p>äºŒæ¬¡æ›´æ–°: å®ç°äº†å…ˆå¯¹æœç´¢è¯è¿›è¡Œåˆ†è¯å†è·å–æ¨èè¯</p></blockquote><h3 id="ç”¨æˆ·éƒ¨åˆ†"><a href="#ç”¨æˆ·éƒ¨åˆ†" class="headerlink" title="ç”¨æˆ·éƒ¨åˆ†"></a>ç”¨æˆ·éƒ¨åˆ†</h3><ul><li>æ›´æ”¹esç´¢å¼•</li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">DELETE user_v1</span><br><span class="line"></span><br><span class="line">GET user_v1/_mapping</span><br><span class="line"></span><br><span class="line">PUT user_v1</span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;aliases&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;user&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;mappings&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;properties&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;userName&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;analyzer&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ik_max_word&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;search_analyzer&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ik_smart&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;fields&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;keyword&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;keyword&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;ignore_above&quot;</span><span class="punctuation">:</span> <span class="number">64</span></span><br><span class="line">          <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;suggest&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;completion&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;analyzer&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ik_max_word&quot;</span></span><br><span class="line">          <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;userProfile&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;analyzer&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ik_max_word&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;search_analyzer&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ik_smart&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;fields&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;keyword&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;keyword&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;ignore_above&quot;</span><span class="punctuation">:</span> <span class="number">256</span></span><br><span class="line">          <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;suggest&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;completion&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;analyzer&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ik_max_word&quot;</span></span><br><span class="line">          <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;userAvatar&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;keyword&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;createTime&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;date&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;updateTime&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;date&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;isDelete&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;keyword&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><ul><li>å®šä¹‰æ¥å£å®ç°æœç´¢å»ºè®®æ–¹æ³• : CustomUserEsRepository</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">CustomUserEsRepository</span> &#123;</span><br><span class="line">    List&lt;String&gt; <span class="title function_">suggest</span><span class="params">(String prefix)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å®ç°æ¥å£ : CustomUserEsRepositoryImpl</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CustomUserEsRepositoryImpl</span> <span class="keyword">implements</span> <span class="title class_">CustomUserEsRepository</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RestHighLevelClient client;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;String&gt; <span class="title function_">suggest</span><span class="params">(String prefix)</span> &#123;</span><br><span class="line">        Set&lt;String&gt; suggestions = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line">        suggestions.addAll(suggestField(<span class="string">&quot;userName.suggest&quot;</span>, prefix));</span><br><span class="line">        suggestions.addAll(suggestField(<span class="string">&quot;userProfile.suggest&quot;</span>, prefix));</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(suggestions);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; <span class="title function_">suggestField</span><span class="params">(String field, String prefix)</span> &#123;</span><br><span class="line">        List&lt;String&gt; suggestions = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">SearchRequest</span> <span class="variable">searchRequest</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SearchRequest</span>(<span class="string">&quot;user_v1&quot;</span>);</span><br><span class="line">            <span class="type">SearchSourceBuilder</span> <span class="variable">searchSourceBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SearchSourceBuilder</span>();</span><br><span class="line">            <span class="type">SuggestBuilder</span> <span class="variable">suggestBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SuggestBuilder</span>();</span><br><span class="line">            <span class="type">CompletionSuggestionBuilder</span> <span class="variable">completionSuggestionBuilder</span> <span class="operator">=</span></span><br><span class="line">                    SuggestBuilders.completionSuggestion(field).prefix(prefix).size(<span class="number">10</span>);</span><br><span class="line">            suggestBuilder.addSuggestion(<span class="string">&quot;suggest_&quot;</span> + field, completionSuggestionBuilder);</span><br><span class="line">            searchSourceBuilder.suggest(suggestBuilder);</span><br><span class="line">            searchRequest.source(searchSourceBuilder);</span><br><span class="line"></span><br><span class="line">            <span class="type">SearchResponse</span> <span class="variable">searchResponse</span> <span class="operator">=</span> client.search(searchRequest, RequestOptions.DEFAULT);</span><br><span class="line">            searchResponse.getSuggest().getSuggestion(<span class="string">&quot;suggest_&quot;</span> + field)</span><br><span class="line">                    .getEntries().forEach(entry -&gt; &#123;</span><br><span class="line">                        entry.getOptions().forEach(option -&gt; &#123;</span><br><span class="line">                            suggestions.add(option.getText().string());</span><br><span class="line">                        &#125;);</span><br><span class="line">                    &#125;);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> suggestions;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å¸–å­éƒ¨åˆ†"><a href="#å¸–å­éƒ¨åˆ†" class="headerlink" title="å¸–å­éƒ¨åˆ†"></a>å¸–å­éƒ¨åˆ†</h3><ul><li>æ›´æ”¹esç´¢å¼•</li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">DELETE post_v1</span><br><span class="line"></span><br><span class="line">GET post_v1/_mapping</span><br><span class="line"></span><br><span class="line">PUT post_v1</span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;aliases&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;post&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;mappings&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;properties&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;analyzer&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ik_max_word&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;search_analyzer&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ik_smart&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;fields&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;keyword&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;keyword&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;ignore_above&quot;</span><span class="punctuation">:</span> <span class="number">256</span></span><br><span class="line">          <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;suggest&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;completion&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;analyzer&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ik_max_word&quot;</span></span><br><span class="line">          <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;analyzer&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ik_max_word&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;search_analyzer&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ik_smart&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;fields&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;keyword&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;keyword&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;ignore_above&quot;</span><span class="punctuation">:</span> <span class="number">256</span></span><br><span class="line">          <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;tags&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;keyword&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;userId&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;keyword&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;createTime&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;date&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;updateTime&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;date&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;isDelete&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;keyword&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><ul><li>å®šä¹‰æ¥å£å®ç°æœç´¢å»ºè®®æ–¹æ³• : CustomPostEsRepository</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">CustomPostEsRepository</span> &#123;</span><br><span class="line">    List&lt;String&gt; <span class="title function_">suggest</span><span class="params">(String prefix)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å®ç°æ¥å£ : CustomPostEsRepositoryImpl</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CustomPostEsRepositoryImpl</span> <span class="keyword">implements</span> <span class="title class_">CustomPostEsRepository</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RestHighLevelClient client;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;String&gt; <span class="title function_">suggest</span><span class="params">(String prefix)</span> &#123;</span><br><span class="line">        Set&lt;String&gt; suggestions = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line">        suggestions.addAll(suggestField(<span class="string">&quot;title.suggest&quot;</span>, prefix));</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(suggestions);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; <span class="title function_">suggestField</span><span class="params">(String field, String prefix)</span> &#123;</span><br><span class="line">        List&lt;String&gt; suggestions = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">SearchRequest</span> <span class="variable">searchRequest</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SearchRequest</span>(<span class="string">&quot;user_v1&quot;</span>);</span><br><span class="line">            <span class="type">SearchSourceBuilder</span> <span class="variable">searchSourceBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SearchSourceBuilder</span>();</span><br><span class="line">            <span class="type">SuggestBuilder</span> <span class="variable">suggestBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SuggestBuilder</span>();</span><br><span class="line">            <span class="type">CompletionSuggestionBuilder</span> <span class="variable">completionSuggestionBuilder</span> <span class="operator">=</span></span><br><span class="line">                    SuggestBuilders.completionSuggestion(field).prefix(prefix).size(<span class="number">10</span>);</span><br><span class="line">            suggestBuilder.addSuggestion(<span class="string">&quot;suggest_&quot;</span> + field, completionSuggestionBuilder);</span><br><span class="line">            searchSourceBuilder.suggest(suggestBuilder);</span><br><span class="line">            searchRequest.source(searchSourceBuilder);</span><br><span class="line"></span><br><span class="line">            <span class="type">SearchResponse</span> <span class="variable">searchResponse</span> <span class="operator">=</span> client.search(searchRequest, RequestOptions.DEFAULT);</span><br><span class="line">            searchResponse.getSuggest().getSuggestion(<span class="string">&quot;suggest_&quot;</span> + field)</span><br><span class="line">                    .getEntries().forEach(entry -&gt; &#123;</span><br><span class="line">                        entry.getOptions().forEach(option -&gt; &#123;</span><br><span class="line">                            suggestions.add(option.getText().string());</span><br><span class="line">                        &#125;);</span><br><span class="line">                    &#125;);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> suggestions;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¼€å‘æ€»ç»“"><a href="#å¼€å‘æ€»ç»“" class="headerlink" title="å¼€å‘æ€»ç»“"></a>å¼€å‘æ€»ç»“</h2><h3 id="WebMvcConfigurerå’ŒWebMvcConfigurationSupportçš„åŒºåˆ«"><a href="#WebMvcConfigurerå’ŒWebMvcConfigurationSupportçš„åŒºåˆ«" class="headerlink" title="WebMvcConfigurerå’ŒWebMvcConfigurationSupportçš„åŒºåˆ«"></a>WebMvcConfigurerå’ŒWebMvcConfigurationSupportçš„åŒºåˆ«</h3><blockquote><p><a href="https://blog.csdn.net/o0way0o/article/details/135320565">WebMvcConfigurerå’ŒWebMvcConfigurationSupportï¼ˆMVCé…ç½®ï¼‰-CSDNåšå®¢</a></p></blockquote><blockquote><p>åŒæ—¶ä½¿ç”¨ <code>WebMvcConfigurer</code> å’Œ <code>WebMvcConfigurationSupport</code>ï¼Œ<code>WebMvcConfigurationSupport</code>ä¼šè¦†ç›– Spring Boot çš„è‡ªåŠ¨é…ç½®ï¼Œå› æ­¤ <code>WebMvcConfigurer</code> ä¸­çš„é…ç½®å¯èƒ½ä¸ä¼šç”Ÿæ•ˆã€‚å»ºè®®åªä½¿ç”¨å…¶ä¸­ä¸€ç§æ–¹å¼è¿›è¡Œé…ç½®ï¼Œä»¥é¿å…å†²çªå’Œæ„å¤–è¡Œä¸ºã€‚</p></blockquote><h2 id="å·²å®ç°"><a href="#å·²å®ç°" class="headerlink" title="å·²å®ç°"></a>å·²å®ç°</h2><blockquote><p>åˆ†é¡µ</p><p>ä¸‹æ‹‰è”æƒ³è¯æç¤º</p><p>   ç”¨æˆ·ç™»å½•|æ³¨å†Œ|æ›´æ–°</p></blockquote><h2 id="å¾…å®ç°"><a href="#å¾…å®ç°" class="headerlink" title="å¾…å®ç°"></a>å¾…å®ç°</h2><ul><li>ä»¥å›¾æœå›¾</li></ul>]]></content>
      
      
      <categories>
          
          <category> Project </category>
          
      </categories>
      
      
        <tags>
            
            <tag> search-platform </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
